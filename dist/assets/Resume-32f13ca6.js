var Ht=Object.defineProperty;var zt=(S,n,y)=>n in S?Ht(S,n,{enumerable:!0,configurable:!0,writable:!0,value:y}):S[n]=y;var Me=(S,n,y)=>(zt(S,typeof n!="symbol"?n+"":n,y),y),st=(S,n,y)=>{if(!n.has(S))throw TypeError("Cannot "+y)};var D=(S,n,y)=>(st(S,n,"read from private field"),y?y.call(S):n.get(S)),ae=(S,n,y)=>{if(n.has(S))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(S):n.set(S,y)},me=(S,n,y,t)=>(st(S,n,"write to private field"),t?t.call(S,y):n.set(S,y),y),at=(S,n,y,t)=>({set _(s){me(S,n,s,y)},get _(){return D(S,n,t)}}),he=(S,n,y)=>(st(S,n,"access private method"),y);import{g as getAugmentedNamespace,r as reactExports,P as PropTypes,d as React,G as GenIcon,j as jsxRuntimeExports}from"./index-16de9d98.js";import{a as _objectWithoutPropertiesLoose,b as _setPrototypeOf,d as _assertThisInitialized,_ as _extends,c as clsx}from"./assertThisInitialized-0334ae7a.js";function commonjsRequire(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(n,y){module.exports=y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.UNSUPPORTED_FEATURES=n.TextRenderingMode=n.StreamType=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.arrayByteLength=re,n.arraysToBytes=ue,n.assert=d,n.bytesToString=I,n.createPromiseCapability=pe,n.createValidAbsoluteUrl=R,n.escapeString=Te,n.getModificationDate=se,n.getVerbosityLevel=ne,n.info=le,n.isArrayBuffer=Oe,n.isArrayEqual=Ze,n.isAscii=Fe,n.objectFromMap=te,n.objectSize=oe,n.setVerbosityLevel=X,n.shadow=j,n.string32=Z,n.stringToBytes=q,n.stringToPDFString=Ee,n.stringToUTF16BEString=ke,n.stringToUTF8String=ze,n.unreachable=B,n.utf8StringToString=Ce,n.warn=_e,y(2);const t=[1,0,0,1,0,0];n.IDENTITY_MATRIX=t;const s=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=s;const F=1.35;n.LINE_FACTOR=F;const M=.35;n.LINE_DESCENT_FACTOR=M;const T={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=T;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=b;const f="pdfjs_internal_editor_";n.AnnotationEditorPrefix=f;const w={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};n.AnnotationEditorType=w;const L={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};n.AnnotationEditorParamsType=L;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=x;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=P;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=h;const e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=e;const i={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=i;const l={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=l;const v={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=v;const A={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=A;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=c;const r={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=r;const a={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=a;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=g;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=k;const E={O:"PageOpen",C:"PageClose"};n.PageActionEventType=E;const m={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=m;const O={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=O;const ee={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=ee;const ie={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=ie;const Q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=Q;const K={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};n.UNSUPPORTED_FEATURES=K;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=G;let $=ee.WARNINGS;function X(J){Number.isInteger(J)&&($=J)}function ne(){return $}function le(J){$>=ee.INFOS&&console.log(`Info: ${J}`)}function _e(J){$>=ee.WARNINGS&&console.log(`Warning: ${J}`)}function B(J){throw new Error(J)}function d(J,H){J||B(H)}function u(J){if(!J)return!1;switch(J.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function R(J,H=null,z=null){if(!J)return null;try{if(z&&typeof J=="string"){if(z.addDefaultProtocol&&J.startsWith("www.")){const ye=J.match(/\./g);ye&&ye.length>=2&&(J=`http://${J}`)}if(z.tryConvertEncoding)try{J=ze(J)}catch{}}const ge=H?new URL(J,H):new URL(J);if(u(ge))return ge}catch{}return null}function j(J,H,z){return Object.defineProperty(J,H,{value:z,enumerable:!0,configurable:!0,writable:!1}),z}const U=function(){function H(z,ge){this.constructor===H&&B("Cannot initialize BaseException."),this.message=z,this.name=ge}return H.prototype=new Error,H.constructor=H,H}();n.BaseException=U;class W extends U{constructor(H,z){super(H,"PasswordException"),this.code=z}}n.PasswordException=W;class Y extends U{constructor(H,z){super(H,"UnknownErrorException"),this.details=z}}n.UnknownErrorException=Y;class V extends U{constructor(H){super(H,"InvalidPDFException")}}n.InvalidPDFException=V;class o extends U{constructor(H){super(H,"MissingPDFException")}}n.MissingPDFException=o;class p extends U{constructor(H,z){super(H,"UnexpectedResponseException"),this.status=z}}n.UnexpectedResponseException=p;class _ extends U{constructor(H){super(H,"FormatError")}}n.FormatError=_;class C extends U{constructor(H){super(H,"AbortException")}}n.AbortException=C;function I(J){(typeof J!="object"||J===null||J.length===void 0)&&B("Invalid argument for bytesToString");const H=J.length,z=8192;if(H<z)return String.fromCharCode.apply(null,J);const ge=[];for(let ye=0;ye<H;ye+=z){const ve=Math.min(ye+z,H),Se=J.subarray(ye,ve);ge.push(String.fromCharCode.apply(null,Se))}return ge.join("")}function q(J){typeof J!="string"&&B("Invalid argument for stringToBytes");const H=J.length,z=new Uint8Array(H);for(let ge=0;ge<H;++ge)z[ge]=J.charCodeAt(ge)&255;return z}function re(J){if(J.length!==void 0)return J.length;if(J.byteLength!==void 0)return J.byteLength;B("Invalid argument for arrayByteLength")}function ue(J){const H=J.length;if(H===1&&J[0]instanceof Uint8Array)return J[0];let z=0;for(let ve=0;ve<H;ve++)z+=re(J[ve]);let ge=0;const ye=new Uint8Array(z);for(let ve=0;ve<H;ve++){let Se=J[ve];Se instanceof Uint8Array||(typeof Se=="string"?Se=q(Se):Se=new Uint8Array(Se));const xe=Se.byteLength;ye.set(Se,ge),ge+=xe}return ye}function Z(J){return String.fromCharCode(J>>24&255,J>>16&255,J>>8&255,J&255)}function oe(J){return Object.keys(J).length}function te(J){const H=Object.create(null);for(const[z,ge]of J)H[z]=ge;return H}function ce(){const J=new Uint8Array(4);return J[0]=1,new Uint32Array(J.buffer,0,1)[0]===1}function fe(){try{return new Function(""),!0}catch{return!1}}class N{static get isLittleEndian(){return j(this,"isLittleEndian",ce())}static get isEvalSupported(){return j(this,"isEvalSupported",fe())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}n.FeatureTest=N;const de=[...Array(256).keys()].map(J=>J.toString(16).padStart(2,"0"));class be{static makeHexColor(H,z,ge){return`#${de[H]}${de[z]}${de[ge]}`}static scaleMinMax(H,z){let ge;H[0]?(H[0]<0&&(ge=z[0],z[0]=z[1],z[1]=ge),z[0]*=H[0],z[1]*=H[0],H[3]<0&&(ge=z[2],z[2]=z[3],z[3]=ge),z[2]*=H[3],z[3]*=H[3]):(ge=z[0],z[0]=z[2],z[2]=ge,ge=z[1],z[1]=z[3],z[3]=ge,H[1]<0&&(ge=z[2],z[2]=z[3],z[3]=ge),z[2]*=H[1],z[3]*=H[1],H[2]<0&&(ge=z[0],z[0]=z[1],z[1]=ge),z[0]*=H[2],z[1]*=H[2]),z[0]+=H[4],z[1]+=H[4],z[2]+=H[5],z[3]+=H[5]}static transform(H,z){return[H[0]*z[0]+H[2]*z[1],H[1]*z[0]+H[3]*z[1],H[0]*z[2]+H[2]*z[3],H[1]*z[2]+H[3]*z[3],H[0]*z[4]+H[2]*z[5]+H[4],H[1]*z[4]+H[3]*z[5]+H[5]]}static applyTransform(H,z){const ge=H[0]*z[0]+H[1]*z[2]+z[4],ye=H[0]*z[1]+H[1]*z[3]+z[5];return[ge,ye]}static applyInverseTransform(H,z){const ge=z[0]*z[3]-z[1]*z[2],ye=(H[0]*z[3]-H[1]*z[2]+z[2]*z[5]-z[4]*z[3])/ge,ve=(-H[0]*z[1]+H[1]*z[0]+z[4]*z[1]-z[5]*z[0])/ge;return[ye,ve]}static getAxialAlignedBoundingBox(H,z){const ge=be.applyTransform(H,z),ye=be.applyTransform(H.slice(2,4),z),ve=be.applyTransform([H[0],H[3]],z),Se=be.applyTransform([H[2],H[1]],z);return[Math.min(ge[0],ye[0],ve[0],Se[0]),Math.min(ge[1],ye[1],ve[1],Se[1]),Math.max(ge[0],ye[0],ve[0],Se[0]),Math.max(ge[1],ye[1],ve[1],Se[1])]}static inverseTransform(H){const z=H[0]*H[3]-H[1]*H[2];return[H[3]/z,-H[1]/z,-H[2]/z,H[0]/z,(H[2]*H[5]-H[4]*H[3])/z,(H[4]*H[1]-H[5]*H[0])/z]}static apply3dTransform(H,z){return[H[0]*z[0]+H[1]*z[1]+H[2]*z[2],H[3]*z[0]+H[4]*z[1]+H[5]*z[2],H[6]*z[0]+H[7]*z[1]+H[8]*z[2]]}static singularValueDecompose2dScale(H){const z=[H[0],H[2],H[1],H[3]],ge=H[0]*z[0]+H[1]*z[2],ye=H[0]*z[1]+H[1]*z[3],ve=H[2]*z[0]+H[3]*z[2],Se=H[2]*z[1]+H[3]*z[3],xe=(ge+Se)/2,De=Math.sqrt((ge+Se)**2-4*(ge*Se-ve*ye))/2,Re=xe+De||1,Pe=xe-De||1;return[Math.sqrt(Re),Math.sqrt(Pe)]}static normalizeRect(H){const z=H.slice(0);return H[0]>H[2]&&(z[0]=H[2],z[2]=H[0]),H[1]>H[3]&&(z[1]=H[3],z[3]=H[1]),z}static intersect(H,z){const ge=Math.max(Math.min(H[0],H[2]),Math.min(z[0],z[2])),ye=Math.min(Math.max(H[0],H[2]),Math.max(z[0],z[2]));if(ge>ye)return null;const ve=Math.max(Math.min(H[1],H[3]),Math.min(z[1],z[3])),Se=Math.min(Math.max(H[1],H[3]),Math.max(z[1],z[3]));return ve>Se?null:[ge,ve,ye,Se]}static bezierBoundingBox(H,z,ge,ye,ve,Se,xe,De){const Re=[],Pe=[[],[]];let Le,Ie,Ue,we,Ne,We,$e,Ve;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Ie=6*H-12*ge+6*ve,Le=-3*H+9*ge-9*ve+3*xe,Ue=3*ge-3*H):(Ie=6*z-12*ye+6*Se,Le=-3*z+9*ye-9*Se+3*De,Ue=3*ye-3*z),Math.abs(Le)<1e-12){if(Math.abs(Ie)<1e-12)continue;we=-Ue/Ie,0<we&&we<1&&Re.push(we);continue}$e=Ie*Ie-4*Ue*Le,Ve=Math.sqrt($e),!($e<0)&&(Ne=(-Ie+Ve)/(2*Le),0<Ne&&Ne<1&&Re.push(Ne),We=(-Ie-Ve)/(2*Le),0<We&&We<1&&Re.push(We))}let Ge=Re.length,je;const qe=Ge;for(;Ge--;)we=Re[Ge],je=1-we,Pe[0][Ge]=je*je*je*H+3*je*je*we*ge+3*je*we*we*ve+we*we*we*xe,Pe[1][Ge]=je*je*je*z+3*je*je*we*ye+3*je*we*we*Se+we*we*we*De;return Pe[0][qe]=H,Pe[1][qe]=z,Pe[0][qe+1]=xe,Pe[1][qe+1]=De,Pe[0].length=Pe[1].length=qe+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}n.Util=be;const Ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ee(J){if(J[0]>="ï"){let z;if(J[0]==="þ"&&J[1]==="ÿ"?z="utf-16be":J[0]==="ÿ"&&J[1]==="þ"?z="utf-16le":J[0]==="ï"&&J[1]==="»"&&J[2]==="¿"&&(z="utf-8"),z)try{const ge=new TextDecoder(z,{fatal:!0}),ye=q(J);return ge.decode(ye)}catch(ge){_e(`stringToPDFString: "${ge}".`)}}const H=[];for(let z=0,ge=J.length;z<ge;z++){const ye=Ae[J.charCodeAt(z)];H.push(ye?String.fromCharCode(ye):J.charAt(z))}return H.join("")}function Te(J){return J.replace(/([()\\\n\r])/g,H=>H===`
`?"\\n":H==="\r"?"\\r":`\\${H}`)}function Fe(J){return/^[\x00-\x7F]*$/.test(J)}function ke(J){const H=["þÿ"];for(let z=0,ge=J.length;z<ge;z++){const ye=J.charCodeAt(z);H.push(String.fromCharCode(ye>>8&255),String.fromCharCode(ye&255))}return H.join("")}function ze(J){return decodeURIComponent(escape(J))}function Ce(J){return unescape(encodeURIComponent(J))}function Oe(J){return typeof J=="object"&&J!==null&&J.byteLength!==void 0}function Ze(J,H){if(J.length!==H.length)return!1;for(let z=0,ge=J.length;z<ge;z++)if(J[z]!==H[z])return!1;return!0}function se(J=new Date){return[J.getUTCFullYear().toString(),(J.getUTCMonth()+1).toString().padStart(2,"0"),J.getUTCDate().toString().padStart(2,"0"),J.getUTCHours().toString().padStart(2,"0"),J.getUTCMinutes().toString().padStart(2,"0"),J.getUTCSeconds().toString().padStart(2,"0")].join("")}function pe(){const J=Object.create(null);let H=!1;return Object.defineProperty(J,"settled",{get(){return H}}),J.promise=new Promise(function(z,ge){J.resolve=function(ye){H=!0,z(ye)},J.reject=function(ye){H=!0,ge(ye)}}),J}},(S,n,y)=>{y(3)},(S,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;const y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=y},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var S,y,t,s,F,M,T,b,f,ot,L,x;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:h,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:i}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=h,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=i}let createPDFNetworkStream;function setPDFNetworkStreamFactory(h){createPDFNetworkStream=h}function getDocument(h){const e=new PDFDocumentLoadingTask;let i;if(typeof h=="string"||h instanceof URL)i={url:h};else if((0,_util.isArrayBuffer)(h))i={data:h};else if(h instanceof PDFDataRangeTransport)i={range:h};else{if(typeof h!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");i=h}const l=Object.create(null);let v=null,A=null;for(const r in i){const a=i[r];switch(r){case"url":if(typeof window<"u")try{l[r]=new URL(a,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if(typeof a=="string"||a instanceof URL){l[r]=a.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":v=a;continue;case"worker":A=a;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)l[r]=new Uint8Array(a);else{if(a instanceof Uint8Array)break;if(typeof a=="string")l[r]=(0,_util.stringToBytes)(a);else if(typeof a=="object"&&a!==null&&!isNaN(a.length))l[r]=new Uint8Array(a);else if((0,_util.isArrayBuffer)(a))l[r]=new Uint8Array(a);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}l[r]=a}if(l.CMapReaderFactory=l.CMapReaderFactory||DefaultCMapReaderFactory,l.StandardFontDataFactory=l.StandardFontDataFactory||DefaultStandardFontDataFactory,l.ignoreErrors=l.stopAtErrors!==!0,l.fontExtraProperties=l.fontExtraProperties===!0,l.pdfBug=l.pdfBug===!0,l.enableXfa=l.enableXfa===!0,(!Number.isInteger(l.rangeChunkSize)||l.rangeChunkSize<1)&&(l.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof l.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(l.docBaseUrl))&&(l.docBaseUrl=null),(!Number.isInteger(l.maxImageSize)||l.maxImageSize<-1)&&(l.maxImageSize=-1),typeof l.cMapUrl!="string"&&(l.cMapUrl=null),typeof l.standardFontDataUrl!="string"&&(l.standardFontDataUrl=null),typeof l.useWorkerFetch!="boolean"&&(l.useWorkerFetch=l.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&l.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof l.isEvalSupported!="boolean"&&(l.isEvalSupported=!0),typeof l.disableFontFace!="boolean"&&(l.disableFontFace=_is_node.isNodeJS),typeof l.useSystemFonts!="boolean"&&(l.useSystemFonts=!_is_node.isNodeJS&&!l.disableFontFace),(typeof l.ownerDocument!="object"||l.ownerDocument===null)&&(l.ownerDocument=globalThis.document),typeof l.disableRange!="boolean"&&(l.disableRange=!1),typeof l.disableStream!="boolean"&&(l.disableStream=!1),typeof l.disableAutoFetch!="boolean"&&(l.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(l.verbosity),!A){const r={verbosity:l.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};A=r.port?PDFWorker.fromPort(r):new PDFWorker(r),e._worker=A}const c=e.docId;return A.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const r=_fetchDocument(A,l,v,c),a=new Promise(function(g){let k;v?k=new _transport_stream.PDFDataTransportStream({length:l.length,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:l.disableRange,disableStream:l.disableStream},v):l.data||(k=createPDFNetworkStream({url:l.url,length:l.length,httpHeaders:l.httpHeaders,withCredentials:l.withCredentials,rangeChunkSize:l.rangeChunkSize,disableRange:l.disableRange,disableStream:l.disableStream})),g(k)});return Promise.all([r,a]).then(function([g,k]){if(e.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(c,g,A.port),m=new WorkerTransport(E,e,k,l);e._transport=m,E.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(h,e,i,l){if(h.destroyed)throw new Error("Worker was destroyed");i&&(e.length=i.length,e.initialData=i.initialData,e.progressiveDone=i.progressiveDone,e.contentDispositionFilename=i.contentDispositionFilename);const v=await h.messageHandler.sendWithPromise("GetDocRequest",{docId:l,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&&(e.data=null),h.destroyed)throw new Error("Worker was destroyed");return v}const n=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${at(n,S)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=n;S=new WeakMap,ae(PDFDocumentLoadingTask,S,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,i,l=!1,v=null){this.length=e,this.initialData=i,this.progressiveDone=l,this.contentDispositionFilename=v,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,i){for(const l of this._rangeListeners)l(e,i)}onDataProgress(e,i){this._readyCapability.promise.then(()=>{for(const l of this._progressListeners)l(e,i)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,i){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,i){this._pdfInfo=e,this._transport=i,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,i,l,v,A=!1){this._pageIndex=e,this._pageInfo=i,this._ownerDocument=v,this._transport=l,this._stats=A?new _display_utils.StatTimer:null,this._pdfBug=A,this.commonObjs=l.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:i=this.rotate,offsetX:l=0,offsetY:v=0,dontFlip:A=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:i,offsetX:l,offsetY:v,dontFlip:A})}getAnnotations({intent:e="display"}={}){const i=this._transport.getRenderingIntent(e);let l=this._annotationPromises.get(i.cacheKey);return l||(l=this._transport.getAnnotations(this._pageIndex,i.renderingIntent),this._annotationPromises.set(i.cacheKey,l),l=l.then(v=>{for(const A of v)A.titleObj!==void 0&&Object.defineProperty(A,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),A.titleObj.str}}),A.contentsObj!==void 0&&Object.defineProperty(A,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),A.contentsObj.str}});return v})),l}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:i,intent:l="display",annotationMode:v=_util.AnnotationMode.ENABLE,transform:A=null,imageLayer:c=null,canvasFactory:r=null,background:a=null,optionalContentConfigPromise:g=null,annotationCanvasMap:k=null,pageColors:E=null,printAnnotationStorage:m=null}){var X,ne;((X=arguments[0])==null?void 0:X.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_FORMS)),((ne=arguments[0])==null?void 0:ne.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const O=this._transport.getRenderingIntent(l,v,m);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let ee=this._intentStates.get(O.cacheKey);ee||(ee=Object.create(null),this._intentStates.set(O.cacheKey,ee)),ee.streamReaderCancelTimeout&&(clearTimeout(ee.streamReaderCancelTimeout),ee.streamReaderCancelTimeout=null);const ie=r||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Q=!!(O.renderingIntent&_util.RenderingIntentFlag.PRINT);ee.displayReadyCapability||(ee.displayReadyCapability=(0,_util.createPromiseCapability)(),ee.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O));const K=le=>{ee.renderTasks.delete(G),(this.cleanupAfterRender||Q)&&(this.pendingCleanup=!0),this._tryCleanup(),le?(G.capability.reject(le),this._abortOperatorList({intentState:ee,reason:le instanceof Error?le:new Error(le)})):G.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},G=new InternalRenderTask({callback:K,params:{canvasContext:e,viewport:i,transform:A,imageLayer:c,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:k,operatorList:ee.operatorList,pageIndex:this._pageIndex,canvasFactory:ie,useRequestAnimationFrame:!Q,pdfBug:this._pdfBug,pageColors:E});(ee.renderTasks||(ee.renderTasks=new Set)).add(G);const $=G.task;return Promise.all([ee.displayReadyCapability.promise,g]).then(([le,_e])=>{if(this.pendingCleanup){K();return}this._stats&&this._stats.time("Rendering"),G.initializeGraphics({transparency:le,optionalContentConfig:_e}),G.operatorListChanged()}).catch(K),$}getOperatorList({intent:e="display",annotationMode:i=_util.AnnotationMode.ENABLE,printAnnotationStorage:l=null}={}){function v(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(r))}const A=this._transport.getRenderingIntent(e,i,l,!0);let c=this._intentStates.get(A.cacheKey);c||(c=Object.create(null),this._intentStates.set(A.cacheKey,c));let r;return c.opListReadCapability||(r=Object.create(null),r.operatorListChanged=v,c.opListReadCapability=(0,_util.createPromiseCapability)(),(c.renderTasks||(c.renderTasks=new Set)).add(r),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(A)),c.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:i===!0},{highWaterMark:100,size(v){return v.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(l=>_xfa_text.XfaText.textContent(l));const i=this.streamTextContent(e);return new Promise(function(l,v){function A(){c.read().then(function({value:a,done:g}){if(g){l(r);return}Object.assign(r.styles,a.styles),r.items.push(...a.items),A()},v)}const c=i.getReader(),r={items:[],styles:Object.create(null)};A()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const l of i.renderTasks)e.push(l.completed),l.cancel();this.objs.clear();for(const i of this._bitmaps)i.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:i,operatorList:l}of this._intentStates.values())if(i.size>0||!l.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const i of this._bitmaps)i.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,i){const l=this._intentStates.get(i);l&&(this._stats&&this._stats.timeEnd("Page Request"),l.displayReadyCapability&&l.displayReadyCapability.resolve(e))}_renderPageChunk(e,i){for(let l=0,v=e.length;l<v;l++)i.operatorList.fnArray.push(e.fnArray[l]),i.operatorList.argsArray.push(e.argsArray[l]);i.operatorList.lastChunk=e.lastChunk,i.operatorList.separateAnnots=e.separateAnnots;for(const l of i.renderTasks)l.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:i,annotationStorageMap:l}){const A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:i,annotationStorage:l}).getReader(),c=this._intentStates.get(i);c.streamReader=A;const r=()=>{A.read().then(({value:a,done:g})=>{if(g){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,c),r())},a=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const g of c.renderTasks)g.operatorListChanged();this._tryCleanup()}if(c.displayReadyCapability)c.displayReadyCapability.reject(a);else if(c.opListReadCapability)c.opListReadCapability.reject(a);else throw a}})};r()}_abortOperatorList({intentState:e,reason:i,force:l=!1}){if(e.streamReader){if(!l){if(e.renderTasks.size>0)return;if(i instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:i,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(i.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[v,A]of this._intentStates)if(A===e){this._intentStates.delete(v);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,i){const l={data:structuredClone(e,i)};this._deferred.then(()=>{for(const v of this._listeners)v.call(this,l)})}addEventListener(e,i){this._listeners.push(i)}removeEventListener(e,i){const l=this._listeners.indexOf(i);this._listeners.splice(l,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,e){let i;try{if(i=new URL(h),!i.origin||i.origin==="null")return!1}catch{return!1}const l=new URL(e,i);return i.origin===l.origin},PDFWorkerUtil.createCDNWrapper=function(h){const e=`importScripts("${h}");`;return URL.createObjectURL(new Blob([e]))}}const _PDFWorker=class{constructor({name:h=null,port:e=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(e&&D(_PDFWorker,t).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=i,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){D(_PDFWorker,t).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const e=new Worker(h),i=new _message_handler.MessageHandler("main","worker",e),l=()=>{e.removeEventListener("error",v),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},v=()=>{this._webWorker||l()};e.addEventListener("error",v),i.on("test",c=>{if(e.removeEventListener("error",v),this.destroyed){l();return}c?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())}),i.on("ready",c=>{if(e.removeEventListener("error",v),this.destroyed){l();return}try{A()}catch{this._setupFakeWorker()}});const A=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};A();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const i=`fake${PDFWorkerUtil.fakeWorkerId++}`,l=new _message_handler.MessageHandler(i+"_worker",i,e);h.setup(l,e);const v=new _message_handler.MessageHandler(i,i+"_worker",e);this._messageHandler=v,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),D(_PDFWorker,t).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h!=null&&h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return D(this,t).has(h.port)?D(this,t).get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;t=new WeakMap,ae(PDFWorker,t,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(e,i,l,v){ae(this,s,null);ae(this,F,new Map);ae(this,M,new Map);ae(this,T,null);this.messageHandler=e,this.loadingTask=i,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:i.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:v.ownerDocument,styleElement:v.styleElement}),this._params=v,v.useWorkerFetch||(this.CMapReaderFactory=new v.CMapReaderFactory({baseUrl:v.cMapUrl,isCompressed:v.cMapPacked}),this.StandardFontDataFactory=new v.StandardFontDataFactory({baseUrl:v.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=l,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return D(this,s)}getRenderingIntent(e,i=_util.AnnotationMode.ENABLE,l=null,v=!1){let A=_util.RenderingIntentFlag.DISPLAY,c=null;switch(e){case"any":A=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":A=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(i){case _util.AnnotationMode.DISABLE:A+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:A+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:A+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,c=(A&_util.RenderingIntentFlag.PRINT&&l instanceof _annotation_storage.PrintAnnotationStorage?l:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${i}`)}return v&&(A+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:A,cacheKey:`${A}_${_annotation_storage.AnnotationStorage.getHash(c)}`,annotationStorageMap:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const l of D(this,F).values())e.push(l._destroy());D(this,F).clear(),D(this,M).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),me(this,T,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:i}=this;e.on("GetReader",(l,v)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=A=>{this._lastProgress={loaded:A.loaded,total:A.total}},v.onPull=()=>{this._fullReader.read().then(function({value:A,done:c}){if(c){v.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(A),"GetReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(A),1,[A])}).catch(A=>{v.error(A)})},v.onCancel=A=>{this._fullReader.cancel(A),v.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",l=>{const v=(0,_util.createPromiseCapability)(),A=this._fullReader;return A.headersReady.then(()=>{var c;(!A.isStreamingSupported||!A.isRangeSupported)&&(this._lastProgress&&((c=i.onProgress)==null||c.call(i,this._lastProgress)),A.onProgress=r=>{var a;(a=i.onProgress)==null||a.call(i,{loaded:r.loaded,total:r.total})}),v.resolve({isStreamingSupported:A.isStreamingSupported,isRangeSupported:A.isRangeSupported,contentLength:A.contentLength})},v.reject),v.promise}),e.on("GetRangeReader",(l,v)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const A=this._networkStream.getRangeReader(l.begin,l.end);if(!A){v.close();return}v.onPull=()=>{A.read().then(function({value:c,done:r}){if(r){v.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(c),"GetRangeReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{v.error(c)})},v.onCancel=c=>{A.cancel(c),v.ready.catch(r=>{if(!this.destroyed)throw r})}}),e.on("GetDoc",({pdfInfo:l})=>{this._numPages=l.numPages,this._htmlForXfa=l.htmlForXfa,delete l.htmlForXfa,i._capability.resolve(new PDFDocumentProxy(l,this))}),e.on("DocException",function(l){let v;switch(l.name){case"PasswordException":v=new _util.PasswordException(l.message,l.code);break;case"InvalidPDFException":v=new _util.InvalidPDFException(l.message);break;case"MissingPDFException":v=new _util.MissingPDFException(l.message);break;case"UnexpectedResponseException":v=new _util.UnexpectedResponseException(l.message,l.status);break;case"UnknownErrorException":v=new _util.UnknownErrorException(l.message,l.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(v)}),e.on("PasswordRequest",l=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),i.onPassword){const v=A=>{A instanceof Error?this._passwordCapability.reject(A):this._passwordCapability.resolve({password:A})};try{i.onPassword(v,l.code)}catch(A){this._passwordCapability.reject(A)}}else this._passwordCapability.reject(new _util.PasswordException(l.message,l.code));return this._passwordCapability.promise}),e.on("DataLoaded",l=>{var v;(v=i.onProgress)==null||v.call(i,{loaded:l.length,total:l.length}),this.downloadInfoCapability.resolve(l)}),e.on("StartRenderPage",l=>{if(this.destroyed)return;D(this,F).get(l.pageIndex)._startRenderPage(l.transparency,l.cacheKey)}),e.on("commonobj",([l,v,A])=>{var c;if(!this.destroyed&&!this.commonObjs.has(l))switch(v){case"Font":const r=this._params;if("error"in A){const k=A.error;(0,_util.warn)(`Error during font loading: ${k}`),this.commonObjs.resolve(l,k);break}let a=null;r.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)&&(a={registerFont(k,E){globalThis.FontInspector.fontAdded(k,E)}});const g=new _font_loader.FontFaceObject(A,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(g).catch(k=>e.sendWithPromise("FontFallback",{id:l})).finally(()=>{!r.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(l,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(l,A);break;default:throw new Error(`Got unknown common object type ${v}`)}}),e.on("obj",([l,v,A,c])=>{var a;if(this.destroyed)return;const r=D(this,F).get(v);if(!r.objs.has(l))switch(A){case"Image":r.objs.resolve(l,c);const g=8e6;if(c){let k;if(c.bitmap){const{bitmap:E,width:m,height:O}=c;k=m*O*4,r._bitmaps.add(E)}else k=((a=c.data)==null?void 0:a.length)||0;k>g&&(r.cleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(l,c);break;default:throw new Error(`Got unknown object type ${A}`)}}),e.on("DocProgress",l=>{var v;this.destroyed||(v=i.onProgress)==null||v.call(i,{loaded:l.loaded,total:l.total})}),e.on("DocStats",l=>{this.destroyed||me(this,s,Object.freeze({streamTypes:Object.freeze(l.streamTypes),fontTypes:Object.freeze(l.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(l):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(l):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var i,l;this.destroyed||(l=(i=this.loadingTask).onUnsupportedFeature)==null||l.call(i,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=e-1,l=D(this,M).get(i);if(l)return l;const v=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(A=>{if(this.destroyed)throw new Error("Transport destroyed");const c=new PDFPageProxy(i,A,this,this._params.ownerDocument,this._params.pdfBug);return D(this,F).set(i,c),c});return D(this,M).set(i,v),v}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:i})}saveDocument(){var e;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((e=this._fullReader)==null?void 0:e.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return D(this,T)||me(this,T,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var i,l;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const i of D(this,F).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),me(this,T,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}s=new WeakMap,F=new WeakMap,M=new WeakMap,T=new WeakMap;class PDFObjects{constructor(){ae(this,f);ae(this,b,Object.create(null))}get(e,i=null){if(i){const v=he(this,f,ot).call(this,e);return v.capability.promise.then(()=>i(v.data)),null}const l=D(this,b)[e];if(!(l!=null&&l.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return l.data}has(e){const i=D(this,b)[e];return(i==null?void 0:i.capability.settled)||!1}resolve(e,i=null){const l=he(this,f,ot).call(this,e);l.data=i,l.capability.resolve()}clear(){me(this,b,Object.create(null))}}b=new WeakMap,f=new WeakSet,ot=function(e){const i=D(this,b)[e];return i||(D(this,b)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){ae(this,L,null);me(this,L,e),this.onContinue=null}get promise(){return D(this,L).capability.promise}cancel(){D(this,L).cancel()}get separateAnnots(){const{separateAnnots:e}=D(this,L).operatorList;if(!e)return!1;const{annotationCanvasMap:i}=D(this,L);return e.form||e.canvas&&(i==null?void 0:i.size)>0}}L=new WeakMap,exports.RenderTask=RenderTask;const P=class{constructor({callback:e,params:i,objs:l,commonObjs:v,annotationCanvasMap:A,operatorList:c,pageIndex:r,canvasFactory:a,useRequestAnimationFrame:g=!1,pdfBug:k=!1,pageColors:E=null}){this.callback=e,this.params=i,this.objs=l,this.commonObjs=v,this.annotationCanvasMap=A,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=r,this.canvasFactory=a,this._pdfBug=k,this.pageColors=E,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:i}){var a;if(this.cancelled)return;if(this._canvas){if(D(P,x).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");D(P,x).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:l,viewport:v,transform:A,imageLayer:c,background:r}=this.params;this.gfx=new _canvas.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,c,i,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:A,viewport:v,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&D(P,x).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&D(P,x).delete(this._canvas),this.callback())))}};let InternalRenderTask=P;x=new WeakMap,ae(InternalRenderTask,x,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(S,n,y)=>{var b,Pt,w;Object.defineProperty(n,"__esModule",{value:!0}),n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var t=y(1),s=y(6),F=y(10);class M{constructor(){ae(this,b);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(x,P){const h=this._storage.get(x);return h===void 0?P:Object.assign(P,h)}getRawValue(x){return this._storage.get(x)}remove(x){if(this._storage.delete(x),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const P of this._storage.values())if(P instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(x,P){const h=this._storage.get(x);let e=!1;if(h!==void 0)for(const[i,l]of Object.entries(P))h[i]!==l&&(e=!0,h[i]=l);else e=!0,this._storage.set(x,P);e&&he(this,b,Pt).call(this),P instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(P.constructor._type)}has(x){return this._storage.has(x)}getAll(){return this._storage.size>0?(0,t.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(this._storage.size===0)return null;const x=new Map;for(const[P,h]of this._storage){const e=h instanceof s.AnnotationEditor?h.serialize():h;e&&x.set(P,e)}return x}static getHash(x){if(!x)return"";const P=new F.MurmurHash3_64;for(const[h,e]of x)P.update(`${h}:${JSON.stringify(e)}`);return P.hexdigest()}}b=new WeakSet,Pt=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},n.AnnotationStorage=M;class T extends M{constructor(P){super();ae(this,w,null);me(this,w,structuredClone(P.serializable))}get print(){(0,t.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return D(this,w)}}w=new WeakMap,n.PrintAnnotationStorage=T},(S,n,y)=>{var M,T,b,f,w,L;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var t=y(7),s=y(1);const x=class{constructor(h){ae(this,M,this.focusin.bind(this));ae(this,T,this.focusout.bind(this));ae(this,b,!1);ae(this,f,!1);ae(this,w,!1);ae(this,L,x._zIndex++);this.constructor===x&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null;const[e,i]=this.parent.viewportBaseDimensions;this.x=h.x/e,this.y=h.y/i,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=D(this,L)}focusin(h){D(this,b)?me(this,b,!1):this.parent.setSelected(this)}focusout(h){if(!this.isAttachedToDOM)return;const e=h.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(h.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(h){const e=this.parent.div.getBoundingClientRect();this.startX=h.clientX-e.x,this.startY=h.clientY-e.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,e,i,l){const[v,A]=this.parent.viewportBaseDimensions;[i,l]=this.screenToPageTranslation(i,l),this.x=(h+i)/v,this.y=(e+l)/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(h,e){const[i,l]=this.parent.viewportBaseDimensions;[h,e]=this.screenToPageTranslation(h,e),this.x+=h/i,this.y+=e/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(h,e){const{rotation:i}=this.parent.viewport;switch(i){case 90:return[e,-h];case 180:return[-h,-e];case 270:return[-e,h];default:return[h,e]}}setDims(h,e){const[i,l]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*h/i}%`,this.div.style.height=`${100*e/l}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",D(this,M)),this.div.addEventListener("focusout",D(this,T));const[h,e]=this.getInitialTranslation();return this.translate(h,e),(0,t.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const e=t.KeyboardManager.platform.isMac;if(h.button!==0||h.ctrlKey&&e){h.preventDefault();return}h.ctrlKey&&!e||h.shiftKey||h.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this),me(this,b,!0)}getRect(h,e){const[i,l]=this.parent.viewportBaseDimensions,[v,A]=this.parent.pageDimensions,c=v*h/i,r=A*e/l,a=this.x*v,g=this.y*A,k=this.width*v,E=this.height*A;switch(this.rotation){case 0:return[a+c,A-g-r-E,a+c+k,A-g-r];case 90:return[a+r,A-g+c,a+r+E,A-g+c+k];case 180:return[a-c-k,A-g+r,a-c,A-g+r+E];case 270:return[a-r-E,A-g-c-k,a-r,A-g-c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,e){const[i,l,v,A]=h,c=v-i,r=A-l;switch(this.rotation){case 0:return[i,e-A,c,r];case 90:return[i,e-l,r,c];case 180:return[v,e-l,c,r];case 270:return[v,e-A,r,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){me(this,w,!0)}disableEditMode(){me(this,w,!1)}isInEditMode(){return D(this,w)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var h;(h=this.div)==null||h.addEventListener("focusin",D(this,M))}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(h,e){const i=new this.prototype.constructor({parent:e,id:e.getNextId()});i.rotation=h.rotation;const[l,v]=e.pageDimensions,[A,c,r,a]=i.getRectInCurrentCoords(h.rect,v);return i.x=A/l,i.y=c/v,i.width=r/l,i.height=a/v,i}remove(){this.div.removeEventListener("focusin",D(this,M)),this.div.removeEventListener("focusout",D(this,T)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var h;(h=this.div)==null||h.classList.add("selectedEditor")}unselect(){var h;(h=this.div)==null||h.classList.remove("selectedEditor")}updateParams(h,e){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return D(this,f)}set isEditing(h){me(this,f,h),h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let F=x;M=new WeakMap,T=new WeakMap,b=new WeakMap,f=new WeakMap,w=new WeakMap,L=new WeakMap,Me(F,"_colorManager",new t.ColorManager),Me(F,"_zIndex",1),n.AnnotationEditor=F},(S,n,y)=>{var P,h,e,i,l,v,Tt,r,g,k,E,m,O,ee,ie,Q,K,G,$,X,ne,le,_e,B,d,u,Ct,j,lt,W,Be,V,Je,p,xt,C,wt,q,ct,ue,Qe,oe,et;Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=F,n.opacityToHex=M;var t=y(1),s=y(8);function F(fe,N,de){for(const be of de)N.addEventListener(be,fe[be].bind(fe))}function M(fe){return Math.round(Math.min(255,Math.max(1,255*fe))).toString(16).padStart(2,"0")}class T{constructor(){ae(this,P,0)}getId(){return`${t.AnnotationEditorPrefix}${at(this,P)._++}`}}P=new WeakMap;class b{constructor(N=128){ae(this,h,[]);ae(this,e,!1);ae(this,i,void 0);ae(this,l,-1);me(this,i,N)}add({cmd:N,undo:de,mustExec:be,type:Ae=NaN,overwriteIfSameType:Ee=!1,keepUndo:Te=!1}){if(be&&N(),D(this,e))return;const Fe={cmd:N,undo:de,type:Ae};if(D(this,l)===-1){D(this,h).length>0&&(D(this,h).length=0),me(this,l,0),D(this,h).push(Fe);return}if(Ee&&D(this,h)[D(this,l)].type===Ae){Te&&(Fe.undo=D(this,h)[D(this,l)].undo),D(this,h)[D(this,l)]=Fe;return}const ke=D(this,l)+1;ke===D(this,i)?D(this,h).splice(0,1):(me(this,l,ke),ke<D(this,h).length&&D(this,h).splice(ke)),D(this,h).push(Fe)}undo(){D(this,l)!==-1&&(me(this,e,!0),D(this,h)[D(this,l)].undo(),me(this,e,!1),me(this,l,D(this,l)-1))}redo(){D(this,l)<D(this,h).length-1&&(me(this,l,D(this,l)+1),me(this,e,!0),D(this,h)[D(this,l)].cmd(),me(this,e,!1))}hasSomethingToUndo(){return D(this,l)!==-1}hasSomethingToRedo(){return D(this,l)<D(this,h).length-1}destroy(){me(this,h,null)}}h=new WeakMap,e=new WeakMap,i=new WeakMap,l=new WeakMap,n.CommandManager=b;const c=class{constructor(N){ae(this,v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const de=c.platform.isMac;for(const[be,Ae]of N)for(const Ee of be){const Te=Ee.startsWith("mac+");de&&Te?(this.callbacks.set(Ee.slice(4),Ae),this.allKeys.add(Ee.split("+").at(-1))):!de&&!Te&&(this.callbacks.set(Ee,Ae),this.allKeys.add(Ee.split("+").at(-1)))}}static get platform(){const N=typeof navigator<"u"?navigator.platform:"";return(0,t.shadow)(this,"platform",{isWin:N.includes("Win"),isMac:N.includes("Mac")})}exec(N,de){if(!this.allKeys.has(de.key))return;const be=this.callbacks.get(he(this,v,Tt).call(this,de));be&&(be.bind(N)(),de.stopPropagation(),de.preventDefault())}};let f=c;v=new WeakSet,Tt=function(N){N.altKey&&this.buffer.push("alt"),N.ctrlKey&&this.buffer.push("ctrl"),N.metaKey&&this.buffer.push("meta"),N.shiftKey&&this.buffer.push("shift"),this.buffer.push(N.key);const de=this.buffer.join("+");return this.buffer.length=0,de},n.KeyboardManager=f;class w{constructor(){ae(this,r,null)}copy(N){N&&(Array.isArray(N)?me(this,r,N.map(de=>de.serialize())):me(this,r,[N.serialize()]),me(this,r,D(this,r).filter(de=>!!de)),D(this,r).length===0&&me(this,r,null))}paste(){return D(this,r)}isEmpty(){return D(this,r)===null}destroy(){me(this,r,null)}}r=new WeakMap;const a=class{get _colors(){const N=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(N),(0,t.shadow)(this,"_colors",N)}convert(N){const de=(0,s.getRGB)(N);if(!window.matchMedia("(forced-colors: active)").matches)return de;for(const[be,Ae]of this._colors)if(Ae.every((Ee,Te)=>Ee===de[Te]))return a._colorsMapping.get(be);return de}getHexCode(N){const de=this._colors.get(N);return de?t.Util.makeHexColor(...de):N}};let L=a;Me(L,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),n.ColorManager=L;const ce=class{constructor(N,de){ae(this,u);ae(this,j);ae(this,W);ae(this,V);ae(this,p);ae(this,C);ae(this,q);ae(this,ue);ae(this,oe);ae(this,g,null);ae(this,k,new Map);ae(this,E,new Map);ae(this,m,new w);ae(this,O,new b);ae(this,ee,0);ae(this,ie,null);ae(this,Q,null);ae(this,K,new T);ae(this,G,!1);ae(this,$,t.AnnotationEditorType.NONE);ae(this,X,new Set);ae(this,ne,this.keydown.bind(this));ae(this,le,this.onEditingAction.bind(this));ae(this,_e,this.onPageChanging.bind(this));ae(this,B,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ae(this,d,null);me(this,d,N),me(this,Q,de),D(this,Q)._on("editingaction",D(this,le)),D(this,Q)._on("pagechanging",D(this,_e))}destroy(){he(this,j,lt).call(this),D(this,Q)._off("editingaction",D(this,le)),D(this,Q)._off("pagechanging",D(this,_e));for(const N of D(this,E).values())N.destroy();D(this,E).clear(),D(this,k).clear(),me(this,g,null),D(this,X).clear(),D(this,m).destroy(),D(this,O).destroy()}onPageChanging({pageNumber:N}){me(this,ee,N-1)}focusMainContainer(){D(this,d).focus()}keydown(N){var de;(de=this.getActive())!=null&&de.shouldGetKeyboardEvents()||ce._keyboardManager.exec(this,N)}onEditingAction(N){["undo","redo","cut","copy","paste","delete","selectAll"].includes(N.name)&&this[N.name]()}setEditingState(N){N?(he(this,u,Ct).call(this),he(this,W,Be).call(this,{isEditing:D(this,$)!==t.AnnotationEditorType.NONE,isEmpty:he(this,ue,Qe).call(this),hasSomethingToUndo:D(this,O).hasSomethingToUndo(),hasSomethingToRedo:D(this,O).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:D(this,m).isEmpty()})):(he(this,j,lt).call(this),he(this,W,Be).call(this,{isEditing:!1}))}registerEditorTypes(N){me(this,ie,N);for(const de of D(this,ie))he(this,V,Je).call(this,de.defaultPropertiesToUpdate)}getId(){return D(this,K).getId()}addLayer(N){D(this,E).set(N.pageIndex,N),D(this,G)?N.enable():N.disable()}removeLayer(N){D(this,E).delete(N.pageIndex)}updateMode(N){if(me(this,$,N),N===t.AnnotationEditorType.NONE)this.setEditingState(!1),he(this,C,wt).call(this);else{this.setEditingState(!0),he(this,p,xt).call(this);for(const de of D(this,E).values())de.updateMode(N)}}updateToolbar(N){N!==D(this,$)&&D(this,Q).dispatch("switchannotationeditormode",{source:this,mode:N})}updateParams(N,de){for(const be of D(this,X))be.updateParams(N,de);for(const be of D(this,ie))be.updateDefaultParams(N,de)}getEditors(N){const de=[];for(const be of D(this,k).values())be.pageIndex===N&&de.push(be);return de}getEditor(N){return D(this,k).get(N)}addEditor(N){D(this,k).set(N.id,N)}removeEditor(N){D(this,k).delete(N.id),this.unselect(N)}setActiveEditor(N){D(this,g)!==N&&(me(this,g,N),N&&he(this,V,Je).call(this,N.propertiesToUpdate))}toggleSelected(N){if(D(this,X).has(N)){D(this,X).delete(N),N.unselect(),he(this,W,Be).call(this,{hasSelectedEditor:this.hasSelection});return}D(this,X).add(N),N.select(),he(this,V,Je).call(this,N.propertiesToUpdate),he(this,W,Be).call(this,{hasSelectedEditor:!0})}setSelected(N){for(const de of D(this,X))de!==N&&de.unselect();D(this,X).clear(),D(this,X).add(N),N.select(),he(this,V,Je).call(this,N.propertiesToUpdate),he(this,W,Be).call(this,{hasSelectedEditor:!0})}isSelected(N){return D(this,X).has(N)}unselect(N){N.unselect(),D(this,X).delete(N),he(this,W,Be).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return D(this,X).size!==0}undo(){D(this,O).undo(),he(this,W,Be).call(this,{hasSomethingToUndo:D(this,O).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:he(this,ue,Qe).call(this)})}redo(){D(this,O).redo(),he(this,W,Be).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:D(this,O).hasSomethingToRedo(),isEmpty:he(this,ue,Qe).call(this)})}addCommands(N){D(this,O).add(N),he(this,W,Be).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:he(this,ue,Qe).call(this)})}delete(){if(D(this,g)&&D(this,g).commitOrRemove(),!this.hasSelection)return;const N=[...D(this,X)],de=()=>{for(const Ae of N)Ae.remove()},be=()=>{for(const Ae of N)he(this,q,ct).call(this,Ae)};this.addCommands({cmd:de,undo:be,mustExec:!0})}copy(){if(D(this,g)&&D(this,g).commitOrRemove(),this.hasSelection){const N=[];for(const de of D(this,X))de.isEmpty()||N.push(de);if(N.length===0)return;D(this,m).copy(N),he(this,W,Be).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(D(this,m).isEmpty())return;this.unselectAll();const N=D(this,E).get(D(this,ee)),de=D(this,m).paste().map(Ee=>N.deserialize(Ee)),be=()=>{for(const Ee of de)he(this,q,ct).call(this,Ee);he(this,oe,et).call(this,de)},Ae=()=>{for(const Ee of de)Ee.remove()};this.addCommands({cmd:be,undo:Ae,mustExec:!0})}selectAll(){for(const N of D(this,X))N.commit();he(this,oe,et).call(this,D(this,k).values())}unselectAll(){if(D(this,g)){D(this,g).commitOrRemove();return}if(he(this,oe,et).size!==0){for(const N of D(this,X))N.unselect();D(this,X).clear(),he(this,W,Be).call(this,{hasSelectedEditor:!1})}}isActive(N){return D(this,g)===N}getActive(){return D(this,g)}getMode(){return D(this,$)}};let x=ce;g=new WeakMap,k=new WeakMap,E=new WeakMap,m=new WeakMap,O=new WeakMap,ee=new WeakMap,ie=new WeakMap,Q=new WeakMap,K=new WeakMap,G=new WeakMap,$=new WeakMap,X=new WeakMap,ne=new WeakMap,le=new WeakMap,_e=new WeakMap,B=new WeakMap,d=new WeakMap,u=new WeakSet,Ct=function(){D(this,d).addEventListener("keydown",D(this,ne))},j=new WeakSet,lt=function(){D(this,d).removeEventListener("keydown",D(this,ne))},W=new WeakSet,Be=function(N){Object.entries(N).some(([be,Ae])=>D(this,B)[be]!==Ae)&&D(this,Q).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(D(this,B),N)})},V=new WeakSet,Je=function(N){D(this,Q).dispatch("annotationeditorparamschanged",{source:this,details:N})},p=new WeakSet,xt=function(){if(!D(this,G)){me(this,G,!0);for(const N of D(this,E).values())N.enable()}},C=new WeakSet,wt=function(){if(this.unselectAll(),D(this,G)){me(this,G,!1);for(const N of D(this,E).values())N.disable()}},q=new WeakSet,ct=function(N){const de=D(this,E).get(N.pageIndex);de?de.addOrRebuild(N):this.addEditor(N)},ue=new WeakSet,Qe=function(){if(D(this,k).size===0)return!0;if(D(this,k).size===1)for(const N of D(this,k).values())return N.isEmpty();return!1},oe=new WeakSet,et=function(N){D(this,X).clear();for(const de of N)de.isEmpty()||(D(this,X).add(de),de.select());he(this,W,Be).call(this,{hasSelectedEditor:!0})},Me(x,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],ce.prototype.selectAll],[["ctrl+c","mac+meta+c"],ce.prototype.copy],[["ctrl+v","mac+meta+v"],ce.prototype.paste],[["ctrl+x","mac+meta+x"],ce.prototype.cut],[["ctrl+z","mac+meta+z"],ce.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ce.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ce.prototype.delete],[["Escape","mac+Escape"],ce.prototype.unselectAll]])),n.AnnotationEditorUIManager=x},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=n.AnnotationPrefix=void 0,n.deprecated=a,n.getColorValues=O,n.getCurrentTransform=ee,n.getCurrentTransformInverse=ie,n.getFilenameFromUrl=l,n.getPdfFilenameFromUrl=v,n.getRGB=m,n.getXfaPageViewport=E,n.isDataScheme=e,n.isPdfFile=i,n.isValidFetchUrl=c,n.loadScript=r;var t=y(9),s=y(1);const F="http://www.w3.org/2000/svg",M="pdfjs_internal_id_";n.AnnotationPrefix=M;const Q=class{};let T=Q;Me(T,"CSS",96),Me(T,"PDF",72),Me(T,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF),n.PixelsPerInch=T;class b extends t.BaseCanvasFactory{constructor({ownerDocument:G=globalThis.document}={}){super(),this._document=G}_createCanvas(G,$){const X=this._document.createElement("canvas");return X.width=G,X.height=$,X}}n.DOMCanvasFactory=b;async function f(K,G=!1){if(c(K,document.baseURI)){const $=await fetch(K);if(!$.ok)throw new Error($.statusText);return G?new Uint8Array(await $.arrayBuffer()):(0,s.stringToBytes)(await $.text())}return new Promise(($,X)=>{const ne=new XMLHttpRequest;ne.open("GET",K,!0),G&&(ne.responseType="arraybuffer"),ne.onreadystatechange=()=>{if(ne.readyState===XMLHttpRequest.DONE){if(ne.status===200||ne.status===0){let le;if(G&&ne.response?le=new Uint8Array(ne.response):!G&&ne.responseText&&(le=(0,s.stringToBytes)(ne.responseText)),le){$(le);return}}X(new Error(ne.statusText))}},ne.send(null)})}class w extends t.BaseCMapReaderFactory{_fetchData(G,$){return f(G,this.isCompressed).then(X=>({cMapData:X,compressionType:$}))}}n.DOMCMapReaderFactory=w;class L extends t.BaseStandardFontDataFactory{_fetchData(G){return f(G,!0)}}n.DOMStandardFontDataFactory=L;class x extends t.BaseSVGFactory{_createSVG(G){return document.createElementNS(F,G)}}n.DOMSVGFactory=x;class P{constructor({viewBox:G,scale:$,rotation:X,offsetX:ne=0,offsetY:le=0,dontFlip:_e=!1}){this.viewBox=G,this.scale=$,this.rotation=X,this.offsetX=ne,this.offsetY=le;const B=(G[2]+G[0])/2,d=(G[3]+G[1])/2;let u,R,j,U;switch(X%=360,X<0&&(X+=360),X){case 180:u=-1,R=0,j=0,U=1;break;case 90:u=0,R=1,j=1,U=0;break;case 270:u=0,R=-1,j=-1,U=0;break;case 0:u=1,R=0,j=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_e&&(j=-j,U=-U);let W,Y,V,o;u===0?(W=Math.abs(d-G[1])*$+ne,Y=Math.abs(B-G[0])*$+le,V=Math.abs(G[3]-G[1])*$,o=Math.abs(G[2]-G[0])*$):(W=Math.abs(B-G[0])*$+ne,Y=Math.abs(d-G[1])*$+le,V=Math.abs(G[2]-G[0])*$,o=Math.abs(G[3]-G[1])*$),this.transform=[u*$,R*$,j*$,U*$,W-u*$*B-j*$*d,Y-R*$*B-U*$*d],this.width=V,this.height=o}clone({scale:G=this.scale,rotation:$=this.rotation,offsetX:X=this.offsetX,offsetY:ne=this.offsetY,dontFlip:le=!1}={}){return new P({viewBox:this.viewBox.slice(),scale:G,rotation:$,offsetX:X,offsetY:ne,dontFlip:le})}convertToViewportPoint(G,$){return s.Util.applyTransform([G,$],this.transform)}convertToViewportRectangle(G){const $=s.Util.applyTransform([G[0],G[1]],this.transform),X=s.Util.applyTransform([G[2],G[3]],this.transform);return[$[0],$[1],X[0],X[1]]}convertToPdfPoint(G,$){return s.Util.applyInverseTransform([G,$],this.transform)}}n.PageViewport=P;class h extends s.BaseException{constructor(G,$){super(G,"RenderingCancelledException"),this.type=$}}n.RenderingCancelledException=h;function e(K){const G=K.length;let $=0;for(;$<G&&K[$].trim()==="";)$++;return K.substring($,$+5).toLowerCase()==="data:"}function i(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function l(K){const G=K.indexOf("#"),$=K.indexOf("?"),X=Math.min(G>0?G:K.length,$>0?$:K.length);return K.substring(K.lastIndexOf("/",X)+1,X)}function v(K,G="document.pdf"){if(typeof K!="string")return G;if(e(K))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,X=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ne=$.exec(K);let le=X.exec(ne[1])||X.exec(ne[2])||X.exec(ne[3]);if(le&&(le=le[0],le.includes("%")))try{le=X.exec(decodeURIComponent(le))[0]}catch{}return le||G}class A{constructor(){this.started=Object.create(null),this.times=[]}time(G){G in this.started&&(0,s.warn)(`Timer is already running for ${G}`),this.started[G]=Date.now()}timeEnd(G){G in this.started||(0,s.warn)(`Timer has not been started for ${G}`),this.times.push({name:G,start:this.started[G],end:Date.now()}),delete this.started[G]}toString(){const G=[];let $=0;for(const X of this.times){const ne=X.name;ne.length>$&&($=ne.length)}for(const X of this.times){const ne=X.end-X.start;G.push(`${X.name.padEnd($)} ${ne}ms
`)}return G.join("")}}n.StatTimer=A;function c(K,G){try{const{protocol:$}=G?new URL(K,G):new URL(K);return $==="http:"||$==="https:"}catch{return!1}}function r(K,G=!1){return new Promise(($,X)=>{const ne=document.createElement("script");ne.src=K,ne.onload=function(le){G&&ne.remove(),$(le)},ne.onerror=function(){X(new Error(`Cannot load script at: ${ne.src}`))},(document.head||document.documentElement).append(ne)})}function a(K){console.log("Deprecated API usage: "+K)}let g;class k{static toDateObject(G){if(!G||typeof G!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=g.exec(G);if(!$)return null;const X=parseInt($[1],10);let ne=parseInt($[2],10);ne=ne>=1&&ne<=12?ne-1:0;let le=parseInt($[3],10);le=le>=1&&le<=31?le:1;let _e=parseInt($[4],10);_e=_e>=0&&_e<=23?_e:0;let B=parseInt($[5],10);B=B>=0&&B<=59?B:0;let d=parseInt($[6],10);d=d>=0&&d<=59?d:0;const u=$[7]||"Z";let R=parseInt($[8],10);R=R>=0&&R<=23?R:0;let j=parseInt($[9],10)||0;return j=j>=0&&j<=59?j:0,u==="-"?(_e+=R,B+=j):u==="+"&&(_e-=R,B-=j),new Date(Date.UTC(X,ne,le,_e,B,d))}}n.PDFDateString=k;function E(K,{scale:G=1,rotation:$=0}){const{width:X,height:ne}=K.attributes.style,le=[0,0,parseInt(X),parseInt(ne)];return new P({viewBox:le,scale:G,rotation:$})}function m(K){if(K.startsWith("#")){const G=parseInt(K.slice(1),16);return[(G&16711680)>>16,(G&65280)>>8,G&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(G=>parseInt(G)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,s.warn)(`Not a valid color format: "${K}"`),[0,0,0])}function O(K){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const $ of K.keys()){G.style.color=$;const X=window.getComputedStyle(G).color;K.set($,m(X))}G.remove()}function ee(K){const{a:G,b:$,c:X,d:ne,e:le,f:_e}=K.getTransform();return[G,$,X,ne,le,_e]}function ie(K){const{a:G,b:$,c:X,d:ne,e:le,f:_e}=K.getTransform().invertSelf();return[G,$,X,ne,le,_e]}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var t=y(1);class s{constructor(){this.constructor===s&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,w){if(f<=0||w<=0)throw new Error("Invalid canvas size");const L=this._createCanvas(f,w);return{canvas:L,context:L.getContext("2d")}}reset(f,w,L){if(!f.canvas)throw new Error("Canvas is not specified");if(w<=0||L<=0)throw new Error("Invalid canvas size");f.canvas.width=w,f.canvas.height=L}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,w){(0,t.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=s;class F{constructor({baseUrl:f=null,isCompressed:w=!1}){this.constructor===F&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=w}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const w=this.baseUrl+f+(this.isCompressed?".bcmap":""),L=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return this._fetchData(w,L).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(f,w){(0,t.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=F;class M{constructor({baseUrl:f=null}){this.constructor===M&&(0,t.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${f}`;return this._fetchData(w).catch(L=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(f){(0,t.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=M;class T{constructor(){this.constructor===T&&(0,t.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,w,L=!1){if(f<=0||w<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),L||(x.setAttribute("width",`${f}px`),x.setAttribute("height",`${w}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${f} ${w}`),x}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,t.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=T},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var t=y(1);const s=3285377520,F=4294901760,M=65535;class T{constructor(f){this.h1=f?f&4294967295:s,this.h2=f?f&4294967295:s}update(f){let w,L;if(typeof f=="string"){w=new Uint8Array(f.length*2),L=0;for(let g=0,k=f.length;g<k;g++){const E=f.charCodeAt(g);E<=255?w[L++]=E:(w[L++]=E>>>8,w[L++]=E&255)}}else if((0,t.isArrayBuffer)(f))w=f.slice(),L=w.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=L>>2,P=L-x*4,h=new Uint32Array(w.buffer,0,x);let e=0,i=0,l=this.h1,v=this.h2;const A=3432918353,c=461845907,r=A&M,a=c&M;for(let g=0;g<x;g++)g&1?(e=h[g],e=e*A&F|e*r&M,e=e<<15|e>>>17,e=e*c&F|e*a&M,l^=e,l=l<<13|l>>>19,l=l*5+3864292196):(i=h[g],i=i*A&F|i*r&M,i=i<<15|i>>>17,i=i*c&F|i*a&M,v^=i,v=v<<13|v>>>19,v=v*5+3864292196);switch(e=0,P){case 3:e^=w[x*4+2]<<16;case 2:e^=w[x*4+1]<<8;case 1:e^=w[x*4],e=e*A&F|e*r&M,e=e<<15|e>>>17,e=e*c&F|e*a&M,x&1?l^=e:v^=e}this.h1=l,this.h2=v}hexdigest(){let f=this.h1,w=this.h2;f^=w>>>1,f=f*3981806797&F|f*36045&M,w=w*4283543511&F|((w<<16|f>>>16)*2950163797&F)>>>16,f^=w>>>1,f=f*444984403&F|f*60499&M,w=w*3301882366&F|((w<<16|f>>>16)*3120437893&F)>>>16,f^=w>>>1;const L=(f>>>0).toString(16),x=(w>>>0).toString(16);return L.padStart(8,"0")+x.padStart(8,"0")}}n.MurmurHash3_64=T},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var t=y(1);class s{constructor({docId:b,onUnsupportedFeature:f,ownerDocument:w=globalThis.document,styleElement:L=null}){this.constructor===s&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=f,this._document=w,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let f=this.styleElement;f||(f=this.styleElement=this._document.createElement("style"),f.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(f));const w=f.sheet;w.insertRule(b,w.cssRules.length)}clear(){for(const b of this.nativeFontFaces)this._document.fonts.delete(b);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const w=b.createNativeFontFace();if(w){this.addNativeFontFace(w);try{await w.loaded}catch(L){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${w.family}': '${L}'.`),b.disableFontFace=!0,L}}return}const f=b.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(w=>{const L=this._queueLoadingCallback(w);this._prepareFontLoadEvent([f],[b],L)})}}_queueLoadingCallback(b){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var f;const b=!!((f=this._document)!=null&&f.fonts);return(0,t.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,f,w){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;n.FontLoader=F,n.FontLoader=F=class extends s{constructor(b){super(b),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator>"u")b=!0;else{const f=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(f==null?void 0:f[1])>=14&&(b=!0)}return(0,t.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function f(){for((0,t.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;w.requests.length>0&&w.requests[0].done;){const x=w.requests.shift();setTimeout(x.callback,0)}}const w=this.loadingContext,L={id:`pdfjs-font-loading-${w.nextRequestId++}`,done:!1,complete:f,callback:b};return w.requests.push(L),L}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,f,w){function L(ie,Q){return ie.charCodeAt(Q)<<24|ie.charCodeAt(Q+1)<<16|ie.charCodeAt(Q+2)<<8|ie.charCodeAt(Q+3)&255}function x(ie,Q,K,G){const $=ie.substring(0,Q),X=ie.substring(Q+K);return $+G+X}let P,h;const e=this._document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d");let l=0;function v(ie,Q){if(l++,l>30){(0,t.warn)("Load test font never loaded."),Q();return}if(i.font="30px "+ie,i.fillText(".",0,20),i.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(v.bind(null,ie,Q))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=x(c,976,A.length,A);const a=16,g=1482184792;let k=L(c,a);for(P=0,h=A.length-3;P<h;P+=4)k=k-g+L(A,P)|0;P<A.length&&(k=k-g+L(A+"XXX",P)|0),c=x(c,a,4,(0,t.string32)(k));const E=`url(data:font/opentype;base64,${btoa(c)});`,m=`@font-face {font-family:"${A}";src:${E}}`;this.insertRule(m);const O=[];for(const ie of f)O.push(ie.loadedName);O.push(A);const ee=this._document.createElement("div");ee.style.visibility="hidden",ee.style.width=ee.style.height="10px",ee.style.position="absolute",ee.style.top=ee.style.left="0px";for(const ie of O){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=ie,ee.append(Q)}this._document.body.append(ee),v(A,()=>{ee.remove(),w.complete()})}};class M{constructor(b,{isEvalSupported:f=!0,disableFontFace:w=!1,ignoreErrors:L=!1,onUnsupportedFeature:x,fontRegistry:P=null}){this.compiledGlyphs=Object.create(null);for(const h in b)this[h]=b[h];this.isEvalSupported=f!==!1,this.disableFontFace=w===!0,this.ignoreErrors=L===!0,this._onUnsupportedFeature=x,this.fontRegistry=P}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let b;if(!this.cssFontInfo)b=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),b=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,t.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(b)});`;let w;if(!this.cssFontInfo)w=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let L=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(L+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${L}src:${f}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,f),w}getPathGenerator(b,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let w;try{w=b.get(this.loadedName+"_path_"+f)}catch(L){if(!this.ignoreErrors)throw L;return this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[f]=function(x,P){}}if(this.isEvalSupported&&t.FeatureTest.isEvalSupported){const L=[];for(const x of w){const P=x.args!==void 0?x.args.join(","):"";L.push("c.",x.cmd,"(",P,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",L.join(""))}return this.compiledGlyphs[f]=function(L,x){for(const P of w)P.cmd==="scale"&&(P.args=[x,-x]),L[P.cmd].apply(L,P.args)}}}n.FontFaceObject=M},(S,n,y)=>{var ne,ht;Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var t=y(8),s=y(1),F=y(13),M=y(14),T=y(3);const b=16,f=100,w=4096,L=15,x=10,P=T.isNodeJS&&typeof Path2D>"u"?-1:1e3,h=16;function e(B,d){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){d.save(),this.__originalSave()},B.restore=function(){d.restore(),this.__originalRestore()},B.translate=function(R,j){d.translate(R,j),this.__originalTranslate(R,j)},B.scale=function(R,j){d.scale(R,j),this.__originalScale(R,j)},B.transform=function(R,j,U,W,Y,V){d.transform(R,j,U,W,Y,V),this.__originalTransform(R,j,U,W,Y,V)},B.setTransform=function(R,j,U,W,Y,V){d.setTransform(R,j,U,W,Y,V),this.__originalSetTransform(R,j,U,W,Y,V)},B.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},B.rotate=function(R){d.rotate(R),this.__originalRotate(R)},B.clip=function(R){d.clip(R),this.__originalClip(R)},B.moveTo=function(u,R){d.moveTo(u,R),this.__originalMoveTo(u,R)},B.lineTo=function(u,R){d.lineTo(u,R),this.__originalLineTo(u,R)},B.bezierCurveTo=function(u,R,j,U,W,Y){d.bezierCurveTo(u,R,j,U,W,Y),this.__originalBezierCurveTo(u,R,j,U,W,Y)},B.rect=function(u,R,j,U){d.rect(u,R,j,U),this.__originalRect(u,R,j,U)},B.closePath=function(){d.closePath(),this.__originalClosePath()},B.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class i{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,u,R){let j;return this.cache[d]!==void 0?(j=this.cache[d],this.canvasFactory.reset(j,u,R)):(j=this.canvasFactory.create(u,R),this.cache[d]=j),j}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const u=this.cache[d];this.canvasFactory.destroy(u),delete this.cache[d]}}}function l(B,d,u,R,j,U,W,Y,V,o){const[p,_,C,I,q,re]=(0,t.getCurrentTransform)(B);if(_===0&&C===0){const oe=W*p+q,te=Math.round(oe),ce=Y*I+re,fe=Math.round(ce),N=(W+V)*p+q,de=Math.abs(Math.round(N)-te)||1,be=(Y+o)*I+re,Ae=Math.abs(Math.round(be)-fe)||1;return B.setTransform(Math.sign(p),0,0,Math.sign(I),te,fe),B.drawImage(d,u,R,j,U,0,0,de,Ae),B.setTransform(p,_,C,I,q,re),[de,Ae]}if(p===0&&I===0){const oe=Y*C+q,te=Math.round(oe),ce=W*_+re,fe=Math.round(ce),N=(Y+o)*C+q,de=Math.abs(Math.round(N)-te)||1,be=(W+V)*_+re,Ae=Math.abs(Math.round(be)-fe)||1;return B.setTransform(0,Math.sign(_),Math.sign(C),0,te,fe),B.drawImage(d,u,R,j,U,0,0,Ae,de),B.setTransform(p,_,C,I,q,re),[Ae,de]}B.drawImage(d,u,R,j,U,W,Y,V,o);const ue=Math.hypot(p,_),Z=Math.hypot(C,I);return[ue*V,Z*o]}function v(B){const{width:d,height:u}=B;if(d>P||u>P)return null;const R=1e3,j=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=d+1;let W=new Uint8Array(U*(u+1)),Y,V,o;const p=d+7&-8;let _=new Uint8Array(p*u),C=0;for(const Z of B.data){let oe=128;for(;oe>0;)_[C++]=Z&oe?0:255,oe>>=1}let I=0;for(C=0,_[C]!==0&&(W[0]=1,++I),V=1;V<d;V++)_[C]!==_[C+1]&&(W[V]=_[C]?2:1,++I),C++;for(_[C]!==0&&(W[V]=2,++I),Y=1;Y<u;Y++){C=Y*p,o=Y*U,_[C-p]!==_[C]&&(W[o]=_[C]?1:8,++I);let Z=(_[C]?4:0)+(_[C-p]?8:0);for(V=1;V<d;V++)Z=(Z>>2)+(_[C+1]?4:0)+(_[C-p+1]?8:0),j[Z]&&(W[o+V]=j[Z],++I),C++;if(_[C-p]!==_[C]&&(W[o+V]=_[C]?2:4,++I),I>R)return null}for(C=p*(u-1),o=Y*U,_[C]!==0&&(W[o]=8,++I),V=1;V<d;V++)_[C]!==_[C+1]&&(W[o+V]=_[C]?4:8,++I),C++;if(_[C]!==0&&(W[o+V]=4,++I),I>R)return null;const q=new Int32Array([0,U,-1,0,-U,0,0,0,1]),re=new Path2D;for(Y=0;I&&Y<=u;Y++){let Z=Y*U;const oe=Z+d;for(;Z<oe&&!W[Z];)Z++;if(Z===oe)continue;re.moveTo(Z%U,Y);const te=Z;let ce=W[Z];do{const fe=q[ce];do Z+=fe;while(!W[Z]);const N=W[Z];N!==5&&N!==10?(ce=N,W[Z]=0):(ce=N&51*ce>>4,W[Z]&=ce>>2|ce<<2),re.lineTo(Z%U,Z/U|0),W[Z]||--I}while(te!==Z);--Y}return _=null,W=null,function(Z){Z.save(),Z.scale(1/d,-1/u),Z.translate(0,-u),Z.fill(re),Z.beginPath(),Z.restore()}}class A{constructor(d,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,d,u])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,u){this.x=d,this.y=u}updatePathMinMax(d,u,R){[u,R]=s.Util.applyTransform([u,R],d),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,R),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,R)}updateRectMinMax(d,u){const R=s.Util.applyTransform(u,d),j=s.Util.applyTransform(u.slice(2),d);this.minX=Math.min(this.minX,R[0],j[0]),this.minY=Math.min(this.minY,R[1],j[1]),this.maxX=Math.max(this.maxX,R[0],j[0]),this.maxY=Math.max(this.maxY,R[1],j[1])}updateScalingPathMinMax(d,u){s.Util.scaleMinMax(d,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(d,u,R,j,U,W,Y,V,o,p){const _=s.Util.bezierBoundingBox(u,R,j,U,W,Y,V,o);if(p){p[0]=Math.min(p[0],_[0],_[2]),p[1]=Math.max(p[1],_[0],_[2]),p[2]=Math.min(p[2],_[1],_[3]),p[3]=Math.max(p[3],_[1],_[3]);return}this.updateRectMinMax(d,_)}getPathBoundingBox(d=F.PathType.FILL,u=null){const R=[this.minX,this.minY,this.maxX,this.maxY];if(d===F.PathType.STROKE){u||(0,s.unreachable)("Stroke bounding box must include transform.");const j=s.Util.singularValueDecompose2dScale(u),U=j[0]*this.lineWidth/2,W=j[1]*this.lineWidth/2;R[0]-=U,R[1]-=W,R[2]+=U,R[3]+=W}return R}updateClipFromPath(){const d=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=F.PathType.FILL,u=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(d,u))}}function c(B,d,u=null){if(typeof ImageData<"u"&&d instanceof ImageData){B.putImageData(d,0,0);return}const R=d.height,j=d.width,U=R%h,W=(R-U)/h,Y=U===0?W:W+1,V=B.createImageData(j,h);let o=0,p;const _=d.data,C=V.data;let I,q,re,ue,Z,oe,te,ce;if(u)switch(u.length){case 1:Z=u[0],oe=u[0],te=u[0],ce=u[0];break;case 4:Z=u[0],oe=u[1],te=u[2],ce=u[3];break}if(d.kind===s.ImageKind.GRAYSCALE_1BPP){const fe=_.byteLength,N=new Uint32Array(C.buffer,0,C.byteLength>>2),de=N.length,be=j+7>>3;let Ae=4294967295,Ee=s.FeatureTest.isLittleEndian?4278190080:255;for(ce&&ce[0]===255&&ce[255]===0&&([Ae,Ee]=[Ee,Ae]),I=0;I<Y;I++){for(re=I<W?h:U,p=0,q=0;q<re;q++){const Te=fe-o;let Fe=0;const ke=Te>be?j:Te*8-7,ze=ke&-8;let Ce=0,Oe=0;for(;Fe<ze;Fe+=8)Oe=_[o++],N[p++]=Oe&128?Ae:Ee,N[p++]=Oe&64?Ae:Ee,N[p++]=Oe&32?Ae:Ee,N[p++]=Oe&16?Ae:Ee,N[p++]=Oe&8?Ae:Ee,N[p++]=Oe&4?Ae:Ee,N[p++]=Oe&2?Ae:Ee,N[p++]=Oe&1?Ae:Ee;for(;Fe<ke;Fe++)Ce===0&&(Oe=_[o++],Ce=128),N[p++]=Oe&Ce?Ae:Ee,Ce>>=1}for(;p<de;)N[p++]=0;B.putImageData(V,0,I*h)}}else if(d.kind===s.ImageKind.RGBA_32BPP){const fe=!!(Z||oe||te);for(q=0,ue=j*h*4,I=0;I<W;I++){if(C.set(_.subarray(o,o+ue)),o+=ue,fe)for(let N=0;N<ue;N+=4)Z&&(C[N+0]=Z[C[N+0]]),oe&&(C[N+1]=oe[C[N+1]]),te&&(C[N+2]=te[C[N+2]]);B.putImageData(V,0,q),q+=h}if(I<Y){if(ue=j*U*4,C.set(_.subarray(o,o+ue)),fe)for(let N=0;N<ue;N+=4)Z&&(C[N+0]=Z[C[N+0]]),oe&&(C[N+1]=oe[C[N+1]]),te&&(C[N+2]=te[C[N+2]]);B.putImageData(V,0,q)}}else if(d.kind===s.ImageKind.RGB_24BPP){const fe=!!(Z||oe||te);for(re=h,ue=j*re,I=0;I<Y;I++){for(I>=W&&(re=U,ue=j*re),p=0,q=ue;q--;)C[p++]=_[o++],C[p++]=_[o++],C[p++]=_[o++],C[p++]=255;if(fe)for(let N=0;N<p;N+=4)Z&&(C[N+0]=Z[C[N+0]]),oe&&(C[N+1]=oe[C[N+1]]),te&&(C[N+2]=te[C[N+2]]);B.putImageData(V,0,I*h)}}else throw new Error(`bad image kind: ${d.kind}`)}function r(B,d){if(d.bitmap){B.drawImage(d.bitmap,0,0);return}const u=d.height,R=d.width,j=u%h,U=(u-j)/h,W=j===0?U:U+1,Y=B.createImageData(R,h);let V=0;const o=d.data,p=Y.data;for(let _=0;_<W;_++){const C=_<U?h:j;({srcPos:V}=(0,M.applyMaskImageData)({src:o,srcPos:V,dest:p,width:R,height:C})),B.putImageData(Y,0,_*h)}}function a(B,d){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let R=0,j=u.length;R<j;R++){const U=u[R];B[U]!==void 0&&(d[U]=B[U])}B.setLineDash!==void 0&&(d.setLineDash(B.getLineDash()),d.lineDashOffset=B.lineDashOffset)}function g(B,d){B.strokeStyle=B.fillStyle=d||"#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0)}function k(B,d,u,R){const j=B.length;for(let U=3;U<j;U+=4){const W=B[U];if(W===0)B[U-3]=d,B[U-2]=u,B[U-1]=R;else if(W<255){const Y=255-W;B[U-3]=B[U-3]*W+d*Y>>8,B[U-2]=B[U-2]*W+u*Y>>8,B[U-1]=B[U-1]*W+R*Y>>8}}}function E(B,d,u){const R=B.length,j=1/255;for(let U=3;U<R;U+=4){const W=u?u[B[U]]:B[U];d[U]=d[U]*W*j|0}}function m(B,d,u){const R=B.length;for(let j=3;j<R;j+=4){const U=B[j-3]*77+B[j-2]*152+B[j-1]*28;d[j]=u?d[j]*u[U>>8]>>8:d[j]*U>>16}}function O(B,d,u,R,j,U,W,Y,V,o,p){const _=!!U,C=_?U[0]:0,I=_?U[1]:0,q=_?U[2]:0;let re;j==="Luminosity"?re=m:re=E;const Z=Math.min(R,Math.ceil(1048576/u));for(let oe=0;oe<R;oe+=Z){const te=Math.min(Z,R-oe),ce=B.getImageData(Y-o,oe+(V-p),u,te),fe=d.getImageData(Y,oe+V,u,te);_&&k(ce.data,C,I,q),re(ce.data,fe.data,W),d.putImageData(fe,Y,oe+V)}}function ee(B,d,u,R){const j=R[0],U=R[1],W=R[2]-j,Y=R[3]-U;W===0||Y===0||(O(d.context,u,W,Y,d.subtype,d.backdrop,d.transferMap,j,U,d.offsetX,d.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(u.canvas,0,0),B.restore())}function ie(B,d){const u=s.Util.singularValueDecompose2dScale(B);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const R=Math.fround((globalThis.devicePixelRatio||1)*t.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:u[0]<=R||u[1]<=R}const Q=["butt","round","square"],K=["miter","round","bevel"],G={},$={},_e=class{constructor(d,u,R,j,U,W,Y,V){ae(this,ne);this.ctx=d,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=R,this.canvasFactory=j,this.imageLayer=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=W,this.cachedCanvases=new i(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(V==null?void 0:V.background)||null,this.foregroundColor=(V==null?void 0:V.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,u=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):u}beginDrawing({transform:d,viewport:u,transparency:R=!1,background:j=null}){const U=this.ctx.canvas.width,W=this.ctx.canvas.height,Y=j||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const V=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const o=this.backgroundColor=this.ctx.fillStyle;let p=!0,_=Y;if(this.ctx.fillStyle=Y,_=this.ctx.fillStyle,p=typeof _=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_),V==="#000000"&&o==="#ffffff"||V===o||!p)this.foregroundColor=this.backgroundColor=null;else{const[C,I,q]=(0,t.getRGB)(_),re=Z=>(Z/=255,Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4),ue=Math.round(.2126*re(C)+.7152*re(I)+.0722*re(q));this.selectColor=(Z,oe,te)=>{const ce=.2126*re(Z)+.7152*re(oe)+.0722*re(te);return Math.round(ce)===ue?o:V}}}if(this.ctx.fillStyle=this.backgroundColor||Y,this.ctx.fillRect(0,0,U,W),this.ctx.restore(),R){const V=this.cachedCanvases.getCanvas("transparent",U,W);this.compositeCtx=this.ctx,this.transparentCanvas=V.canvas,this.ctx=V.context,this.ctx.save(),this.ctx.transform(...(0,t.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx,this.foregroundColor),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...u.transform),this.viewportScale=u.scale,this.baseTransform=(0,t.getCurrentTransform)(this.ctx),this.imageLayer&&((0,t.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(d,u,R,j){const U=d.argsArray,W=d.fnArray;let Y=u||0;const V=U.length;if(V===Y)return Y;const o=V-Y>x&&typeof R=="function",p=o?Date.now()+L:0;let _=0;const C=this.commonObjs,I=this.objs;let q;for(;;){if(j!==void 0&&Y===j.nextBreakPoint)return j.breakIt(Y,R),Y;if(q=W[Y],q!==s.OPS.dependency)this[q].apply(this,U[Y]);else for(const re of U[Y]){const ue=re.startsWith("g_")?C:I;if(!ue.has(re))return ue.get(re,R),Y}if(Y++,Y===V)return Y;if(o&&++_>x){if(Date.now()>p)return R(),Y;_=0}}}endDrawing(){he(this,ne,ht).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const u of d.values())typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);d.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(d,u){const R=d.width,j=d.height;let U=Math.max(Math.hypot(u[0],u[1]),1),W=Math.max(Math.hypot(u[2],u[3]),1),Y=R,V=j,o="prescale1",p,_;for(;U>2&&Y>1||W>2&&V>1;){let C=Y,I=V;U>2&&Y>1&&(C=Math.ceil(Y/2),U/=Y/C),W>2&&V>1&&(I=Math.ceil(V/2),W/=V/I),p=this.cachedCanvases.getCanvas(o,C,I),_=p.context,_.clearRect(0,0,C,I),_.drawImage(d,0,0,Y,V,0,0,C,I),d=p.canvas,Y=C,V=I,o=o==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:Y,paintHeight:V}}_createMaskCanvas(d){const u=this.ctx,{width:R,height:j}=d,U=this.current.fillColor,W=this.current.patternFill,Y=(0,t.getCurrentTransform)(u);let V,o,p,_;if((d.bitmap||d.data)&&d.count>1){const de=d.bitmap||d.data.buffer,be=Y.slice(0,4);o=JSON.stringify(W?be:[be,U]),V=this._cachedBitmapsMap.get(de),V||(V=new Map,this._cachedBitmapsMap.set(de,V));const Ae=V.get(o);if(Ae&&!W){const Ee=Math.round(Math.min(Y[0],Y[2])+Y[4]),Te=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:Ae,offsetX:Ee,offsetY:Te}}p=Ae}p||(_=this.cachedCanvases.getCanvas("maskCanvas",R,j),r(_.context,d));let C=s.Util.transform(Y,[1/R,0,0,-1/j,0,0]);C=s.Util.transform(C,[1,0,0,1,0,-j]);const I=s.Util.applyTransform([0,0],C),q=s.Util.applyTransform([R,j],C),re=s.Util.normalizeRect([I[0],I[1],q[0],q[1]]),ue=Math.round(re[2]-re[0])||1,Z=Math.round(re[3]-re[1])||1,oe=this.cachedCanvases.getCanvas("fillCanvas",ue,Z),te=oe.context,ce=Math.min(I[0],q[0]),fe=Math.min(I[1],q[1]);te.translate(-ce,-fe),te.transform(...C),p||(p=this._scaleImage(_.canvas,(0,t.getCurrentTransformInverse)(te)),p=p.img,V&&W&&V.set(o,p)),te.imageSmoothingEnabled=ie((0,t.getCurrentTransform)(te),d.interpolate),l(te,p,0,0,p.width,p.height,0,0,R,j),te.globalCompositeOperation="source-in";const N=s.Util.transform((0,t.getCurrentTransformInverse)(te),[1,0,0,1,-ce,-fe]);return te.fillStyle=W?U.getPattern(u,this,N,F.PathType.FILL):U,te.fillRect(0,0,R,j),V&&!W&&(this.cachedCanvases.delete("fillCanvas"),V.set(o,oe.canvas)),{canvas:oe.canvas,offsetX:Math.round(ce),offsetY:Math.round(fe)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=Q[d]}setLineJoin(d){this.ctx.lineJoin=K[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,u){const R=this.ctx;R.setLineDash!==void 0&&(R.setLineDash(d),R.lineDashOffset=u)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(let u=0,R=d.length;u<R;u++){const j=d[u],U=j[0],W=j[1];switch(U){case"LW":this.setLineWidth(W);break;case"LC":this.setLineCap(W);break;case"LJ":this.setLineJoin(W);break;case"ML":this.setMiterLimit(W);break;case"D":this.setDash(W[0],W[1]);break;case"RI":this.setRenderingIntent(W);break;case"FL":this.setFlatness(W);break;case"Font":this.setFont(W[0],W[1]);break;case"CA":this.current.strokeAlpha=j[1];break;case"ca":this.current.fillAlpha=j[1],this.ctx.globalAlpha=j[1];break;case"BM":this.ctx.globalCompositeOperation=W;break;case"SMask":this.current.activeSMask=W?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=W}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,u=this.ctx.canvas.height,R="smaskGroupAt"+this.groupLevel,j=this.cachedCanvases.getCanvas(R,d,u);this.suspendedCtx=this.ctx,this.ctx=j.context;const U=this.ctx;U.setTransform(...(0,t.getCurrentTransform)(this.suspendedCtx)),a(this.suspendedCtx,U),e(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),a(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const u=this.current.activeSMask,R=this.suspendedCtx;ee(R,u,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(a(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),a(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(d,u,R,j,U,W){this.ctx.transform(d,u,R,j,U,W),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(d,u,R){const j=this.ctx,U=this.current;let W=U.x,Y=U.y,V,o;const p=(0,t.getCurrentTransform)(j),_=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,C=_?R.slice(0):null;for(let I=0,q=0,re=d.length;I<re;I++)switch(d[I]|0){case s.OPS.rectangle:W=u[q++],Y=u[q++];const ue=u[q++],Z=u[q++],oe=W+ue,te=Y+Z;j.moveTo(W,Y),ue===0||Z===0?j.lineTo(oe,te):(j.lineTo(oe,Y),j.lineTo(oe,te),j.lineTo(W,te)),_||U.updateRectMinMax(p,[W,Y,oe,te]),j.closePath();break;case s.OPS.moveTo:W=u[q++],Y=u[q++],j.moveTo(W,Y),_||U.updatePathMinMax(p,W,Y);break;case s.OPS.lineTo:W=u[q++],Y=u[q++],j.lineTo(W,Y),_||U.updatePathMinMax(p,W,Y);break;case s.OPS.curveTo:V=W,o=Y,W=u[q+4],Y=u[q+5],j.bezierCurveTo(u[q],u[q+1],u[q+2],u[q+3],W,Y),U.updateCurvePathMinMax(p,V,o,u[q],u[q+1],u[q+2],u[q+3],W,Y,C),q+=6;break;case s.OPS.curveTo2:V=W,o=Y,j.bezierCurveTo(W,Y,u[q],u[q+1],u[q+2],u[q+3]),U.updateCurvePathMinMax(p,V,o,W,Y,u[q],u[q+1],u[q+2],u[q+3],C),W=u[q+2],Y=u[q+3],q+=4;break;case s.OPS.curveTo3:V=W,o=Y,W=u[q+2],Y=u[q+3],j.bezierCurveTo(u[q],u[q+1],W,Y,W,Y),U.updateCurvePathMinMax(p,V,o,u[q],u[q+1],W,Y,W,Y,C),q+=4;break;case s.OPS.closePath:j.closePath();break}_&&U.updateScalingPathMinMax(p,C),U.setCurrentPoint(W,Y)}closePath(){this.ctx.closePath()}stroke(d){d=typeof d<"u"?d:!0;const u=this.ctx,R=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof R=="object"&&(R!=null&&R.getPattern)?(u.save(),u.strokeStyle=R.getPattern(u,this,(0,t.getCurrentTransformInverse)(u),F.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d){d=typeof d<"u"?d:!0;const u=this.ctx,R=this.current.fillColor,j=this.current.patternFill;let U=!1;j&&(u.save(),u.fillStyle=R.getPattern(u,this,(0,t.getCurrentTransformInverse)(u),F.PathType.FILL),U=!0);const W=this.current.getClippedPathBoundingBox();this.contentVisible&&W!==null&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),U&&u.restore(),d&&this.consumePath(W)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,u=this.ctx;if(d===void 0){u.beginPath();return}u.save(),u.beginPath();for(const R of d)u.setTransform(...R.transform),u.translate(R.x,R.y),R.addToPath(u,R.fontSize);u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,u){const R=this.commonObjs.get(d),j=this.current;if(!R)throw new Error(`Can't find font for ${d}`);if(j.fontMatrix=R.fontMatrix||s.FONT_IDENTITY_MATRIX,(j.fontMatrix[0]===0||j.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+d),u<0?(u=-u,j.fontDirection=-1):j.fontDirection=1,this.current.font=R,this.current.fontSize=u,R.isType3Font)return;const U=R.loadedName||"sans-serif";let W="normal";R.black?W="900":R.bold&&(W="bold");const Y=R.italic?"italic":"normal",V=`"${U}", ${R.fallbackName}`;let o=u;u<b?o=b:u>f&&(o=f),this.current.fontSizeScale=u/o,this.ctx.font=`${Y} ${W} ${o}px ${V}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,u){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=u}setLeadingMoveText(d,u){this.setLeading(-u),this.moveText(d,u)}setTextMatrix(d,u,R,j,U,W){this.current.textMatrix=[d,u,R,j,U,W],this.current.textMatrixScale=Math.hypot(d,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,u,R,j){const U=this.ctx,W=this.current,Y=W.font,V=W.textRenderingMode,o=W.fontSize/W.fontSizeScale,p=V&s.TextRenderingMode.FILL_STROKE_MASK,_=!!(V&s.TextRenderingMode.ADD_TO_PATH_FLAG),C=W.patternFill&&!Y.missingFile;let I;(Y.disableFontFace||_||C)&&(I=Y.getPathGenerator(this.commonObjs,d)),Y.disableFontFace||C?(U.save(),U.translate(u,R),U.beginPath(),I(U,o),j&&U.setTransform(...j),(p===s.TextRenderingMode.FILL||p===s.TextRenderingMode.FILL_STROKE)&&U.fill(),(p===s.TextRenderingMode.STROKE||p===s.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((p===s.TextRenderingMode.FILL||p===s.TextRenderingMode.FILL_STROKE)&&U.fillText(d,u,R),(p===s.TextRenderingMode.STROKE||p===s.TextRenderingMode.FILL_STROKE)&&U.strokeText(d,u,R)),_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,t.getCurrentTransform)(U),x:u,y:R,fontSize:o,addToPath:I})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const u=d.getImageData(0,0,10,10).data;let R=!1;for(let j=3;j<u.length;j+=4)if(u[j]>0&&u[j]<255){R=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",R)}showText(d){const u=this.current,R=u.font;if(R.isType3Font)return this.showType3Text(d);const j=u.fontSize;if(j===0)return;const U=this.ctx,W=u.fontSizeScale,Y=u.charSpacing,V=u.wordSpacing,o=u.fontDirection,p=u.textHScale*o,_=d.length,C=R.vertical,I=C?1:-1,q=R.defaultVMetrics,re=j*u.fontMatrix[0],ue=u.textRenderingMode===s.TextRenderingMode.FILL&&!R.disableFontFace&&!u.patternFill;U.save(),U.transform(...u.textMatrix),U.translate(u.x,u.y+u.textRise),o>0?U.scale(p,-1):U.scale(p,1);let Z;if(u.patternFill){U.save();const N=u.fillColor.getPattern(U,this,(0,t.getCurrentTransformInverse)(U),F.PathType.FILL);Z=(0,t.getCurrentTransform)(U),U.restore(),U.fillStyle=N}let oe=u.lineWidth;const te=u.textMatrixScale;if(te===0||oe===0){const N=u.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(N===s.TextRenderingMode.STROKE||N===s.TextRenderingMode.FILL_STROKE)&&(oe=this.getSinglePixelWidth())}else oe/=te;W!==1&&(U.scale(W,W),oe/=W),U.lineWidth=oe;let ce=0,fe;for(fe=0;fe<_;++fe){const N=d[fe];if(typeof N=="number"){ce+=I*N*j/1e3;continue}let de=!1;const be=(N.isSpace?V:0)+Y,Ae=N.fontChar,Ee=N.accent;let Te,Fe,ke=N.width;if(C){const Ce=N.vmetric||q,Oe=-(N.vmetric?Ce[1]:ke*.5)*re,Ze=Ce[2]*re;ke=Ce?-Ce[0]:ke,Te=Oe/W,Fe=(ce+Ze)/W}else Te=ce/W,Fe=0;if(R.remeasure&&ke>0){const Ce=U.measureText(Ae).width*1e3/j*W;if(ke<Ce&&this.isFontSubpixelAAEnabled){const Oe=ke/Ce;de=!0,U.save(),U.scale(Oe,1),Te/=Oe}else ke!==Ce&&(Te+=(ke-Ce)/2e3*j/W)}if(this.contentVisible&&(N.isInFont||R.missingFile)){if(ue&&!Ee)U.fillText(Ae,Te,Fe);else if(this.paintChar(Ae,Te,Fe,Z),Ee){const Ce=Te+j*Ee.offset.x/W,Oe=Fe-j*Ee.offset.y/W;this.paintChar(Ee.fontChar,Ce,Oe,Z)}}let ze;C?ze=ke*re-be*o:ze=ke*re+be*o,ce+=ze,de&&U.restore()}C?u.y-=ce:u.x+=ce*p,U.restore(),this.compose()}showType3Text(d){const u=this.ctx,R=this.current,j=R.font,U=R.fontSize,W=R.fontDirection,Y=j.vertical?1:-1,V=R.charSpacing,o=R.wordSpacing,p=R.textHScale*W,_=R.fontMatrix||s.FONT_IDENTITY_MATRIX,C=d.length,I=R.textRenderingMode===s.TextRenderingMode.INVISIBLE;let q,re,ue,Z;if(!(I||U===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,u.save(),u.transform(...R.textMatrix),u.translate(R.x,R.y),u.scale(p,W),q=0;q<C;++q){if(re=d[q],typeof re=="number"){Z=Y*re*U/1e3,this.ctx.translate(Z,0),R.x+=Z*p;continue}const oe=(re.isSpace?o:0)+V,te=j.charProcOperatorList[re.operatorListId];if(!te){(0,s.warn)(`Type3 character "${re.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=re,this.save(),u.scale(U,U),u.transform(..._),this.executeOperatorList(te),this.restore()),ue=s.Util.applyTransform([re.width,0],_)[0]*U+oe,u.translate(ue,0),R.x+=ue*p}u.restore(),this.processingType3=null}}setCharWidth(d,u){}setCharWidthAndBounds(d,u,R,j,U,W){this.ctx.rect(R,j,U-R,W-j),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let u;if(d[0]==="TilingPattern"){const R=d[1],j=this.baseTransform||(0,t.getCurrentTransform)(this.ctx),U={createCanvasGraphics:W=>new _e(W,this.commonObjs,this.objs,this.canvasFactory)};u=new F.TilingPattern(d,R,this.ctx,U,j)}else u=this._getPattern(d[1],d[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,u,R){var U;const j=((U=this.selectColor)==null?void 0:U.call(this,d,u,R))||s.Util.makeHexColor(d,u,R);this.ctx.strokeStyle=j,this.current.strokeColor=j}setFillRGBColor(d,u,R){var U;const j=((U=this.selectColor)==null?void 0:U.call(this,d,u,R))||s.Util.makeHexColor(d,u,R);this.ctx.fillStyle=j,this.current.fillColor=j,this.current.patternFill=!1}_getPattern(d,u=null){let R;return this.cachedPatterns.has(d)?R=this.cachedPatterns.get(d):(R=(0,F.getShadingPattern)(this.objs.get(d)),this.cachedPatterns.set(d,R)),u&&(R.matrix=u),R}shadingFill(d){if(!this.contentVisible)return;const u=this.ctx;this.save();const R=this._getPattern(d);u.fillStyle=R.getPattern(u,this,(0,t.getCurrentTransformInverse)(u),F.PathType.SHADING);const j=(0,t.getCurrentTransformInverse)(u);if(j){const U=u.canvas,W=U.width,Y=U.height,V=s.Util.applyTransform([0,0],j),o=s.Util.applyTransform([0,Y],j),p=s.Util.applyTransform([W,0],j),_=s.Util.applyTransform([W,Y],j),C=Math.min(V[0],o[0],p[0],_[0]),I=Math.min(V[1],o[1],p[1],_[1]),q=Math.max(V[0],o[0],p[0],_[0]),re=Math.max(V[1],o[1],p[1],_[1]);this.ctx.fillRect(C,I,q-C,re-I)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,u){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,t.getCurrentTransform)(this.ctx),u)){const R=u[2]-u[0],j=u[3]-u[1];this.ctx.rect(u[0],u[1],R,j),this.current.updateRectMinMax((0,t.getCurrentTransform)(this.ctx),u),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;d.isolated||(0,s.info)("TODO: Support non-isolated groups."),d.knockout&&(0,s.warn)("Knockout groups not supported.");const R=(0,t.getCurrentTransform)(u);if(d.matrix&&u.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let j=s.Util.getAxialAlignedBoundingBox(d.bbox,(0,t.getCurrentTransform)(u));const U=[0,0,u.canvas.width,u.canvas.height];j=s.Util.intersect(j,U)||[0,0,0,0];const W=Math.floor(j[0]),Y=Math.floor(j[1]);let V=Math.max(Math.ceil(j[2])-W,1),o=Math.max(Math.ceil(j[3])-Y,1),p=1,_=1;V>w&&(p=V/w,V=w),o>w&&(_=o/w,o=w),this.current.startNewPathAndClipBox([0,0,V,o]);let C="groupAt"+this.groupLevel;d.smask&&(C+="_smask_"+this.smaskCounter++%2);const I=this.cachedCanvases.getCanvas(C,V,o),q=I.context;q.scale(1/p,1/_),q.translate(-W,-Y),q.transform(...R),d.smask?this.smaskStack.push({canvas:I.canvas,context:q,offsetX:W,offsetY:Y,scaleX:p,scaleY:_,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(W,Y),u.scale(p,_),u.save()),a(u,q),this.ctx=q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,R=this.groupStack.pop();if(this.ctx=R,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const j=(0,t.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...j);const U=s.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],j);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(d,u,R,j,U){if(he(this,ne,ht).call(this),g(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(u)&&u.length===4){const W=u[2]-u[0],Y=u[3]-u[1];if(U&&this.annotationCanvasMap){R=R.slice(),R[4]-=u[0],R[5]-=u[1],u=u.slice(),u[0]=u[1]=0,u[2]=W,u[3]=Y;const[V,o]=s.Util.singularValueDecompose2dScale((0,t.getCurrentTransform)(this.ctx)),{viewportScale:p}=this,_=Math.ceil(W*this.outputScaleX*p),C=Math.ceil(Y*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(_,C);const{canvas:I,context:q}=this.annotationCanvas;this.annotationCanvasMap.set(d,I),this.annotationCanvas.savedCtx=this.ctx,this.ctx=q,this.ctx.setTransform(V,0,0,-o,0,Y*o),g(this.ctx,this.foregroundColor)}else g(this.ctx,this.foregroundColor),this.ctx.rect(u[0],u[1],W,Y),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...R),this.transform(...j)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const u=d.count;d=this.getObject(d.data,d),d.count=u;const R=this.ctx,j=this.processingType3;if(j&&(j.compiled===void 0&&(j.compiled=v(d)),j.compiled)){j.compiled(R);return}const U=this._createMaskCanvas(d),W=U.canvas;R.save(),R.setTransform(1,0,0,1,0,0),R.drawImage(W,U.offsetX,U.offsetY),R.restore(),this.compose()}paintImageMaskXObjectRepeat(d,u,R=0,j=0,U,W){if(!this.contentVisible)return;d=this.getObject(d.data,d);const Y=this.ctx;Y.save();const V=(0,t.getCurrentTransform)(Y);Y.transform(u,R,j,U,0,0);const o=this._createMaskCanvas(d);Y.setTransform(1,0,0,1,0,0);for(let p=0,_=W.length;p<_;p+=2){const C=s.Util.transform(V,[u,R,j,U,W[p],W[p+1]]),[I,q]=s.Util.applyTransform([0,0],C);Y.drawImage(o.canvas,I,q)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const u=this.ctx,R=this.current.fillColor,j=this.current.patternFill;for(const U of d){const{data:W,width:Y,height:V,transform:o}=U,p=this.cachedCanvases.getCanvas("maskCanvas",Y,V),_=p.context;_.save();const C=this.getObject(W,U);r(_,C),_.globalCompositeOperation="source-in",_.fillStyle=j?R.getPattern(_,this,(0,t.getCurrentTransformInverse)(u),F.PathType.FILL):R,_.fillRect(0,0,Y,V),_.restore(),u.save(),u.transform(...o),u.scale(1,-1),l(u,p.canvas,0,0,Y,V,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const u=this.getObject(d);if(!u){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(u)}paintImageXObjectRepeat(d,u,R,j){if(!this.contentVisible)return;const U=this.getObject(d);if(!U){(0,s.warn)("Dependent image isn't ready yet");return}const W=U.width,Y=U.height,V=[];for(let o=0,p=j.length;o<p;o+=2)V.push({transform:[u,0,0,R,j[o],j[o+1]],x:0,y:0,w:W,h:Y});this.paintInlineImageXObjectGroup(U,V)}paintInlineImageXObject(d){if(!this.contentVisible)return;const u=d.width,R=d.height,j=this.ctx;this.save(),j.scale(1/u,-1/R);let U;if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)U=d;else{const o=this.cachedCanvases.getCanvas("inlineImage",u,R),p=o.context;c(p,d,this.current.transferMaps),U=o.canvas}const W=this._scaleImage(U,(0,t.getCurrentTransformInverse)(j));j.imageSmoothingEnabled=ie((0,t.getCurrentTransform)(j),d.interpolate);const[Y,V]=l(j,W.img,0,0,W.paintWidth,W.paintHeight,0,-R,u,R);if(this.imageLayer){const[o,p]=s.Util.applyTransform([0,-R],(0,t.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:d,left:o,top:p,width:Y,height:V})}this.compose(),this.restore()}paintInlineImageXObjectGroup(d,u){if(!this.contentVisible)return;const R=this.ctx,j=d.width,U=d.height,W=this.cachedCanvases.getCanvas("inlineImage",j,U),Y=W.context;c(Y,d,this.current.transferMaps);for(const V of u){if(R.save(),R.transform(...V.transform),R.scale(1,-1),l(R,W.canvas,V.x,V.y,V.w,V.h,0,-1,1,1),this.imageLayer){const[o,p]=s.Util.applyTransform([V.x,V.y],(0,t.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:d,left:o,top:p,width:j,height:U})}R.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,u){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,u){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(u)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const R=this.ctx;this.pendingClip&&(u||(this.pendingClip===$?R.clip("evenodd"):R.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),R.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,t.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const u=Math.abs(d[0]*d[3]-d[2]*d[1]),R=Math.hypot(d[0],d[2]),j=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(R,j)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:d}=this.current,u=(0,t.getCurrentTransform)(this.ctx);let R,j;if(u[1]===0&&u[2]===0){const U=Math.abs(u[0]),W=Math.abs(u[3]);if(d===0)R=1/U,j=1/W;else{const Y=U*d,V=W*d;R=Y<1?1/Y:1,j=V<1?1/V:1}}else{const U=Math.abs(u[0]*u[3]-u[2]*u[1]),W=Math.hypot(u[0],u[1]),Y=Math.hypot(u[2],u[3]);if(d===0)R=Y/U,j=W/U;else{const V=d*U;R=Y>V?Y/V:1,j=W>V?W/V:1}}this._cachedScaleForStroking=[R,j]}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:u}=this,{lineWidth:R}=this.current,[j,U]=this.getScaleForStroking();if(u.lineWidth=R||1,j===1&&U===1){u.stroke();return}let W,Y,V;d&&(W=(0,t.getCurrentTransform)(u),Y=u.getLineDash().slice(),V=u.lineDashOffset),u.scale(j,U);const o=Math.max(j,U);u.setLineDash(u.getLineDash().map(p=>p/o)),u.lineDashOffset/=o,u.stroke(),d&&(u.setTransform(...W),u.setLineDash(Y),u.lineDashOffset=V)}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};let X=_e;ne=new WeakSet,ht=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},n.CanvasGraphics=X;for(const B in s.OPS)X.prototype[B]!==void 0&&(X.prototype[s.OPS[B]]=X.prototype[B])},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=h;var t=y(1),s=y(8),F=y(3);const M={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=M;function T(l,v){if(!v||F.isNodeJS)return;const A=v[2]-v[0],c=v[3]-v[1],r=new Path2D;r.rect(v[0],v[1],A,c),l.clip(r)}class b{constructor(){this.constructor===b&&(0,t.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,t.unreachable)("Abstract method `getPattern` called.")}}class f extends b{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let A;this._type==="axial"?A=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(A=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const c of this._colorStops)A.addColorStop(c[0],c[1]);return A}getPattern(v,A,c,r){let a;if(r===M.STROKE||r===M.FILL){const g=A.current.getClippedPathBoundingBox(r,(0,s.getCurrentTransform)(v))||[0,0,0,0],k=Math.ceil(g[2]-g[0])||1,E=Math.ceil(g[3]-g[1])||1,m=A.cachedCanvases.getCanvas("pattern",k,E,!0),O=m.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-g[0],-g[1]),c=t.Util.transform(c,[1,0,0,1,g[0],g[1]]),O.transform(...A.baseTransform),this.matrix&&O.transform(...this.matrix),T(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),a=v.createPattern(m.canvas,"no-repeat");const ee=new DOMMatrix(c);try{a.setTransform(ee)}catch(ie){(0,t.warn)(`RadialAxialShadingPattern.getPattern: "${ie==null?void 0:ie.message}".`)}}else T(v,this._bbox),a=this._createGradient(v);return a}}function w(l,v,A,c,r,a,g,k){const E=v.coords,m=v.colors,O=l.data,ee=l.width*4;let ie;E[A+1]>E[c+1]&&(ie=A,A=c,c=ie,ie=a,a=g,g=ie),E[c+1]>E[r+1]&&(ie=c,c=r,r=ie,ie=g,g=k,k=ie),E[A+1]>E[c+1]&&(ie=A,A=c,c=ie,ie=a,a=g,g=ie);const Q=(E[A]+v.offsetX)*v.scaleX,K=(E[A+1]+v.offsetY)*v.scaleY,G=(E[c]+v.offsetX)*v.scaleX,$=(E[c+1]+v.offsetY)*v.scaleY,X=(E[r]+v.offsetX)*v.scaleX,ne=(E[r+1]+v.offsetY)*v.scaleY;if(K>=ne)return;const le=m[a],_e=m[a+1],B=m[a+2],d=m[g],u=m[g+1],R=m[g+2],j=m[k],U=m[k+1],W=m[k+2],Y=Math.round(K),V=Math.round(ne);let o,p,_,C,I,q,re,ue;for(let Z=Y;Z<=V;Z++){if(Z<$){let N;Z<K?N=0:N=(K-Z)/(K-$),o=Q-(Q-G)*N,p=le-(le-d)*N,_=_e-(_e-u)*N,C=B-(B-R)*N}else{let N;Z>ne?N=1:$===ne?N=0:N=($-Z)/($-ne),o=G-(G-X)*N,p=d-(d-j)*N,_=u-(u-U)*N,C=R-(R-W)*N}let oe;Z<K?oe=0:Z>ne?oe=1:oe=(K-Z)/(K-ne),I=Q-(Q-X)*oe,q=le-(le-j)*oe,re=_e-(_e-U)*oe,ue=B-(B-W)*oe;const te=Math.round(Math.min(o,I)),ce=Math.round(Math.max(o,I));let fe=ee*Z+te*4;for(let N=te;N<=ce;N++)oe=(o-N)/(o-I),oe<0?oe=0:oe>1&&(oe=1),O[fe++]=p-(p-q)*oe|0,O[fe++]=_-(_-re)*oe|0,O[fe++]=C-(C-ue)*oe|0,O[fe++]=255}}function L(l,v,A){const c=v.coords,r=v.colors;let a,g;switch(v.type){case"lattice":const k=v.verticesPerRow,E=Math.floor(c.length/k)-1,m=k-1;for(a=0;a<E;a++){let O=a*k;for(let ee=0;ee<m;ee++,O++)w(l,A,c[O],c[O+1],c[O+k],r[O],r[O+1],r[O+k]),w(l,A,c[O+k+1],c[O+1],c[O+k],r[O+k+1],r[O+1],r[O+k])}break;case"triangles":for(a=0,g=c.length;a<g;a+=3)w(l,A,c[a],c[a+1],c[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class x extends b{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,A,c){const k=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-k,O=Math.ceil(this._bounds[3])-E,ee=Math.min(Math.ceil(Math.abs(m*v[0]*1.1)),3e3),ie=Math.min(Math.ceil(Math.abs(O*v[1]*1.1)),3e3),Q=m/ee,K=O/ie,G={coords:this._coords,colors:this._colors,offsetX:-k,offsetY:-E,scaleX:1/Q,scaleY:1/K},$=ee+2*2,X=ie+2*2,ne=c.getCanvas("mesh",$,X,!1),le=ne.context,_e=le.createImageData(ee,ie);if(A){const d=_e.data;for(let u=0,R=d.length;u<R;u+=4)d[u]=A[0],d[u+1]=A[1],d[u+2]=A[2],d[u+3]=255}for(const d of this._figures)L(_e,d,G);return le.putImageData(_e,2,2),{canvas:ne.canvas,offsetX:k-2*Q,offsetY:E-2*K,scaleX:Q,scaleY:K}}getPattern(v,A,c,r){T(v,this._bbox);let a;if(r===M.SHADING)a=t.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(v));else if(a=t.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const k=t.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*k[0],a[1]*k[1]]}const g=this._createMeshCanvas(a,r===M.SHADING?null:this._background,A.cachedCanvases);return r!==M.SHADING&&(v.setTransform(...A.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(g.offsetX,g.offsetY),v.scale(g.scaleX,g.scaleY),v.createPattern(g.canvas,"no-repeat")}}class P extends b{getPattern(){return"hotpink"}}function h(l){switch(l[0]){case"RadialAxial":return new f(l);case"Mesh":return new x(l);case"Dummy":return new P}throw new Error(`Unknown IR type: ${l[0]}`)}const e={COLORED:1,UNCOLORED:2};class i{static get MAX_PATTERN_SIZE(){return(0,t.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(v,A,c,r,a){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=A,this.ctx=c,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(v){const A=this.operatorList,c=this.bbox,r=this.xstep,a=this.ystep,g=this.paintType,k=this.tilingType,E=this.color,m=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+k);const O=c[0],ee=c[1],ie=c[2],Q=c[3],K=t.Util.singularValueDecompose2dScale(this.matrix),G=t.Util.singularValueDecompose2dScale(this.baseTransform),$=[K[0]*G[0],K[1]*G[1]],X=this.getSizeAndScale(r,this.ctx.canvas.width,$[0]),ne=this.getSizeAndScale(a,this.ctx.canvas.height,$[1]),le=v.cachedCanvases.getCanvas("pattern",X.size,ne.size,!0),_e=le.context,B=m.createCanvasGraphics(_e);B.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(B,g,E);let d=O,u=ee,R=ie,j=Q;return O<0&&(d=0,R+=Math.abs(O)),ee<0&&(u=0,j+=Math.abs(ee)),_e.translate(-(X.scale*d),-(ne.scale*u)),B.transform(X.scale,0,0,ne.scale,0,0),_e.save(),this.clipBbox(B,d,u,R,j),B.baseTransform=(0,s.getCurrentTransform)(B.ctx),B.executeOperatorList(A),B.endDrawing(),{canvas:le.canvas,scaleX:X.scale,scaleY:ne.scale,offsetX:d,offsetY:u}}getSizeAndScale(v,A,c){v=Math.abs(v);const r=Math.max(i.MAX_PATTERN_SIZE,A);let a=Math.ceil(v*c);return a>=r?a=r:c=a/v,{scale:c,size:a}}clipBbox(v,A,c,r,a){const g=r-A,k=a-c;v.ctx.rect(A,c,g,k),v.current.updateRectMinMax((0,s.getCurrentTransform)(v.ctx),[A,c,r,a]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,A,c){const r=v.ctx,a=v.current;switch(A){case e.COLORED:const g=this.ctx;r.fillStyle=g.fillStyle,r.strokeStyle=g.strokeStyle,a.fillColor=g.fillStyle,a.strokeColor=g.strokeStyle;break;case e.UNCOLORED:const k=t.Util.makeHexColor(c[0],c[1],c[2]);r.fillStyle=k,r.strokeStyle=k,a.fillColor=k,a.strokeColor=k;break;default:throw new t.FormatError(`Unsupported paint type: ${A}`)}}getPattern(v,A,c,r){let a=c;r!==M.SHADING&&(a=t.Util.transform(a,A.baseTransform),this.matrix&&(a=t.Util.transform(a,this.matrix)));const g=this.createPatternCanvas(A);let k=new DOMMatrix(a);k=k.translate(g.offsetX,g.offsetY),k=k.scale(1/g.scaleX,1/g.scaleY);const E=v.createPattern(g.canvas,"repeat");try{E.setTransform(k)}catch(m){(0,t.warn)(`TilingPattern.getPattern: "${m==null?void 0:m.message}".`)}return E}}n.TilingPattern=i},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.applyMaskImageData=s;var t=y(1);function s({src:F,srcPos:M=0,dest:T,destPos:b=0,width:f,height:w,inverseDecode:L=!1}){const x=t.FeatureTest.isLittleEndian?4278190080:255,[P,h]=L?[0,x]:[x,0],e=f>>3,i=f&7,l=F.length;T=new Uint32Array(T.buffer);for(let v=0;v<w;v++){for(const c=M+e;M<c;M++){const r=M<l?F[M]:255;T[b++]=r&128?h:P,T[b++]=r&64?h:P,T[b++]=r&32?h:P,T[b++]=r&16?h:P,T[b++]=r&8?h:P,T[b++]=r&4?h:P,T[b++]=r&2?h:P,T[b++]=r&1?h:P}if(i===0)continue;const A=M<l?F[M++]:255;for(let c=0;c<i;c++)T[b++]=A&1<<7-c?h:P}return{srcPos:M,destPos:b}}},(S,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const y=Object.create(null);n.GlobalWorkerOptions=y,y.workerPort=y.workerPort===void 0?null:y.workerPort,y.workerSrc=y.workerSrc===void 0?"":y.workerSrc},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var t=y(1);const s={UNKNOWN:0,DATA:1,ERROR:2},F={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(b){switch(b instanceof Error||typeof b=="object"&&b!==null||(0,t.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),b.name){case"AbortException":return new t.AbortException(b.message);case"MissingPDFException":return new t.MissingPDFException(b.message);case"PasswordException":return new t.PasswordException(b.message,b.code);case"UnexpectedResponseException":return new t.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new t.UnknownErrorException(b.message,b.details);default:return new t.UnknownErrorException(b.message,b.toString())}}class T{constructor(f,w,L){this.sourceName=f,this.targetName=w,this.comObj=L,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const P=x.data;if(P.targetName!==this.sourceName)return;if(P.stream){this._processStreamMessage(P);return}if(P.callback){const e=P.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],P.callback===s.DATA)i.resolve(P.data);else if(P.callback===s.ERROR)i.reject(M(P.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[P.action];if(!h)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const e=this.sourceName,i=P.sourceName;new Promise(function(l){l(h(P.data))}).then(function(l){L.postMessage({sourceName:e,targetName:i,callback:s.DATA,callbackId:P.callbackId,data:l})},function(l){L.postMessage({sourceName:e,targetName:i,callback:s.ERROR,callbackId:P.callbackId,reason:M(l)})});return}if(P.streamId){this._createStreamSink(P);return}h(P.data)},L.addEventListener("message",this._onComObjOnMessage)}on(f,w){const L=this.actionHandler;if(L[f])throw new Error(`There is already an actionName called "${f}"`);L[f]=w}send(f,w,L){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:w},L)}sendWithPromise(f,w,L){const x=this.callbackId++,P=(0,t.createPromiseCapability)();this.callbackCapabilities[x]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:x,data:w},L)}catch(h){P.reject(h)}return P.promise}sendWithStream(f,w,L,x){const P=this.streamId++,h=this.sourceName,e=this.targetName,i=this.comObj;return new ReadableStream({start:l=>{const v=(0,t.createPromiseCapability)();return this.streamControllers[P]={controller:l,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:h,targetName:e,action:f,streamId:P,data:w,desiredSize:l.desiredSize},x),v.promise},pull:l=>{const v=(0,t.createPromiseCapability)();return this.streamControllers[P].pullCall=v,i.postMessage({sourceName:h,targetName:e,stream:F.PULL,streamId:P,desiredSize:l.desiredSize}),v.promise},cancel:l=>{(0,t.assert)(l instanceof Error,"cancel must have a valid reason");const v=(0,t.createPromiseCapability)();return this.streamControllers[P].cancelCall=v,this.streamControllers[P].isClosed=!0,i.postMessage({sourceName:h,targetName:e,stream:F.CANCEL,streamId:P,reason:M(l)}),v.promise}},L)}_createStreamSink(f){const w=f.streamId,L=this.sourceName,x=f.sourceName,P=this.comObj,h=this,e=this.actionHandler[f.action],i={enqueue(l,v=1,A){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=v,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),P.postMessage({sourceName:L,targetName:x,stream:F.ENQUEUE,streamId:w,chunk:l},A)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:L,targetName:x,stream:F.CLOSE,streamId:w}),delete h.streamSinks[w])},error(l){(0,t.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:L,targetName:x,stream:F.ERROR,streamId:w,reason:M(l)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[w]=i,new Promise(function(l){l(e(f.data,i))}).then(function(){P.postMessage({sourceName:L,targetName:x,stream:F.START_COMPLETE,streamId:w,success:!0})},function(l){P.postMessage({sourceName:L,targetName:x,stream:F.START_COMPLETE,streamId:w,reason:M(l)})})}_processStreamMessage(f){const w=f.streamId,L=this.sourceName,x=f.sourceName,P=this.comObj,h=this.streamControllers[w],e=this.streamSinks[w];switch(f.stream){case F.START_COMPLETE:f.success?h.startCall.resolve():h.startCall.reject(M(f.reason));break;case F.PULL_COMPLETE:f.success?h.pullCall.resolve():h.pullCall.reject(M(f.reason));break;case F.PULL:if(!e){P.postMessage({sourceName:L,targetName:x,stream:F.PULL_COMPLETE,streamId:w,success:!0});break}e.desiredSize<=0&&f.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=f.desiredSize,new Promise(function(i){i(e.onPull&&e.onPull())}).then(function(){P.postMessage({sourceName:L,targetName:x,stream:F.PULL_COMPLETE,streamId:w,success:!0})},function(i){P.postMessage({sourceName:L,targetName:x,stream:F.PULL_COMPLETE,streamId:w,reason:M(i)})});break;case F.ENQUEUE:if((0,t.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(f.chunk);break;case F.CLOSE:if((0,t.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this._deleteStreamController(h,w);break;case F.ERROR:(0,t.assert)(h,"error should have stream controller"),h.controller.error(M(f.reason)),this._deleteStreamController(h,w);break;case F.CANCEL_COMPLETE:f.success?h.cancelCall.resolve():h.cancelCall.reject(M(f.reason)),this._deleteStreamController(h,w);break;case F.CANCEL:if(!e)break;new Promise(function(i){i(e.onCancel&&e.onCancel(M(f.reason)))}).then(function(){P.postMessage({sourceName:L,targetName:x,stream:F.CANCEL_COMPLETE,streamId:w,success:!0})},function(i){P.postMessage({sourceName:L,targetName:x,stream:F.CANCEL_COMPLETE,streamId:w,reason:M(i)})}),e.sinkCapability.reject(M(f.reason)),e.isCancelled=!0,delete this.streamSinks[w];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(f,w){await Promise.allSettled([f.startCall&&f.startCall.promise,f.pullCall&&f.pullCall.promise,f.cancelCall&&f.cancelCall.promise]),delete this.streamControllers[w]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}n.MessageHandler=T},(S,n,y)=>{var F,M;Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var t=y(1);class s{constructor({parsedData:b,rawData:f}){ae(this,F,void 0);ae(this,M,void 0);me(this,F,b),me(this,M,f)}getRaw(){return D(this,M)}get(b){return D(this,F).get(b)??null}getAll(){return(0,t.objectFromMap)(D(this,F))}has(b){return D(this,F).has(b)}}F=new WeakMap,M=new WeakMap,n.Metadata=s},(S,n,y)=>{var T,b,f,w,L,x,ut;Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var t=y(1);const s=Symbol("INTERNAL");class F{constructor(e,i){ae(this,T,!0);this.name=e,this.intent=i}get visible(){return D(this,T)}_setVisible(e,i){e!==s&&(0,t.unreachable)("Internal method `_setVisible` called."),me(this,T,i)}}T=new WeakMap;class M{constructor(e){ae(this,x);ae(this,b,!0);ae(this,f,new Map);ae(this,w,null);ae(this,L,null);if(this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,me(this,L,e.order);for(const i of e.groups)D(this,f).set(i.id,new F(i.name,i.intent));if(e.baseState==="OFF")for(const i of D(this,f).values())i._setVisible(s,!1);for(const i of e.on)D(this,f).get(i)._setVisible(s,!0);for(const i of e.off)D(this,f).get(i)._setVisible(s,!1);me(this,w,new Map);for(const[i,l]of D(this,f))D(this,w).set(i,l.visible)}}isVisible(e){if(D(this,f).size===0)return!0;if(!e)return(0,t.warn)("Optional content group not defined."),!0;if(e.type==="OCG")return D(this,f).has(e.id)?D(this,f).get(e.id).visible:((0,t.warn)(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return he(this,x,ut).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const i of e.ids){if(!D(this,f).has(i))return(0,t.warn)(`Optional content group not found: ${i}`),!0;if(D(this,f).get(i).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const i of e.ids){if(!D(this,f).has(i))return(0,t.warn)(`Optional content group not found: ${i}`),!0;if(!D(this,f).get(i).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const i of e.ids){if(!D(this,f).has(i))return(0,t.warn)(`Optional content group not found: ${i}`),!0;if(!D(this,f).get(i).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const i of e.ids){if(!D(this,f).has(i))return(0,t.warn)(`Optional content group not found: ${i}`),!0;if(D(this,f).get(i).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,t.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e,i=!0){if(!D(this,f).has(e)){(0,t.warn)(`Optional content group not found: ${e}`);return}D(this,f).get(e)._setVisible(s,!!i),me(this,b,null)}get hasInitialVisibility(){if(D(this,b)!==null)return D(this,b);for(const[e,i]of D(this,f)){const l=D(this,w).get(e);if(i.visible!==l)return me(this,b,!1)}return me(this,b,!0)}getOrder(){return D(this,f).size?D(this,L)?D(this,L).slice():[...D(this,f).keys()]:null}getGroups(){return D(this,f).size>0?(0,t.objectFromMap)(D(this,f)):null}getGroup(e){return D(this,f).get(e)||null}}b=new WeakMap,f=new WeakMap,w=new WeakMap,L=new WeakMap,x=new WeakSet,ut=function(e){const i=e.length;if(i<2)return!0;const l=e[0];for(let v=1;v<i;v++){const A=e[v];let c;if(Array.isArray(A))c=he(this,x,ut).call(this,A);else if(D(this,f).has(A))c=D(this,f).get(A).visible;else return(0,t.warn)(`Optional content group not found: ${A}`),!0;switch(l){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return l==="And"},n.OptionalContentConfig=M},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var t=y(1),s=y(8);class F{constructor(f,w){(0,t.assert)(w,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=f.progressiveDone||!1,this._contentDispositionFilename=f.contentDispositionFilename||null;const L=f.initialData;if((L==null?void 0:L.length)>0){const x=new Uint8Array(L).buffer;this._queuedChunks.push(x)}this._pdfDataRangeTransport=w,this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._contentLength=f.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((x,P)=>{this._onReceiveData({begin:x,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((x,P)=>{this._onProgress({loaded:x,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(x=>{this._onReceiveData({chunk:x})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(f){const w=new Uint8Array(f.chunk).buffer;if(f.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const L=this._rangeReaders.some(function(x){return x._begin!==f.begin?!1:(x._enqueue(w),!0)});(0,t.assert)(L,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){if(f.total===void 0){const w=this._rangeReaders[0];w!=null&&w.onProgress&&w.onProgress({loaded:f.loaded})}else{const w=this._fullRequestReader;w!=null&&w.onProgress&&w.onProgress({loaded:f.loaded,total:f.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const w=this._rangeReaders.indexOf(f);w>=0&&this._rangeReaders.splice(w,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new M(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,w){if(w<=this._progressiveDataLength)return null;const L=new T(this,f,w);return this._pdfDataRangeTransport.requestDataRange(f,w),this._rangeReaders.push(L),L}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const w of this._rangeReaders.slice(0))w.cancel(f);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=F;class M{constructor(f,w,L=!1,x=null){this._stream=f,this._done=L||!1,this._filename=(0,s.isPdfFile)(x)?x:null,this._queuedChunks=w||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=(0,t.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class T{constructor(f,w,L){this._stream=f,this._begin=w,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const f=(0,t.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(S,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class y{static textContent(s){const F=[],M={items:F,styles:Object.create(null)};function T(b){var L;if(!b)return;let f=null;const w=b.name;if(w==="#text")f=b.value;else if(y.shouldBuildText(w))(L=b==null?void 0:b.attributes)!=null&&L.textContent?f=b.attributes.textContent:b.value&&(f=b.value);else return;if(f!==null&&F.push({str:f}),!!b.children)for(const x of b.children)T(x)}return T(s),M}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}n.XfaText=y},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var t=y(9);const s=function(b){return new Promise((f,w)=>{require$$5.readFile(b,(x,P)=>{if(x||!P){w(new Error(x));return}f(new Uint8Array(P))})})};class F extends t.BaseCanvasFactory{_createCanvas(f,w){return require$$5.createCanvas(f,w)}}n.NodeCanvasFactory=F;class M extends t.BaseCMapReaderFactory{_fetchData(f,w){return s(f).then(L=>({cMapData:L,compressionType:w}))}}n.NodeCMapReaderFactory=M;class T extends t.BaseStandardFontDataFactory{_fetchData(f){return s(f)}}n.NodeStandardFontDataFactory=T},(S,n,y)=>{var b,f,w,L,x,P,h,e,i,dt,v,Rt,c,ft,a,kt;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var t=y(7),s=y(1),F=y(23),M=y(24);const k=class{constructor(m){ae(this,i);ae(this,v);ae(this,c);ae(this,a);ae(this,b,void 0);ae(this,f,!1);ae(this,w,this.pointerup.bind(this));ae(this,L,this.pointerdown.bind(this));ae(this,x,new Map);ae(this,P,!1);ae(this,h,!1);ae(this,e,void 0);k._initialized||(k._initialized=!0,F.FreeTextEditor.initialize(m.l10n),M.InkEditor.initialize(m.l10n),m.uiManager.registerEditorTypes([F.FreeTextEditor,M.InkEditor])),me(this,e,m.uiManager),this.annotationStorage=m.annotationStorage,this.pageIndex=m.pageIndex,this.div=m.div,me(this,b,m.accessibilityManager),D(this,e).addLayer(this)}updateToolbar(m){D(this,e).updateToolbar(m)}updateMode(m=D(this,e).getMode()){he(this,a,kt).call(this),m===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),D(this,e).unselectAll()}addInkEditorIfNeeded(m){if(!m&&D(this,e).getMode()!==s.AnnotationEditorType.INK)return;if(!m){for(const ee of D(this,x).values())if(ee.isEmpty()){ee.setInBackground();return}}he(this,c,ft).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){D(this,e).setEditingState(m)}addCommands(m){D(this,e).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of D(this,x).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of D(this,x).values())m.disableEditing()}setActiveEditor(m){D(this,e).getActive()!==m&&D(this,e).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",D(this,L)),this.div.addEventListener("pointerup",D(this,w))}disableClick(){this.div.removeEventListener("pointerdown",D(this,L)),this.div.removeEventListener("pointerup",D(this,w))}attach(m){D(this,x).set(m.id,m)}detach(m){var O;D(this,x).delete(m.id),(O=D(this,b))==null||O.removePointerInTextLayer(m.contentDiv)}remove(m){D(this,e).removeEditor(m),this.detach(m),this.annotationStorage.remove(m.id),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&D(this,e).focusMainContainer()},0),D(this,h)||this.addInkEditorIfNeeded(!1)}add(m){if(he(this,i,dt).call(this,m),D(this,e).addEditor(m),this.attach(m),!m.isAttachedToDOM){const O=m.render();this.div.append(O),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),this.addToAnnotationStorage(m)}moveEditorInDOM(m){var O;(O=D(this,b))==null||O.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addToAnnotationStorage(m){!m.isEmpty()&&!this.annotationStorage.has(m.id)&&this.annotationStorage.setValue(m.id,m)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const O=()=>{this.addOrRebuild(m)},ee=()=>{m.remove()};this.addCommands({cmd:O,undo:ee,mustExec:!0})}addUndoableEditor(m){const O=()=>{this.addOrRebuild(m)},ee=()=>{m.remove()};this.addCommands({cmd:O,undo:ee,mustExec:!1})}getNextId(){return D(this,e).getId()}deserialize(m){switch(m.annotationType){case s.AnnotationEditorType.FREETEXT:return F.FreeTextEditor.deserialize(m,this);case s.AnnotationEditorType.INK:return M.InkEditor.deserialize(m,this)}return null}setSelected(m){D(this,e).setSelected(m)}toggleSelected(m){D(this,e).toggleSelected(m)}isSelected(m){return D(this,e).isSelected(m)}unselect(m){D(this,e).unselect(m)}pointerup(m){const O=t.KeyboardManager.platform.isMac;if(!(m.button!==0||m.ctrlKey&&O)&&m.target===this.div&&D(this,P)){if(me(this,P,!1),!D(this,f)){me(this,f,!0);return}he(this,c,ft).call(this,m)}}pointerdown(m){const O=t.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&O||m.target!==this.div)return;me(this,P,!0);const ee=D(this,e).getActive();me(this,f,!ee||ee.isEmpty())}drop(m){const O=m.dataTransfer.getData("text/plain"),ee=D(this,e).getEditor(O);if(!ee)return;m.preventDefault(),m.dataTransfer.dropEffect="move",he(this,i,dt).call(this,ee);const ie=this.div.getBoundingClientRect(),Q=m.clientX-ie.x,K=m.clientY-ie.y;ee.translate(Q-ee.startX,K-ee.startY),this.moveEditorInDOM(ee),ee.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,O;((m=D(this,e).getActive())==null?void 0:m.parent)===this&&D(this,e).setActiveEditor(null);for(const ee of D(this,x).values())(O=D(this,b))==null||O.removePointerInTextLayer(ee.contentDiv),ee.isAttachedToDOM=!1,ee.div.remove(),ee.parent=null;this.div=null,D(this,x).clear(),D(this,e).removeLayer(this)}render(m){this.viewport=m.viewport,(0,t.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const O of D(this,e).getEditors(this.pageIndex))this.add(O);this.updateMode()}update(m){this.viewport=m.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[m,O,ee,ie]=this.viewport.viewBox,Q=ee-m,K=ie-O;return[Q,K]}get viewportBaseDimensions(){const{width:m,height:O,rotation:ee}=this.viewport;return ee%180===0?[m,O]:[O,m]}setDimensions(){const{width:m,height:O,rotation:ee}=this.viewport,ie=ee%180!==0,Q=Math.floor(m)+"px",K=Math.floor(O)+"px";this.div.style.width=ie?K:Q,this.div.style.height=ie?Q:K,this.div.setAttribute("data-main-rotation",ee)}};let T=k;b=new WeakMap,f=new WeakMap,w=new WeakMap,L=new WeakMap,x=new WeakMap,P=new WeakMap,h=new WeakMap,e=new WeakMap,i=new WeakSet,dt=function(m){var O;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,(O=m.parent)==null||O.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},v=new WeakSet,Rt=function(m){switch(D(this,e).getMode()){case s.AnnotationEditorType.FREETEXT:return new F.FreeTextEditor(m);case s.AnnotationEditorType.INK:return new M.InkEditor(m)}return null},c=new WeakSet,ft=function(m){const O=this.getNextId(),ee=he(this,v,Rt).call(this,{parent:this,id:O,x:m.offsetX,y:m.offsetY});return ee&&this.add(ee),ee},a=new WeakSet,kt=function(){me(this,h,!0);for(const m of D(this,x).values())m.isEmpty()&&m.remove();me(this,h,!1)},Me(T,"_initialized",!1),n.AnnotationEditorLayer=T},(S,n,y)=>{var T,b,f,w,L,x,P,h,Ft,i,Mt,v,Ot,c,pt;Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var t=y(1),s=y(7),F=y(6);const a=class extends F.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});ae(this,h);ae(this,i);ae(this,v);ae(this,c);ae(this,T,this.editorDivBlur.bind(this));ae(this,b,this.editorDivFocus.bind(this));ae(this,f,this.editorDivKeydown.bind(this));ae(this,w,void 0);ae(this,L,"");ae(this,x,!1);ae(this,P,void 0);me(this,w,E.color||a._defaultColor||F.AnnotationEditor._defaultLineColor),me(this,P,E.fontSize||a._defaultFontSize)}static initialize(E){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(O=>[O,E.get(O)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,m){switch(E){case t.AnnotationEditorParamsType.FREETEXT_SIZE:a._defaultFontSize=m;break;case t.AnnotationEditorParamsType.FREETEXT_COLOR:a._defaultColor=m;break}}updateParams(E,m){switch(E){case t.AnnotationEditorParamsType.FREETEXT_SIZE:he(this,h,Ft).call(this,m);break;case t.AnnotationEditorParamsType.FREETEXT_COLOR:he(this,i,Mt).call(this,m);break}}static get defaultPropertiesToUpdate(){return[[t.AnnotationEditorParamsType.FREETEXT_SIZE,a._defaultFontSize],[t.AnnotationEditorParamsType.FREETEXT_COLOR,a._defaultColor||F.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[t.AnnotationEditorParamsType.FREETEXT_SIZE,D(this,P)],[t.AnnotationEditorParamsType.FREETEXT_COLOR,D(this,w)]]}getInitialTranslation(){return[-a._internalPadding*this.parent.scaleFactor,-(a._internalPadding+D(this,P))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(t.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",D(this,f)),this.editorDiv.addEventListener("focus",D(this,b)),this.editorDiv.addEventListener("blur",D(this,T)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",D(this,f)),this.editorDiv.removeEventListener("focus",D(this,b)),this.editorDiv.removeEventListener("blur",D(this,T)),this.div.focus(),this.isEditing=!1)}focusin(E){super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),D(this,x)||(me(this,x,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),me(this,L,he(this,v,Ot).call(this).trimEnd()),he(this,c,pt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(E){this.enableEditMode(),this.editorDiv.focus()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(E){a._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,m;this.width&&(E=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),a._l10nPromise.get("editor_free_text_aria_label").then(ee=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("aria-label",ee)}),a._l10nPromise.get("free_text_default_content").then(ee=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("default-content",ee)}),this.editorDiv.contentEditable=!0;const{style:O}=this.editorDiv;if(O.fontSize=`calc(${D(this,P)}px * var(--scale-factor))`,O.color=D(this,w),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ee,ie]=this.parent.viewportBaseDimensions;this.setAt(E*ee,m*ie,this.width*ee,this.height*ie);for(const Q of D(this,L).split(`
`)){const K=document.createElement("div");K.append(Q?document.createTextNode(Q):document.createElement("br")),this.editorDiv.append(K)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,m){const O=super.deserialize(E,m);return me(O,P,E.fontSize),me(O,w,t.Util.makeHexColor(...E.color)),me(O,L,E.value),O}serialize(){if(this.isEmpty())return null;const E=a._internalPadding*this.parent.scaleFactor,m=this.getRect(E,E),O=F.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:t.AnnotationEditorType.FREETEXT,color:O,fontSize:D(this,P),value:D(this,L),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}};let M=a;T=new WeakMap,b=new WeakMap,f=new WeakMap,w=new WeakMap,L=new WeakMap,x=new WeakMap,P=new WeakMap,h=new WeakSet,Ft=function(E){const m=ee=>{this.editorDiv.style.fontSize=`calc(${ee}px * var(--scale-factor))`,this.translate(0,-(ee-D(this,P))*this.parent.scaleFactor),me(this,P,ee),he(this,c,pt).call(this)},O=D(this,P);this.parent.addCommands({cmd:()=>{m(E)},undo:()=>{m(O)},mustExec:!0,type:t.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Mt=function(E){const m=D(this,w);this.parent.addCommands({cmd:()=>{me(this,w,E),this.editorDiv.style.color=E},undo:()=>{me(this,w,m),this.editorDiv.style.color=m},mustExec:!0,type:t.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Ot=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const m=[];for(let O=0,ee=E.length;O<ee;O++){const Q=E[O].firstChild;(Q==null?void 0:Q.nodeName)==="#text"?m.push(Q.data):m.push("")}return m.join(`
`)},c=new WeakSet,pt=function(){const[E,m]=this.parent.viewportBaseDimensions,O=this.div.getBoundingClientRect();this.width=O.width/E,this.height=O.height/m},Me(M,"_freeTextDefaultContent",""),Me(M,"_l10nPromise"),Me(M,"_internalPadding",0),Me(M,"_defaultColor",null),Me(M,"_defaultFontSize",10),Me(M,"_keyboardManager",new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.prototype.commitOrRemove]])),Me(M,"_type","freetext"),n.FreeTextEditor=M},(S,n,y)=>{var f,w,L,x,P,h,e,i,l,v,A,c,r,a,g,Dt,E,It,O,Lt,ie,Nt,K,gt,$,jt,ne,Ut,_e,Bt,d,He,R,mt,U,tt,Y,nt,o,Ye,_,yt,I,rt,re,_t,Z,Wt,te,qt,fe,Gt,de,bt,Ae,it,Te,Ke,ke,vt;Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0,Object.defineProperty(n,"fitCurve",{enumerable:!0,get:function(){return F.fitCurve}});var t=y(1),s=y(6),F=y(25),M=y(7);const T=16,Ce=class extends s.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"});ae(this,g);ae(this,E);ae(this,O);ae(this,ie);ae(this,K);ae(this,$);ae(this,ne);ae(this,_e);ae(this,d);ae(this,R);ae(this,U);ae(this,Y);ae(this,o);ae(this,_);ae(this,I);ae(this,Z);ae(this,te);ae(this,fe);ae(this,de);ae(this,Ae);ae(this,Te);ae(this,ke);ae(this,f,0);ae(this,w,0);ae(this,L,0);ae(this,x,this.canvasPointermove.bind(this));ae(this,P,this.canvasPointerleave.bind(this));ae(this,h,this.canvasPointerup.bind(this));ae(this,e,this.canvasPointerdown.bind(this));ae(this,i,!1);ae(this,l,!1);ae(this,v,null);ae(this,A,null);ae(this,c,0);ae(this,r,0);ae(this,a,null);this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(pe=>[pe,se.get(pe)]))}static updateDefaultParams(se,pe){switch(se){case t.AnnotationEditorParamsType.INK_THICKNESS:Ce._defaultThickness=pe;break;case t.AnnotationEditorParamsType.INK_COLOR:Ce._defaultColor=pe;break;case t.AnnotationEditorParamsType.INK_OPACITY:Ce._defaultOpacity=pe/100;break}}updateParams(se,pe){switch(se){case t.AnnotationEditorParamsType.INK_THICKNESS:he(this,g,Dt).call(this,pe);break;case t.AnnotationEditorParamsType.INK_COLOR:he(this,E,It).call(this,pe);break;case t.AnnotationEditorParamsType.INK_OPACITY:he(this,O,Lt).call(this,pe);break}}static get defaultPropertiesToUpdate(){return[[t.AnnotationEditorParamsType.INK_THICKNESS,Ce._defaultThickness],[t.AnnotationEditorParamsType.INK_COLOR,Ce._defaultColor||s.AnnotationEditor._defaultLineColor],[t.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ce._defaultOpacity*100)]]}get propertiesToUpdate(){return[[t.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ce._defaultThickness],[t.AnnotationEditorParamsType.INK_COLOR,this.color||Ce._defaultColor||s.AnnotationEditor._defaultLineColor],[t.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ce._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(he(this,U,tt).call(this),he(this,Y,nt).call(this)),this.isAttachedToDOM||(this.parent.add(this),he(this,o,Ye).call(this)),he(this,Te,Ke).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,D(this,A).disconnect(),me(this,A,null),super.remove())}enableEditMode(){D(this,i)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",D(this,e)),this.canvas.addEventListener("pointerup",D(this,h)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",D(this,e)),this.canvas.removeEventListener("pointerup",D(this,h)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){D(this,i)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),me(this,i,!0),this.div.classList.add("disabled"),he(this,Te,Ke).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){se.button!==0||!this.isInEditMode()||D(this,i)||(this.setInForeground(),se.type!=="mouse"&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",D(this,P)),this.canvas.addEventListener("pointermove",D(this,x)),he(this,$,jt).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),he(this,ne,Ut).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){se.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(se.stopPropagation(),he(this,R,mt).call(this,se),this.setInBackground())}canvasPointerleave(se){he(this,R,mt).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,pe;this.width&&(se=this.x,pe=this.y),super.render(),Ce._l10nPromise.get("editor_ink_aria_label").then(ye=>{var ve;return(ve=this.div)==null?void 0:ve.setAttribute("aria-label",ye)});const[J,H,z,ge]=he(this,ie,Nt).call(this);if(this.setAt(J,H,0,0),this.setDims(z,ge),he(this,U,tt).call(this),this.width){const[ye,ve]=this.parent.viewportBaseDimensions;this.setAt(se*ye,pe*ve,this.width*ye,this.height*ve),me(this,l,!0),he(this,o,Ye).call(this),this.setDims(this.width*ye,this.height*ve),he(this,d,He).call(this),he(this,ke,vt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return he(this,Y,nt).call(this),this.div}setDimensions(se,pe){const J=Math.round(se),H=Math.round(pe);if(D(this,c)===J&&D(this,r)===H)return;me(this,c,J),me(this,r,H),this.canvas.style.visibility="hidden",D(this,f)&&Math.abs(D(this,f)-se/pe)>.01&&(pe=Math.ceil(se/D(this,f)),this.setDims(se,pe));const[z,ge]=this.parent.viewportBaseDimensions;this.width=se/z,this.height=pe/ge,D(this,i)&&he(this,_,yt).call(this,se,pe),he(this,o,Ye).call(this),he(this,d,He).call(this),this.canvas.style.visibility="visible"}static deserialize(se,pe){var De,Re;const J=super.deserialize(se,pe);J.thickness=se.thickness,J.color=t.Util.makeHexColor(...se.color),J.opacity=se.opacity;const[H,z]=pe.pageDimensions,ge=J.width*H,ye=J.height*z,ve=pe.scaleFactor,Se=se.thickness/2;me(J,f,ge/ye),me(J,i,!0),me(J,c,Math.round(ge)),me(J,r,Math.round(ye));for(const{bezier:Pe}of se.paths){const Le=[];J.paths.push(Le);let Ie=ve*(Pe[0]-Se),Ue=ve*(ye-Pe[1]-Se);for(let Ne=2,We=Pe.length;Ne<We;Ne+=6){const $e=ve*(Pe[Ne]-Se),Ve=ve*(ye-Pe[Ne+1]-Se),Ge=ve*(Pe[Ne+2]-Se),je=ve*(ye-Pe[Ne+3]-Se),qe=ve*(Pe[Ne+4]-Se),Xe=ve*(ye-Pe[Ne+5]-Se);Le.push([[Ie,Ue],[$e,Ve],[Ge,je],[qe,Xe]]),Ie=qe,Ue=Xe}const we=he(this,re,_t).call(this,Le);J.bezierPath2D.push(we)}const xe=he(De=J,de,bt).call(De);return me(J,L,Math.max(T,xe[2]-xe[0])),me(J,w,Math.max(T,xe[3]-xe[1])),he(Re=J,_,yt).call(Re,ge,ye),J}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),pe=this.rotation%180===0?se[3]-se[1]:se[2]-se[0],J=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:t.AnnotationEditorType.INK,color:J,thickness:this.thickness,opacity:this.opacity,paths:he(this,Z,Wt).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,pe),pageIndex:this.parent.pageIndex,rect:se,rotation:this.rotation}}};let b=Ce;f=new WeakMap,w=new WeakMap,L=new WeakMap,x=new WeakMap,P=new WeakMap,h=new WeakMap,e=new WeakMap,i=new WeakMap,l=new WeakMap,v=new WeakMap,A=new WeakMap,c=new WeakMap,r=new WeakMap,a=new WeakMap,g=new WeakSet,Dt=function(se){const pe=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=se,he(this,Te,Ke).call(this)},undo:()=>{this.thickness=pe,he(this,Te,Ke).call(this)},mustExec:!0,type:t.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,It=function(se){const pe=this.color;this.parent.addCommands({cmd:()=>{this.color=se,he(this,d,He).call(this)},undo:()=>{this.color=pe,he(this,d,He).call(this)},mustExec:!0,type:t.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,Lt=function(se){se/=100;const pe=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=se,he(this,d,He).call(this)},undo:()=>{this.opacity=pe,he(this,d,He).call(this)},mustExec:!0,type:t.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ie=new WeakSet,Nt=function(){const{width:se,height:pe,rotation:J}=this.parent.viewport;switch(J){case 90:return[0,se,se,pe];case 180:return[se,pe,se,pe];case 270:return[pe,0,se,pe];default:return[0,0,se,pe]}},K=new WeakSet,gt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,M.opacityToHex)(this.opacity)}`},$=new WeakSet,jt=function(se,pe){this.isEditing=!0,D(this,l)||(me(this,l,!0),he(this,o,Ye).call(this),this.thickness||(this.thickness=Ce._defaultThickness),this.color||(this.color=Ce._defaultColor||s.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ce._defaultOpacity)),this.currentPath.push([se,pe]),me(this,v,null),he(this,K,gt).call(this),this.ctx.beginPath(),this.ctx.moveTo(se,pe),me(this,a,()=>{D(this,a)&&(D(this,v)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):he(this,d,He).call(this),this.ctx.lineTo(...D(this,v)),me(this,v,null),this.ctx.stroke()),window.requestAnimationFrame(D(this,a)))}),window.requestAnimationFrame(D(this,a))},ne=new WeakSet,Ut=function(se,pe){const[J,H]=this.currentPath.at(-1);se===J&&pe===H||(this.currentPath.push([se,pe]),me(this,v,[se,pe]))},_e=new WeakSet,Bt=function(se,pe){var Se;this.ctx.closePath(),me(this,a,null),se=Math.min(Math.max(se,0),this.canvas.width),pe=Math.min(Math.max(pe,0),this.canvas.height);const[J,H]=this.currentPath.at(-1);(se!==J||pe!==H)&&this.currentPath.push([se,pe]);let z;if(this.currentPath.length!==1)z=(0,F.fitCurve)(this.currentPath,30,null);else{const xe=[se,pe];z=[[xe,xe.slice(),xe.slice(),xe]]}const ge=he(Se=Ce,re,_t).call(Se,z);this.currentPath.length=0;const ye=()=>{this.paths.push(z),this.bezierPath2D.push(ge),this.rebuild()},ve=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(he(this,U,tt).call(this),he(this,Y,nt).call(this)),he(this,Te,Ke).call(this))};this.parent.addCommands({cmd:ye,undo:ve,mustExec:!0})},d=new WeakSet,He=function(){if(this.isEmpty()){he(this,I,rt).call(this);return}he(this,K,gt).call(this);const{canvas:se,ctx:pe}=this;pe.setTransform(1,0,0,1,0,0),pe.clearRect(0,0,se.width,se.height),he(this,I,rt).call(this);for(const J of this.bezierPath2D)pe.stroke(J)},R=new WeakSet,mt=function(se){he(this,_e,Bt).call(this,se.offsetX,se.offsetY),this.canvas.removeEventListener("pointerleave",D(this,P)),this.canvas.removeEventListener("pointermove",D(this,x)),this.parent.addToAnnotationStorage(this)},U=new WeakSet,tt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ce._l10nPromise.get("editor_ink_canvas_aria_label").then(se=>{var pe;return(pe=this.canvas)==null?void 0:pe.setAttribute("aria-label",se)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Y=new WeakSet,nt=function(){me(this,A,new ResizeObserver(se=>{const pe=se[0].contentRect;pe.width&&pe.height&&this.setDimensions(pe.width,pe.height)})),D(this,A).observe(this.div)},o=new WeakSet,Ye=function(){if(!D(this,l))return;const[se,pe]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*se),this.canvas.height=Math.ceil(this.height*pe),he(this,I,rt).call(this)},_=new WeakSet,yt=function(se,pe){const J=he(this,Ae,it).call(this),H=(se-J)/D(this,L),z=(pe-J)/D(this,w);this.scaleFactor=Math.min(H,z)},I=new WeakSet,rt=function(){const se=he(this,Ae,it).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+se,this.translationY*this.scaleFactor+se)},re=new WeakSet,_t=function(se){const pe=new Path2D;for(let J=0,H=se.length;J<H;J++){const[z,ge,ye,ve]=se[J];J===0&&pe.moveTo(...z),pe.bezierCurveTo(ge[0],ge[1],ye[0],ye[1],ve[0],ve[1])}return pe},Z=new WeakSet,Wt=function(se,pe,J,H){const ge=[],ye=this.thickness/2;let ve,Se;for(const xe of this.paths){ve=[],Se=[];for(let De=0,Re=xe.length;De<Re;De++){const[Pe,Le,Ie,Ue]=xe[De],we=se*(Pe[0]+pe)+ye,Ne=H-se*(Pe[1]+J)-ye,We=se*(Le[0]+pe)+ye,$e=H-se*(Le[1]+J)-ye,Ve=se*(Ie[0]+pe)+ye,Ge=H-se*(Ie[1]+J)-ye,je=se*(Ue[0]+pe)+ye,qe=H-se*(Ue[1]+J)-ye;De===0&&(ve.push(we,Ne),Se.push(we,Ne)),ve.push(We,$e,Ve,Ge,je,qe),he(this,te,qt).call(this,we,Ne,We,$e,Ve,Ge,je,qe,4,Se)}ge.push({bezier:ve,points:Se})}return ge},te=new WeakSet,qt=function(se,pe,J,H,z,ge,ye,ve,Se,xe){if(he(this,fe,Gt).call(this,se,pe,J,H,z,ge,ye,ve)){xe.push(ye,ve);return}for(let De=1;De<Se-1;De++){const Re=De/Se,Pe=1-Re;let Le=Re*se+Pe*J,Ie=Re*pe+Pe*H,Ue=Re*J+Pe*z,we=Re*H+Pe*ge;const Ne=Re*z+Pe*ye,We=Re*ge+Pe*ve;Le=Re*Le+Pe*Ue,Ie=Re*Ie+Pe*we,Ue=Re*Ue+Pe*Ne,we=Re*we+Pe*We,Le=Re*Le+Pe*Ue,Ie=Re*Ie+Pe*we,xe.push(Le,Ie)}xe.push(ye,ve)},fe=new WeakSet,Gt=function(se,pe,J,H,z,ge,ye,ve){const xe=(3*J-2*se-ye)**2,De=(3*H-2*pe-ve)**2,Re=(3*z-se-2*ye)**2,Pe=(3*ge-pe-2*ve)**2;return Math.max(xe,Re)+Math.max(De,Pe)<=10},de=new WeakSet,bt=function(){let se=1/0,pe=-1/0,J=1/0,H=-1/0;for(const z of this.paths)for(const[ge,ye,ve,Se]of z){const xe=t.Util.bezierBoundingBox(...ge,...ye,...ve,...Se);se=Math.min(se,xe[0]),J=Math.min(J,xe[1]),pe=Math.max(pe,xe[2]),H=Math.max(H,xe[3])}return[se,J,pe,H]},Ae=new WeakSet,it=function(){return D(this,i)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Te=new WeakSet,Ke=function(se=!1){if(this.isEmpty())return;if(!D(this,i)){he(this,d,He).call(this);return}const pe=he(this,de,bt).call(this),J=he(this,Ae,it).call(this);me(this,L,Math.max(T,pe[2]-pe[0])),me(this,w,Math.max(T,pe[3]-pe[1]));const H=Math.ceil(J+D(this,L)*this.scaleFactor),z=Math.ceil(J+D(this,w)*this.scaleFactor),[ge,ye]=this.parent.viewportBaseDimensions;this.width=H/ge,this.height=z/ye,me(this,f,H/z),he(this,ke,vt).call(this);const ve=this.translationX,Se=this.translationY;this.translationX=-pe[0],this.translationY=-pe[1],he(this,o,Ye).call(this),he(this,d,He).call(this),me(this,c,H),me(this,r,z),this.setDims(H,z);const xe=se?J/this.scaleFactor/2:0;this.translate(ve-this.translationX-xe,Se-this.translationY-xe)},ke=new WeakSet,vt=function(){const{style:se}=this.div;D(this,f)>=1?(se.minHeight=`${T}px`,se.minWidth=`${Math.round(D(this,f)*T)}px`):(se.minWidth=`${T}px`,se.minHeight=`${Math.round(T/D(this,f))}px`)},ae(b,re),Me(b,"_defaultColor",null),Me(b,"_defaultOpacity",1),Me(b,"_defaultThickness",1),Me(b,"_l10nPromise"),Me(b,"_type","ink"),n.InkEditor=b},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.fitCurve=void 0;const t=y(26);n.fitCurve=t},S=>{function n(h,e,i){if(!Array.isArray(h))throw new TypeError("First argument should be an array");if(h.forEach(c=>{if(!Array.isArray(c)||c.some(r=>typeof r!="number")||c.length!==h[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),h=h.filter((c,r)=>r===0||!c.every((a,g)=>a===h[r-1][g])),h.length<2)return[];const l=h.length,v=L(h[1],h[0]),A=L(h[l-2],h[l-1]);return y(h,v,A,e,i)}function y(h,e,i,l,v){var c,r,a,g,k,E,m,O,ee,ie,Q,K,G;if(h.length===2)return K=x.vectorLen(x.subtract(h[0],h[1]))/3,c=[h[0],x.addArrays(h[0],x.mulItems(e,K)),x.addArrays(h[1],x.mulItems(i,K)),h[1]],[c];if(r=T(h),[c,g,E]=t(h,r,r,e,i,v),g===0||g<l)return[c];if(g<l*l)for(a=r,k=g,m=E,G=0;G<20;G++){if(a=F(c,h,a),[c,g,E]=t(h,r,a,e,i,v),g<l)return[c];if(E===m){let $=g/k;if($>.9999&&$<1.0001)break}k=g,m=E}return Q=[],O=x.subtract(h[E-1],h[E+1]),O.every($=>$===0)&&(O=x.subtract(h[E-1],h[E]),[O[0],O[1]]=[-O[1],O[0]]),ee=x.normalize(O),ie=x.mulItems(ee,-1),Q=Q.concat(y(h.slice(0,E+1),e,ee,l,v)),Q=Q.concat(y(h.slice(E),ie,i,l,v)),Q}function t(h,e,i,l,v,A){var c,r,a;return c=s(h,i,l,v),[r,a]=b(h,c,e),A&&A({bez:c,points:h,params:e,maxErr:r,maxPoint:a}),[c,r,a]}function s(h,e,i,l){var v,A,c,r,a,g,k,E,m,O,ee,ie,Q,K,G,$,X,ne=h[0],le=h[h.length-1];for(v=[ne,null,null,le],A=x.zeros_Xx2x2(e.length),Q=0,K=e.length;Q<K;Q++)$=e[Q],X=1-$,c=A[Q],c[0]=x.mulItems(i,3*$*(X*X)),c[1]=x.mulItems(l,3*X*($*$));for(r=[[0,0],[0,0]],a=[0,0],Q=0,K=h.length;Q<K;Q++)$=e[Q],c=A[Q],r[0][0]+=x.dot(c[0],c[0]),r[0][1]+=x.dot(c[0],c[1]),r[1][0]+=x.dot(c[0],c[1]),r[1][1]+=x.dot(c[1],c[1]),G=x.subtract(h[Q],P.q([ne,ne,le,le],$)),a[0]+=x.dot(c[0],G),a[1]+=x.dot(c[1],G);return g=r[0][0]*r[1][1]-r[1][0]*r[0][1],k=r[0][0]*a[1]-r[1][0]*a[0],E=a[0]*r[1][1]-a[1]*r[0][1],m=g===0?0:E/g,O=g===0?0:k/g,ie=x.vectorLen(x.subtract(ne,le)),ee=1e-6*ie,m<ee||O<ee?(v[1]=x.addArrays(ne,x.mulItems(i,ie/3)),v[2]=x.addArrays(le,x.mulItems(l,ie/3))):(v[1]=x.addArrays(ne,x.mulItems(i,m)),v[2]=x.addArrays(le,x.mulItems(l,O))),v}function F(h,e,i){return i.map((l,v)=>M(h,e[v],l))}function M(h,e,i){var l=x.subtract(P.q(h,i),e),v=P.qprime(h,i),A=x.mulMatrix(l,v),c=x.sum(x.squareItems(v))+2*x.mulMatrix(l,P.qprimeprime(h,i));return c===0?i:i-A/c}function T(h){var e=[],i,l,v;return h.forEach((A,c)=>{i=c?l+x.vectorLen(x.subtract(A,v)):0,e.push(i),l=i,v=A}),e=e.map(A=>A/l),e}function b(h,e,i){var l,v,A,c,r,a,g,k;v=0,A=Math.floor(h.length/2);const E=f(e,10);for(r=0,a=h.length;r<a;r++)g=h[r],k=w(e,i[r],E,10),c=x.subtract(P.q(e,k),g),l=c[0]*c[0]+c[1]*c[1],l>v&&(v=l,A=r);return[v,A]}var f=function(h,e){for(var i,l=[0],v=h[0],A=0,c=1;c<=e;c++)i=P.q(h,c/e),A+=x.vectorLen(x.subtract(i,v)),l.push(A),v=i;return l=l.map(r=>r/A),l};function w(h,e,i,l){if(e<0)return 0;if(e>1)return 1;for(var v,A,c,r,a,g=1;g<=l;g++)if(e<=i[g]){r=(g-1)/l,c=g/l,A=i[g-1],v=i[g],a=(e-A)/(v-A)*(c-r)+r;break}return a}function L(h,e){return x.normalize(x.subtract(h,e))}class x{static zeros_Xx2x2(e){for(var i=[];e--;)i.push([0,0]);return i}static mulItems(e,i){return e.map(l=>l*i)}static mulMatrix(e,i){return e.reduce((l,v,A)=>l+v*i[A],0)}static subtract(e,i){return e.map((l,v)=>l-i[v])}static addArrays(e,i){return e.map((l,v)=>l+i[v])}static addItems(e,i){return e.map(l=>l+i)}static sum(e){return e.reduce((i,l)=>i+l)}static dot(e,i){return x.mulMatrix(e,i)}static vectorLen(e){return Math.hypot(...e)}static divItems(e,i){return e.map(l=>l/i)}static squareItems(e){return e.map(i=>i*i)}static normalize(e){return this.divItems(e,this.vectorLen(e))}}class P{static q(e,i){var l=1-i,v=x.mulItems(e[0],l*l*l),A=x.mulItems(e[1],3*l*l*i),c=x.mulItems(e[2],3*l*i*i),r=x.mulItems(e[3],i*i*i);return x.addArrays(x.addArrays(v,A),x.addArrays(c,r))}static qprime(e,i){var l=1-i,v=x.mulItems(x.subtract(e[1],e[0]),3*l*l),A=x.mulItems(x.subtract(e[2],e[1]),6*l*i),c=x.mulItems(x.subtract(e[3],e[2]),3*i*i);return x.addArrays(x.addArrays(v,A),c)}static qprimeprime(e,i){return x.addArrays(x.mulItems(x.addArrays(x.subtract(e[2],x.mulItems(e[1],2)),e[0]),6*(1-i)),x.mulItems(x.addArrays(x.subtract(e[3],x.mulItems(e[2],2)),e[1]),6*i))}}S.exports=n,S.exports.fitCubic=y,S.exports.createTangent=L},(S,n,y)=>{var d,At,R,St,U,Et;Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var t=y(1),s=y(8),F=y(5),M=y(28),T=y(29);const b=1e3,f=9,w=new WeakSet;function L(V){return{width:V[2]-V[0],height:V[3]-V[1]}}class x{static create(o){switch(o.data.annotationType){case t.AnnotationType.LINK:return new h(o);case t.AnnotationType.TEXT:return new e(o);case t.AnnotationType.WIDGET:switch(o.data.fieldType){case"Tx":return new l(o);case"Btn":return o.data.radioButton?new A(o):o.data.checkBox?new v(o):new c(o);case"Ch":return new r(o)}return new i(o);case t.AnnotationType.POPUP:return new a(o);case t.AnnotationType.FREETEXT:return new k(o);case t.AnnotationType.LINE:return new E(o);case t.AnnotationType.SQUARE:return new m(o);case t.AnnotationType.CIRCLE:return new O(o);case t.AnnotationType.POLYLINE:return new ee(o);case t.AnnotationType.CARET:return new Q(o);case t.AnnotationType.INK:return new K(o);case t.AnnotationType.POLYGON:return new ie(o);case t.AnnotationType.HIGHLIGHT:return new G(o);case t.AnnotationType.UNDERLINE:return new $(o);case t.AnnotationType.SQUIGGLY:return new X(o);case t.AnnotationType.STRIKEOUT:return new ne(o);case t.AnnotationType.STAMP:return new le(o);case t.AnnotationType.FILEATTACHMENT:return new _e(o);default:return new P(o)}}}class P{constructor(o,{isRenderable:p=!1,ignoreBorder:_=!1,createQuadrilaterals:C=!1}={}){this.isRenderable=p,this.data=o.data,this.layer=o.layer,this.page=o.page,this.viewport=o.viewport,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,this._mouseState=o.mouseState,p&&(this.container=this._createContainer(_)),C&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(o=!1){const p=this.data,_=this.page,C=this.viewport,I=document.createElement("section"),{width:q,height:re}=L(p.rect),[ue,Z,oe,te]=C.viewBox,ce=oe-ue,fe=te-Z;I.setAttribute("data-annotation-id",p.id);const N=t.Util.normalizeRect([p.rect[0],_.view[3]-p.rect[1]+_.view[1],p.rect[2],_.view[3]-p.rect[3]+_.view[1]]);if(!o&&p.borderStyle.width>0){I.style.borderWidth=`${p.borderStyle.width}px`;const be=p.borderStyle.horizontalCornerRadius,Ae=p.borderStyle.verticalCornerRadius;if(be>0||Ae>0){const Te=`calc(${be}px * var(--scale-factor)) / calc(${Ae}px * var(--scale-factor))`;I.style.borderRadius=Te}else if(this instanceof A){const Te=`calc(${q}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;I.style.borderRadius=Te}switch(p.borderStyle.style){case t.AnnotationBorderStyleType.SOLID:I.style.borderStyle="solid";break;case t.AnnotationBorderStyleType.DASHED:I.style.borderStyle="dashed";break;case t.AnnotationBorderStyleType.BEVELED:(0,t.warn)("Unimplemented border style: beveled");break;case t.AnnotationBorderStyleType.INSET:(0,t.warn)("Unimplemented border style: inset");break;case t.AnnotationBorderStyleType.UNDERLINE:I.style.borderBottomStyle="solid";break}const Ee=p.borderColor||null;Ee?I.style.borderColor=t.Util.makeHexColor(Ee[0]|0,Ee[1]|0,Ee[2]|0):I.style.borderWidth=0}I.style.left=`${100*(N[0]-ue)/ce}%`,I.style.top=`${100*(N[1]-Z)/fe}%`;const{rotation:de}=p;return p.hasOwnCanvas||de===0?(I.style.width=`${100*q/ce}%`,I.style.height=`${100*re/fe}%`):this.setRotation(de,I),I}setRotation(o,p=this.container){const[_,C,I,q]=this.viewport.viewBox,re=I-_,ue=q-C,{width:Z,height:oe}=L(this.data.rect);let te,ce;o%180===0?(te=100*Z/re,ce=100*oe/ue):(te=100*oe/re,ce=100*Z/ue),p.style.width=`${te}%`,p.style.height=`${ce}%`,p.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){const o=(p,_,C)=>{const I=C.detail[p];C.target.style[_]=M.ColorConverters[`${I[0]}_HTML`](I.slice(1))};return(0,t.shadow)(this,"_commonActions",{display:p=>{const _=p.detail.display%2===1;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_,print:p.detail.display===0||p.detail.display===3})},print:p=>{this.annotationStorage.setValue(this.data.id,{print:p.detail.print})},hidden:p=>{this.container.style.visibility=p.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:p.detail.hidden})},focus:p=>{setTimeout(()=>p.target.focus({preventScroll:!1}),0)},userName:p=>{p.target.title=p.detail.userName},readonly:p=>{p.detail.readonly?p.target.setAttribute("readonly",""):p.target.removeAttribute("readonly")},required:p=>{this._setRequired(p.target,p.detail.required)},bgColor:p=>{o("bgColor","backgroundColor",p)},fillColor:p=>{o("fillColor","backgroundColor",p)},fgColor:p=>{o("fgColor","color",p)},textColor:p=>{o("textColor","color",p)},borderColor:p=>{o("borderColor","borderColor",p)},strokeColor:p=>{o("strokeColor","borderColor",p)},rotation:p=>{const _=p.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(o,p){const _=this._commonActions;for(const C of Object.keys(p.detail)){const I=o[C]||_[C];I&&I(p)}}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;const p=this.annotationStorage.getRawValue(this.data.id);if(!p)return;const _=this._commonActions;for(const[C,I]of Object.entries(p)){const q=_[C];if(q){const re={detail:{[C]:I},target:o};q(re),delete p[C]}}}_createQuadrilaterals(o=!1){if(!this.data.quadPoints)return null;const p=[],_=this.data.rect;for(const C of this.data.quadPoints)this.data.rect=[C[2].x,C[2].y,C[1].x,C[1].y],p.push(this._createContainer(o));return this.data.rect=_,p}_createPopup(o,p){let _=this.container;this.quadrilaterals&&(o=o||this.quadrilaterals,_=this.quadrilaterals[0]),o||(o=document.createElement("div"),o.className="popupTriggerArea",_.append(o));const I=new g({container:_,trigger:o,color:p.color,titleObj:p.titleObj,modificationDate:p.modificationDate,contentsObj:p.contentsObj,richText:p.richText,hideWrapper:!0}).render();I.style.left="100%",_.append(I)}_renderQuadrilaterals(o){for(const p of this.quadrilaterals)p.className=o;return this.quadrilaterals}render(){(0,t.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,p=null){const _=[];if(this._fieldObjects){const C=this._fieldObjects[o];if(C)for(const{page:I,id:q,exportValues:re}of C){if(I===-1||q===p)continue;const ue=typeof re=="string"?re:null,Z=document.querySelector(`[data-element-id="${q}"]`);if(Z&&!w.has(Z)){(0,t.warn)(`_getElementsByName - element not allowed: ${q}`);continue}_.push({id:q,exportValue:ue,domElement:Z})}return _}for(const C of document.getElementsByName(o)){const{id:I,exportValue:q}=C;I!==p&&w.has(C)&&_.push({id:I,exportValue:q,domElement:C})}return _}static get platform(){const o=typeof navigator<"u"?navigator.platform:"";return(0,t.shadow)(this,"platform",{isWin:o.includes("Win"),isMac:o.includes("Mac")})}}class h extends P{constructor(o,p=null){super(o,{isRenderable:!0,ignoreBorder:!!(p!=null&&p.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:p}=this,_=document.createElement("a");_.setAttribute("data-element-id",o.id);let C=!1;return o.url?(p.addLinkAttributes(_,o.url,o.newWindow),C=!0):o.action?(this._bindNamedAction(_,o.action),C=!0):o.dest?(this._bindLink(_,o.dest),C=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_,o),C=!0),o.resetForm?(this._bindResetFormAction(_,o.resetForm),C=!0):this.isTooltipOnly&&!C&&(this._bindLink(_,""),C=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((I,q)=>{const re=q===0?_:_.cloneNode();return I.append(re),I}):(this.container.className="linkAnnotation",C&&this.container.append(_),this.container)}_bindLink(o,p){o.href=this.linkService.getDestinationHash(p),o.onclick=()=>(p&&this.linkService.goToDestination(p),!1),(p||p==="")&&(o.className="internalLink")}_bindNamedAction(o,p){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(p),!1),o.className="internalLink"}_bindJSAction(o,p){o.href=this.linkService.getAnchorUrl("");const _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const C of Object.keys(p.actions)){const I=_.get(C);I&&(o[I]=()=>{var q;return(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p.id,name:C}}),!1})}o.onclick||(o.onclick=()=>!1),o.className="internalLink"}_bindResetFormAction(o,p){const _=o.onclick;if(_||(o.href=this.linkService.getAnchorUrl("")),o.className="internalLink",!this._fieldObjects){(0,t.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(o.onclick=()=>!1);return}o.onclick=()=>{var oe;_&&_();const{fields:C,refs:I,include:q}=p,re=[];if(C.length!==0||I.length!==0){const te=new Set(I);for(const ce of C){const fe=this._fieldObjects[ce]||[];for(const{id:N}of fe)te.add(N)}for(const ce of Object.values(this._fieldObjects))for(const fe of ce)te.has(fe.id)===q&&re.push(fe)}else for(const te of Object.values(this._fieldObjects))re.push(...te);const ue=this.annotationStorage,Z=[];for(const te of re){const{id:ce}=te;switch(Z.push(ce),te.type){case"text":{const N=te.defaultValue||"";ue.setValue(ce,{value:N});break}case"checkbox":case"radiobutton":{const N=te.defaultValue===te.exportValues;ue.setValue(ce,{value:N});break}case"combobox":case"listbox":{const N=te.defaultValue||"";ue.setValue(ce,{value:N});break}default:continue}const fe=document.querySelector(`[data-element-id="${ce}"]`);if(fe){if(!w.has(fe)){(0,t.warn)(`_bindResetFormAction - element not allowed: ${ce}`);continue}}else continue;fe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Z,name:"ResetForm"}})),!1}}}class e extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p})}render(){this.container.className="textAnnotation";const o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(o,this.data),this.container.append(o),this.container}}class i extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(o){const{isWin:p,isMac:_}=P.platform;return p&&o.ctrlKey||_&&o.metaKey}_setEventListener(o,p,_,C){p.includes("mouse")?o.addEventListener(p,I=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:C(I),shift:I.shiftKey,modifier:this._getKeyModifier(I)}})}):o.addEventListener(p,I=>{var q;(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:C(I)}})})}_setEventListeners(o,p,_){var C;for(const[I,q]of p)(q==="Action"||(C=this.data.actions)!=null&&C[q])&&this._setEventListener(o,I,q,_)}_setBackgroundColor(o){const p=this.data.backgroundColor||null;o.style.backgroundColor=p===null?"transparent":t.Util.makeHexColor(p[0],p[1],p[2])}_setTextStyle(o){const p=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,C=this.data.defaultAppearanceData.fontSize||f,I=o.style;let q;if(this.data.multiLine){const re=Math.abs(this.data.rect[3]-this.data.rect[1]),ue=Math.round(re/(t.LINE_FACTOR*C))||1,Z=re/ue;q=Math.min(C,Math.round(Z/t.LINE_FACTOR))}else{const re=Math.abs(this.data.rect[3]-this.data.rect[1]);q=Math.min(C,Math.round(re/t.LINE_FACTOR))}I.fontSize=`calc(${q}px * var(--scale-factor))`,I.color=t.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(I.textAlign=p[this.data.textAlignment])}_setRequired(o,p){p?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",p)}}class l extends i{constructor(o){const p=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:p})}setPropertyOnSiblings(o,p,_,C){const I=this.annotationStorage;for(const q of this._getElementsByName(o.name,o.id))q.domElement&&(q.domElement[p]=_),I.setValue(q.id,{[C]:_})}render(){var C;const o=this.annotationStorage,p=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){const I=o.getValue(p,{value:this.data.fieldValue});let q=I.formattedValue||I.value||"";const re=o.getValue(p,{charLimit:this.data.maxLen}).charLimit;re&&q.length>re&&(q=q.slice(0,re));const ue={userValue:q,formattedValue:null,valueOnFocus:""};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=q,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",q),this.data.doNotScroll&&(_.style.overflowX="hidden")),w.add(_),_.setAttribute("data-element-id",p),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=b,this._setRequired(_,this.data.required),re&&(_.maxLength=re),_.addEventListener("input",oe=>{o.setValue(p,{value:oe.target.value}),this.setPropertyOnSiblings(_,"value",oe.target.value,"value")}),_.addEventListener("resetform",oe=>{const te=this.data.defaultFieldValue??"";_.value=ue.userValue=te,ue.formattedValue=null});let Z=oe=>{const{formattedValue:te}=ue;te!=null&&(oe.target.value=te),oe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",te=>{ue.userValue&&(te.target.value=ue.userValue),ue.valueOnFocus=te.target.value}),_.addEventListener("updatefromsandbox",te=>{const ce={value(fe){ue.userValue=fe.detail.value??"",o.setValue(p,{value:ue.userValue.toString()}),fe.target.value=ue.userValue},formattedValue(fe){const{formattedValue:N}=fe.detail;ue.formattedValue=N,N!=null&&fe.target!==document.activeElement&&(fe.target.value=N),o.setValue(p,{formattedValue:N})},selRange(fe){fe.target.setSelectionRange(...fe.detail.selRange)},charLimit:fe=>{var Ae;const{charLimit:N}=fe.detail,{target:de}=fe;if(N===0){de.removeAttribute("maxLength");return}de.setAttribute("maxLength",N);let be=ue.userValue;!be||be.length<=N||(be=be.slice(0,N),de.value=ue.userValue=be,o.setValue(p,{value:be}),(Ae=this.linkService.eventBus)==null||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:be,willCommit:!0,commitKey:1,selStart:de.selectionStart,selEnd:de.selectionEnd}}))}};this._dispatchEventFromSandbox(ce,te)}),_.addEventListener("keydown",te=>{var N;let ce=-1;if(te.key==="Escape"?ce=0:te.key==="Enter"?ce=2:te.key==="Tab"&&(ce=3),ce===-1)return;const{value:fe}=te.target;ue.valueOnFocus!==fe&&(ue.userValue=fe,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:fe,willCommit:!0,commitKey:ce,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}}))});const oe=Z;Z=null,_.addEventListener("blur",te=>{var fe;const{value:ce}=te.target;ue.userValue=ce,this._mouseState.isDown&&ue.valueOnFocus!==ce&&((fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:ce,willCommit:!0,commitKey:1,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}})),oe(te)}),(C=this.data.actions)!=null&&C.Keystroke&&_.addEventListener("beforeinput",te=>{var Te;const{data:ce,target:fe}=te,{value:N,selectionStart:de,selectionEnd:be}=fe;let Ae=de,Ee=be;switch(te.inputType){case"deleteWordBackward":{const Fe=N.substring(0,de).match(/\w*[^\w]*$/);Fe&&(Ae-=Fe[0].length);break}case"deleteWordForward":{const Fe=N.substring(de).match(/^[^\w]*\w*/);Fe&&(Ee+=Fe[0].length);break}case"deleteContentBackward":de===be&&(Ae-=1);break;case"deleteContentForward":de===be&&(Ee+=1);break}te.preventDefault(),(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:N,change:ce||"",willCommit:!1,selStart:Ae,selEnd:Ee}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],te=>te.target.value)}if(Z&&_.addEventListener("blur",Z),this.data.comb){const te=(this.data.rect[2]-this.data.rect[0])/re;_.classList.add("comb"),_.style.letterSpacing=`calc(${te}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class v extends i{constructor(o){super(o,{isRenderable:o.renderForms})}render(){const o=this.annotationStorage,p=this.data,_=p.id;let C=o.getValue(_,{value:p.exportValue===p.fieldValue}).value;typeof C=="string"&&(C=C!=="Off",o.setValue(_,{value:C})),this.container.className="buttonWidgetAnnotation checkBox";const I=document.createElement("input");return w.add(I),I.setAttribute("data-element-id",_),I.disabled=p.readOnly,this._setRequired(I,this.data.required),I.type="checkbox",I.name=p.fieldName,C&&I.setAttribute("checked",!0),I.setAttribute("exportValue",p.exportValue),I.tabIndex=b,I.addEventListener("change",q=>{const{name:re,checked:ue}=q.target;for(const Z of this._getElementsByName(re,_)){const oe=ue&&Z.exportValue===p.exportValue;Z.domElement&&(Z.domElement.checked=oe),o.setValue(Z.id,{value:oe})}o.setValue(_,{value:ue})}),I.addEventListener("resetform",q=>{const re=p.defaultFieldValue||"Off";q.target.checked=re===p.exportValue}),this.enableScripting&&this.hasJSActions&&(I.addEventListener("updatefromsandbox",q=>{const re={value(ue){ue.target.checked=ue.detail.value!=="Off",o.setValue(_,{value:ue.target.checked})}};this._dispatchEventFromSandbox(re,q)}),this._setEventListeners(I,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.checked)),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class A extends i{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const o=this.annotationStorage,p=this.data,_=p.id;let C=o.getValue(_,{value:p.fieldValue===p.buttonValue}).value;typeof C=="string"&&(C=C!==p.buttonValue,o.setValue(_,{value:C}));const I=document.createElement("input");if(w.add(I),I.setAttribute("data-element-id",_),I.disabled=p.readOnly,this._setRequired(I,this.data.required),I.type="radio",I.name=p.fieldName,C&&I.setAttribute("checked",!0),I.tabIndex=b,I.addEventListener("change",q=>{const{name:re,checked:ue}=q.target;for(const Z of this._getElementsByName(re,_))o.setValue(Z.id,{value:!1});o.setValue(_,{value:ue})}),I.addEventListener("resetform",q=>{const re=p.defaultFieldValue;q.target.checked=re!=null&&re===p.buttonValue}),this.enableScripting&&this.hasJSActions){const q=p.buttonValue;I.addEventListener("updatefromsandbox",re=>{const ue={value:Z=>{const oe=q===Z.detail.value;for(const te of this._getElementsByName(Z.target.name)){const ce=oe&&te.id===_;te.domElement&&(te.domElement.checked=ce),o.setValue(te.id,{value:ce})}}};this._dispatchEventFromSandbox(ue,re)}),this._setEventListeners(I,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],re=>re.target.checked)}return this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class c extends h{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){const o=super.render();o.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(o.title=this.data.alternativeText);const p=o.lastChild;return this.enableScripting&&this.hasJSActions&&p&&(this._setDefaultPropertiesFromJS(p),p.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),o}}class r extends i{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const o=this.annotationStorage,p=this.data.id,_=o.getValue(p,{value:this.data.fieldValue}),C=document.createElement("select");w.add(C),C.setAttribute("data-element-id",p),C.disabled=this.data.readOnly,this._setRequired(C,this.data.required),C.name=this.data.fieldName,C.tabIndex=b;let I=this.data.combo&&this.data.options.length>0;this.data.combo||(C.size=this.data.options.length,this.data.multiSelect&&(C.multiple=!0)),C.addEventListener("resetform",Z=>{const oe=this.data.defaultFieldValue;for(const te of C.options)te.selected=te.value===oe});for(const Z of this.data.options){const oe=document.createElement("option");oe.textContent=Z.displayValue,oe.value=Z.exportValue,_.value.includes(Z.exportValue)&&(oe.setAttribute("selected",!0),I=!1),C.append(oe)}let q=null;if(I){const Z=document.createElement("option");Z.value=" ",Z.setAttribute("hidden",!0),Z.setAttribute("selected",!0),C.prepend(Z),q=()=>{Z.remove(),C.removeEventListener("input",q),q=null},C.addEventListener("input",q)}const re=(Z,oe)=>{const te=oe?"value":"textContent",ce=Z.target.options;return Z.target.multiple?Array.prototype.filter.call(ce,fe=>fe.selected).map(fe=>fe[te]):ce.selectedIndex===-1?null:ce[ce.selectedIndex][te]},ue=Z=>{const oe=Z.target.options;return Array.prototype.map.call(oe,te=>({displayValue:te.textContent,exportValue:te.value}))};return this.enableScripting&&this.hasJSActions?(C.addEventListener("updatefromsandbox",Z=>{const oe={value(te){q==null||q();const ce=te.detail.value,fe=new Set(Array.isArray(ce)?ce:[ce]);for(const N of C.options)N.selected=fe.has(N.value);o.setValue(p,{value:re(te,!0)})},multipleSelection(te){C.multiple=!0},remove(te){const ce=C.options,fe=te.detail.remove;ce[fe].selected=!1,C.remove(fe),ce.length>0&&Array.prototype.findIndex.call(ce,de=>de.selected)===-1&&(ce[0].selected=!0),o.setValue(p,{value:re(te,!0),items:ue(te)})},clear(te){for(;C.length!==0;)C.remove(0);o.setValue(p,{value:null,items:[]})},insert(te){const{index:ce,displayValue:fe,exportValue:N}=te.detail.insert,de=C.children[ce],be=document.createElement("option");be.textContent=fe,be.value=N,de?de.before(be):C.append(be),o.setValue(p,{value:re(te,!0),items:ue(te)})},items(te){const{items:ce}=te.detail;for(;C.length!==0;)C.remove(0);for(const fe of ce){const{displayValue:N,exportValue:de}=fe,be=document.createElement("option");be.textContent=N,be.value=de,C.append(be)}C.options.length>0&&(C.options[0].selected=!0),o.setValue(p,{value:re(te,!0),items:ue(te)})},indices(te){const ce=new Set(te.detail.indices);for(const fe of te.target.options)fe.selected=ce.has(fe.index);o.setValue(p,{value:re(te,!0)})},editable(te){te.target.disabled=!te.detail.editable}};this._dispatchEventFromSandbox(oe,Z)}),C.addEventListener("input",Z=>{var ce;const oe=re(Z,!0),te=re(Z,!1);o.setValue(p,{value:oe}),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:te,changeEx:oe,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Z=>Z.target.checked)):C.addEventListener("input",function(Z){o.setValue(p,{value:re(Z,!0)})}),this.data.combo&&this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class a extends P{constructor(o){var _,C,I;const p=!!((_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p})}render(){const o=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",o.includes(this.data.parentType))return this.container;const p=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(p);if(_.length===0)return this.container;const C=new g({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),I=this.page,q=t.Util.normalizeRect([this.data.parentRect[0],I.view[3]-this.data.parentRect[1]+I.view[1],this.data.parentRect[2],I.view[3]-this.data.parentRect[3]+I.view[1]]),re=q[0]+this.data.parentRect[2]-this.data.parentRect[0],ue=q[1],[Z,oe,te,ce]=this.viewport.viewBox,fe=te-Z,N=ce-oe;return this.container.style.left=`${100*(re-Z)/fe}%`,this.container.style.top=`${100*(ue-oe)/N}%`,this.container.append(C.render()),this.container}}class g{constructor(o){this.container=o.container,this.trigger=o.trigger,this.color=o.color,this.titleObj=o.titleObj,this.modificationDate=o.modificationDate,this.contentsObj=o.contentsObj,this.richText=o.richText,this.hideWrapper=o.hideWrapper||!1,this.pinned=!1}render(){var re,ue;const p=document.createElement("div");p.className="popupWrapper",this.hideElement=this.hideWrapper?p:this.container,this.hideElement.hidden=!0;const _=document.createElement("div");_.className="popup";const C=this.color;if(C){const Z=.7*(255-C[0])+C[0],oe=.7*(255-C[1])+C[1],te=.7*(255-C[2])+C[2];_.style.backgroundColor=t.Util.makeHexColor(Z|0,oe|0,te|0)}const I=document.createElement("h1");I.dir=this.titleObj.dir,I.textContent=this.titleObj.str,_.append(I);const q=s.PDFDateString.toDateObject(this.modificationDate);if(q){const Z=document.createElement("span");Z.className="popupDate",Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:q.toLocaleDateString(),time:q.toLocaleTimeString()}),_.append(Z)}if((re=this.richText)!=null&&re.str&&(!((ue=this.contentsObj)!=null&&ue.str)||this.contentsObj.str===this.richText.str))T.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{const Z=this._formatContents(this.contentsObj);_.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),p.append(_),p}_formatContents({str:o,dir:p}){const _=document.createElement("p");_.className="popupContent",_.dir=p;const C=o.split(/(?:\r\n?|\n)/);for(let I=0,q=C.length;I<q;++I){const re=C[I];_.append(document.createTextNode(re)),I<q-1&&_.append(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(o=!1){o&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(o=!0){o&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class k extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0}),this.textContent=o.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const o=document.createElement("div");o.className="annotationTextContent",o.setAttribute("role","comment");for(const p of this.textContent){const _=document.createElement("span");_.textContent=p,o.append(_)}this.container.append(o)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class E extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const o=this.data,{width:p,height:_}=L(o.rect),C=this.svgFactory.create(p,_,!0),I=this.svgFactory.createElement("svg:line");return I.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),I.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),I.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),I.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),I.setAttribute("stroke-width",o.borderStyle.width||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),C.append(I),this.container.append(C),this._createPopup(I,o),this.container}}class m extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const o=this.data,{width:p,height:_}=L(o.rect),C=this.svgFactory.create(p,_,!0),I=o.borderStyle.width,q=this.svgFactory.createElement("svg:rect");return q.setAttribute("x",I/2),q.setAttribute("y",I/2),q.setAttribute("width",p-I),q.setAttribute("height",_-I),q.setAttribute("stroke-width",I||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),C.append(q),this.container.append(C),this._createPopup(q,o),this.container}}class O extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const o=this.data,{width:p,height:_}=L(o.rect),C=this.svgFactory.create(p,_,!0),I=o.borderStyle.width,q=this.svgFactory.createElement("svg:ellipse");return q.setAttribute("cx",p/2),q.setAttribute("cy",_/2),q.setAttribute("rx",p/2-I/2),q.setAttribute("ry",_/2-I/2),q.setAttribute("stroke-width",I||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),C.append(q),this.container.append(C),this._createPopup(q,o),this.container}}class ee extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const o=this.data,{width:p,height:_}=L(o.rect),C=this.svgFactory.create(p,_,!0);let I=[];for(const re of o.vertices){const ue=re.x-o.rect[0],Z=o.rect[3]-re.y;I.push(ue+","+Z)}I=I.join(" ");const q=this.svgFactory.createElement(this.svgElementName);return q.setAttribute("points",I),q.setAttribute("stroke-width",o.borderStyle.width||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),C.append(q),this.container.append(C),this._createPopup(q,o),this.container}}class ie extends ee{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class K extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const o=this.data,{width:p,height:_}=L(o.rect),C=this.svgFactory.create(p,_,!0);for(const I of o.inkLists){let q=[];for(const ue of I){const Z=ue.x-o.rect[0],oe=o.rect[3]-ue.y;q.push(`${Z},${oe}`)}q=q.join(" ");const re=this.svgFactory.createElement(this.svgElementName);re.setAttribute("points",q),re.setAttribute("stroke-width",o.borderStyle.width||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),this._createPopup(re,o),C.append(re)}return this.container.append(C),this.container}}class G extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ne extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class le extends P{constructor(o){var _,C,I;const p=!!(o.data.hasPopup||(_=o.data.titleObj)!=null&&_.str||(C=o.data.contentsObj)!=null&&C.str||(I=o.data.richText)!=null&&I.str);super(o,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _e extends P{constructor(o){var C;super(o,{isRenderable:!0});const{filename:p,content:_}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(p),this.content=_,(C=this.linkService.eventBus)==null||C.dispatch("fileattachmentannotation",{source:this,filename:p,content:_})}render(){var p,_;this.container.className="fileAttachmentAnnotation";const o=document.createElement("div");return o.className="popupTriggerArea",o.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((p=this.data.titleObj)!=null&&p.str||(_=this.data.contentsObj)!=null&&_.str||this.data.richText)&&this._createPopup(o,this.data),this.container.append(o),this.container}_download(){var o;(o=this.downloadManager)==null||o.openOrDownloadData(this.container,this.content,this.filename)}}const Y=class{static render(o){var re,ue;const{annotations:p,div:_,viewport:C,accessibilityManager:I}=o;he(this,R,St).call(this,_,C);let q=0;for(const Z of p){if(Z.annotationType!==t.AnnotationType.POPUP){const{width:te,height:ce}=L(Z.rect);if(te<=0||ce<=0)continue}const oe=x.create({data:Z,layer:_,page:o.page,viewport:C,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:o.annotationStorage||new F.AnnotationStorage,enableScripting:o.enableScripting,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects,mouseState:o.mouseState||{isDown:!1}});if(oe.isRenderable){const te=oe.render();if(Z.hidden&&(te.style.visibility="hidden"),Array.isArray(te))for(const ce of te)ce.style.zIndex=q++,he(re=Y,d,At).call(re,ce,Z.id,_,I);else te.style.zIndex=q++,oe instanceof a?_.prepend(te):he(ue=Y,d,At).call(ue,te,Z.id,_,I)}}he(this,U,Et).call(this,_,o.annotationCanvasMap)}static update(o){const{annotationCanvasMap:p,div:_,viewport:C}=o;he(this,R,St).call(this,_,C),he(this,U,Et).call(this,_,p),_.hidden=!1}};let B=Y;d=new WeakSet,At=function(o,p,_,C){const I=o.firstChild||o;I.id=`${s.AnnotationPrefix}${p}`,_.append(o),C==null||C.moveElementInDOM(_,o,I,!1)},R=new WeakSet,St=function(o,{width:p,height:_,rotation:C}){const{style:I}=o,q=C%180!==0,re=Math.floor(p)+"px",ue=Math.floor(_)+"px";I.width=q?ue:re,I.height=q?re:ue,o.setAttribute("data-main-rotation",C)},U=new WeakSet,Et=function(o,p){if(p){for(const[_,C]of p){const I=o.querySelector(`[data-annotation-id="${_}"]`);if(!I)continue;const{firstChild:q}=I;q?q.nodeName==="CANVAS"?q.replaceWith(C):q.before(C):I.append(C)}p.clear()}},ae(B,d),ae(B,R),ae(B,U),n.AnnotationLayer=B},(S,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function y(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}class t{static CMYK_G([F,M,T,b]){return["G",1-Math.min(1,.3*F+.59*T+.11*M+b)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const M=y(F);return`#${M}${M}${M}`}static RGB_G([F,M,T]){return["G",.3*F+.59*M+.11*T]}static RGB_HTML([F,M,T]){const b=y(F),f=y(M),w=y(T);return`#${b}${f}${w}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,M,T,b]){return["RGB",1-Math.min(1,F+b),1-Math.min(1,T+b),1-Math.min(1,M+b)]}static CMYK_HTML(F){const M=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(M)}static RGB_CMYK([F,M,T]){const b=1-F,f=1-M,w=1-T,L=Math.min(b,f,w);return["CMYK",b,f,w,L]}}n.ColorConverters=t},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var t=y(20);class s{static setupStorage(M,T,b,f,w){const L=f.getValue(T,{value:null});switch(b.name){case"textarea":if(L.value!==null&&(M.textContent=L.value),w==="print")break;M.addEventListener("input",x=>{f.setValue(T,{value:x.target.value})});break;case"input":if(b.attributes.type==="radio"||b.attributes.type==="checkbox"){if(L.value===b.attributes.xfaOn?M.setAttribute("checked",!0):L.value===b.attributes.xfaOff&&M.removeAttribute("checked"),w==="print")break;M.addEventListener("change",x=>{f.setValue(T,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&M.setAttribute("value",L.value),w==="print")break;M.addEventListener("input",x=>{f.setValue(T,{value:x.target.value})})}break;case"select":if(L.value!==null)for(const x of b.children)x.attributes.value===L.value&&(x.attributes.selected=!0);M.addEventListener("input",x=>{const P=x.target.options,h=P.selectedIndex===-1?"":P[P.selectedIndex].value;f.setValue(T,{value:h})});break}}static setAttributes({html:M,element:T,storage:b=null,intent:f,linkService:w}){const{attributes:L}=T,x=M instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${f}`);for(const[P,h]of Object.entries(L))if(h!=null)switch(P){case"class":h.length&&M.setAttribute(P,h.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",h);break;case"style":Object.assign(M.style,h);break;case"textContent":M.textContent=h;break;default:(!x||P!=="href"&&P!=="newWindow")&&M.setAttribute(P,h)}x&&w.addLinkAttributes(M,L.href,L.newWindow),b&&L.dataId&&this.setupStorage(M,L.dataId,T,b)}static render(M){var e;const T=M.annotationStorage,b=M.linkService,f=M.xfaHtml,w=M.intent||"display",L=document.createElement(f.name);f.attributes&&this.setAttributes({html:L,element:f,intent:w,linkService:b});const x=[[f,-1,L]],P=M.div;if(P.append(L),M.viewport){const i=`matrix(${M.viewport.transform.join(",")})`;P.style.transform=i}w!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const h=[];for(;x.length>0;){const[i,l,v]=x.at(-1);if(l+1===i.children.length){x.pop();continue}const A=i.children[++x.at(-1)[1]];if(A===null)continue;const{name:c}=A;if(c==="#text"){const a=document.createTextNode(A.value);h.push(a),v.append(a);continue}let r;if((e=A==null?void 0:A.attributes)!=null&&e.xmlns?r=document.createElementNS(A.attributes.xmlns,c):r=document.createElement(c),v.append(r),A.attributes&&this.setAttributes({html:r,element:A,storage:T,intent:w,linkService:b}),A.children&&A.children.length>0)x.push([A,-1,r]);else if(A.value){const a=document.createTextNode(A.value);t.XfaText.shouldBuildText(c)&&h.push(a),r.append(a)}}for(const i of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:h}}static update(M){const T=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=T,M.div.hidden=!1}}n.XfaLayer=s},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=v;var t=y(1),s=y(8);const F=1e5,M=30,T=.8,b=new Map,f=/^\s+$/g;function w(A,c){const r=b.get(A);if(r)return r;c.save(),c.font=`${M}px ${A}`;const a=c.measureText("");let g=a.fontBoundingBoxAscent,k=Math.abs(a.fontBoundingBoxDescent);if(g){c.restore();const m=g/(g+k);return b.set(A,m),m}c.strokeStyle="red",c.clearRect(0,0,M,M),c.strokeText("g",0,0);let E=c.getImageData(0,0,M,M).data;k=0;for(let m=E.length-1-3;m>=0;m-=4)if(E[m]>0){k=Math.ceil(m/4/M);break}c.clearRect(0,0,M,M),c.strokeText("A",0,M),E=c.getImageData(0,0,M,M).data,g=0;for(let m=0,O=E.length;m<O;m+=4)if(E[m]>0){g=M-Math.floor(m/4/M);break}if(c.restore(),g){const m=g/(g+k);return b.set(A,m),m}return b.set(A,T),T}function L(A,c,r,a){const g=document.createElement("span"),k=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,fontSize:0};A._textDivs.push(g);const E=t.Util.transform(A._viewport.transform,c.transform);let m=Math.atan2(E[1],E[0]);const O=r[c.fontName];O.vertical&&(m+=Math.PI/2);const ee=Math.hypot(E[2],E[3]),ie=ee*w(O.fontFamily,a);let Q,K;m===0?(Q=E[4],K=E[5]-ie):(Q=E[4]+ie*Math.sin(m),K=E[5]-ie*Math.cos(m)),g.style.left=`${Q}px`,g.style.top=`${K}px`,g.style.fontSize=`${ee}px`,g.style.fontFamily=O.fontFamily,k.fontSize=ee,g.setAttribute("role","presentation"),g.textContent=c.str,g.dir=c.dir,A._fontInspectorEnabled&&(g.dataset.fontName=c.fontName),m!==0&&(k.angle=m*(180/Math.PI));let G=!1;if(c.str.length>1||A._enhanceTextSelection&&f.test(c.str))G=!0;else if(c.str!==" "&&c.transform[0]!==c.transform[3]){const $=Math.abs(c.transform[0]),X=Math.abs(c.transform[3]);$!==X&&Math.max($,X)/Math.min($,X)>1.5&&(G=!0)}if(G&&(O.vertical?k.canvasWidth=c.height*A._viewport.scale:k.canvasWidth=c.width*A._viewport.scale),A._textDivProperties.set(g,k),A._textContentStream&&A._layoutText(g),A._enhanceTextSelection&&k.hasText){let $=1,X=0;m!==0&&($=Math.cos(m),X=Math.sin(m));const ne=(O.vertical?c.height:c.width)*A._viewport.scale,le=ee;let _e,B;m!==0?(_e=[$,X,-X,$,Q,K],B=t.Util.getAxialAlignedBoundingBox([0,0,ne,le],_e)):B=[Q,K,Q+ne,K+le],A._bounds.push({left:B[0],top:B[1],right:B[2],bottom:B[3],div:g,size:[ne,le],m:_e})}}function x(A){if(A._canceled)return;const c=A._textDivs,r=A._capability,a=c.length;if(a>F){A._renderingDone=!0,r.resolve();return}if(!A._textContentStream)for(let g=0;g<a;g++)A._layoutText(c[g]);A._renderingDone=!0,r.resolve()}function P(A,c,r){let a=0;for(let g=0;g<r;g++){const k=A[c++];k>0&&(a=a?Math.min(k,a):k)}return a}function h(A){const c=A._bounds,r=A._viewport,a=e(r.width,r.height,c);for(let g=0;g<a.length;g++){const k=c[g].div,E=A._textDivProperties.get(k);if(E.angle===0){E.paddingLeft=c[g].left-a[g].left,E.paddingTop=c[g].top-a[g].top,E.paddingRight=a[g].right-c[g].right,E.paddingBottom=a[g].bottom-c[g].bottom,A._textDivProperties.set(k,E);continue}const m=a[g],O=c[g],ee=O.m,ie=ee[0],Q=ee[1],K=[[0,0],[0,O.size[1]],[O.size[0],0],O.size],G=new Float64Array(64);for(let X=0,ne=K.length;X<ne;X++){const le=t.Util.applyTransform(K[X],ee);G[X+0]=ie&&(m.left-le[0])/ie,G[X+4]=Q&&(m.top-le[1])/Q,G[X+8]=ie&&(m.right-le[0])/ie,G[X+12]=Q&&(m.bottom-le[1])/Q,G[X+16]=Q&&(m.left-le[0])/-Q,G[X+20]=ie&&(m.top-le[1])/ie,G[X+24]=Q&&(m.right-le[0])/-Q,G[X+28]=ie&&(m.bottom-le[1])/ie,G[X+32]=ie&&(m.left-le[0])/-ie,G[X+36]=Q&&(m.top-le[1])/-Q,G[X+40]=ie&&(m.right-le[0])/-ie,G[X+44]=Q&&(m.bottom-le[1])/-Q,G[X+48]=Q&&(m.left-le[0])/Q,G[X+52]=ie&&(m.top-le[1])/-ie,G[X+56]=Q&&(m.right-le[0])/Q,G[X+60]=ie&&(m.bottom-le[1])/-ie}const $=1+Math.min(Math.abs(ie),Math.abs(Q));E.paddingLeft=P(G,32,16)/$,E.paddingTop=P(G,48,16)/$,E.paddingRight=P(G,0,16)/$,E.paddingBottom=P(G,16,16)/$,A._textDivProperties.set(k,E)}}function e(A,c,r){const a=r.map(function(k,E){return{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom,index:E,x1New:void 0,x2New:void 0}});i(A,a);const g=new Array(r.length);for(const k of a){const E=k.index;g[E]={left:k.x1New,top:0,right:k.x2New,bottom:0}}r.map(function(k,E){const m=g[E],O=a[E];O.x1=k.top,O.y1=A-m.right,O.x2=k.bottom,O.y2=A-m.left,O.index=E,O.x1New=void 0,O.x2New=void 0}),i(c,a);for(const k of a){const E=k.index;g[E].top=k.x1New,g[E].bottom=k.x2New}return g}function i(A,c){c.sort(function(g,k){return g.x1-k.x1||g.index-k.index});const a=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of c){let k=0;for(;k<a.length&&a[k].end<=g.y1;)k++;let E=a.length-1;for(;E>=0&&a[E].start>=g.y2;)E--;let m,O,ee,ie,Q=-1/0;for(ee=k;ee<=E;ee++){m=a[ee],O=m.boundary;let $;O.x2>g.x1?$=O.index>g.index?O.x1New:g.x1:O.x2New===void 0?$=(O.x2+g.x1)/2:$=O.x2New,$>Q&&(Q=$)}for(g.x1New=Q,ee=k;ee<=E;ee++)m=a[ee],O=m.boundary,O.x2New===void 0?O.x2>g.x1?O.index>g.index&&(O.x2New=O.x2):O.x2New=Q:O.x2New>Q&&(O.x2New=Math.max(Q,O.x2));const K=[];let G=null;for(ee=k;ee<=E;ee++){m=a[ee],O=m.boundary;const $=O.x2>g.x2?O:g;G===$?K.at(-1).end=m.end:(K.push({start:m.start,end:m.end,boundary:$}),G=$)}for(a[k].start<g.y1&&(K[0].start=g.y1,K.unshift({start:a[k].start,end:g.y1,boundary:a[k].boundary})),g.y2<a[E].end&&(K.at(-1).end=g.y2,K.push({start:g.y2,end:a[E].end,boundary:a[E].boundary})),ee=k;ee<=E;ee++){if(m=a[ee],O=m.boundary,O.x2New!==void 0)continue;let $=!1;for(ie=k-1;!$&&ie>=0&&a[ie].start>=O.y1;ie--)$=a[ie].boundary===O;for(ie=E+1;!$&&ie<a.length&&a[ie].end<=O.y2;ie++)$=a[ie].boundary===O;for(ie=0;!$&&ie<K.length;ie++)$=K[ie].boundary===O;$||(O.x2New=Q)}Array.prototype.splice.apply(a,[k,E-k+1,...K])}for(const g of a){const k=g.boundary;k.x2New===void 0&&(k.x2New=Math.max(A,k.x2))}}class l{constructor({textContent:c,textContentStream:r,container:a,viewport:g,textDivs:k,textContentItemsStr:E,enhanceTextSelection:m}){var O;m&&(0,s.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=c,this._textContentStream=r,this._container=a,this._document=a.ownerDocument,this._viewport=g,this._textDivs=k||[],this._textContentItemsStr=E||[],this._enhanceTextSelection=!!m,this._fontInspectorEnabled=!!((O=globalThis.FontInspector)!=null&&O.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(c,r){for(let a=0,g=c.length;a<g;a++){if(c[a].str===void 0){if(c[a].type==="beginMarkedContentProps"||c[a].type==="beginMarkedContent"){const k=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),c[a].id!==null&&this._container.setAttribute("id",`${c[a].id}`),k.append(this._container)}else c[a].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(c[a].str),L(this,c[a],r,this._layoutTextCtx)}}_layoutText(c){const r=this._textDivProperties.get(c);let a="";if(r.canvasWidth!==0&&r.hasText){const{fontFamily:g}=c.style,{fontSize:k}=r;(k!==this._layoutTextLastFontSize||g!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${k*this._devicePixelRatio}px ${g}`,this._layoutTextLastFontSize=k,this._layoutTextLastFontFamily=g);const{width:E}=this._layoutTextCtx.measureText(c.textContent);if(E>0){const m=this._devicePixelRatio*r.canvasWidth/E;this._enhanceTextSelection&&(r.scale=m),a=`scaleX(${m})`}}if(r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(this._enhanceTextSelection&&(r.originalTransform=a),c.style.transform=a),r.hasText&&this._container.append(c),r.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(c=0){const r=(0,t.createPromiseCapability)();let a=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=M,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent){const k=this._textContent.items,E=this._textContent.styles;this._processItems(k,E),r.resolve()}else if(this._textContentStream){const k=()=>{this._reader.read().then(({value:E,done:m})=>{if(m){r.resolve();return}Object.assign(a,E.styles),this._processItems(E.items,a),k()},r.reject)};this._reader=this._textContentStream.getReader(),k()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');r.promise.then(()=>{a=null,c?this._renderTimer=setTimeout(()=>{x(this),this._renderTimer=null},c):x(this)},this._capability.reject)}expandTextDivs(c=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(h(this),this._bounds=null);const r=[],a=[];for(let g=0,k=this._textDivs.length;g<k;g++){const E=this._textDivs[g],m=this._textDivProperties.get(E);m.hasText&&(c?(r.length=0,a.length=0,m.originalTransform&&r.push(m.originalTransform),m.paddingTop>0?(a.push(`${m.paddingTop}px`),r.push(`translateY(${-m.paddingTop}px)`)):a.push(0),m.paddingRight>0?a.push(`${m.paddingRight/m.scale}px`):a.push(0),m.paddingBottom>0?a.push(`${m.paddingBottom}px`):a.push(0),m.paddingLeft>0?(a.push(`${m.paddingLeft/m.scale}px`),r.push(`translateX(${-m.paddingLeft/m.scale}px)`)):a.push(0),E.style.padding=a.join(" "),r.length&&(E.style.transform=r.join(" "))):(E.style.padding=null,E.style.transform=m.originalTransform))}}}n.TextLayerRenderTask=l;function v(A){const c=new l({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return c._render(A.timeout),c}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var t=y(8),s=y(1),F=y(3);let M=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};n.SVGGraphics=M;{let e=function(r){let a=[];const g=[];for(const k of r){if(k.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),g.push(a),a=a.at(-1).items;continue}k.fn==="restore"?a=g.pop():a.push(k)}return a},i=function(r){if(Number.isInteger(r))return r.toString();const a=r.toFixed(10);let g=a.length-1;if(a[g]!=="0")return a;do g--;while(a[g]==="0");return a.substring(0,a[g]==="."?g:g+1)},l=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${i(r[0])} ${i(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const a=Math.acos(r[0])*180/Math.PI;return`rotate(${i(a)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${i(r[4])} ${i(r[5])})`;return`matrix(${i(r[0])} ${i(r[1])} ${i(r[2])} ${i(r[3])} ${i(r[4])} ${i(r[5])})`};const T={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/1999/xlink",w=["butt","round","square"],L=["miter","round","bevel"],x=function(r,a="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([r],{type:a}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${a};base64,`;for(let m=0,O=r.length;m<O;m+=3){const ee=r[m]&255,ie=r[m+1]&255,Q=r[m+2]&255,K=ee>>2,G=(ee&3)<<4|ie>>4,$=m+1<O?(ie&15)<<2|Q>>6:64,X=m+2<O?Q&63:64;E+=k[K]+k[G]+k[$]+k[X]}return E},P=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,g=new Int32Array(256);for(let Q=0;Q<256;Q++){let K=Q;for(let G=0;G<8;G++)K&1?K=3988292384^K>>1&2147483647:K=K>>1&2147483647;g[Q]=K}function k(Q,K,G){let $=-1;for(let X=K;X<G;X++){const ne=($^Q[X])&255,le=g[ne];$=$>>>8^le}return $^-1}function E(Q,K,G,$){let X=$;const ne=K.length;G[X]=ne>>24&255,G[X+1]=ne>>16&255,G[X+2]=ne>>8&255,G[X+3]=ne&255,X+=4,G[X]=Q.charCodeAt(0)&255,G[X+1]=Q.charCodeAt(1)&255,G[X+2]=Q.charCodeAt(2)&255,G[X+3]=Q.charCodeAt(3)&255,X+=4,G.set(K,X),X+=K.length;const le=k(G,$+4,X);G[X]=le>>24&255,G[X+1]=le>>16&255,G[X+2]=le>>8&255,G[X+3]=le&255}function m(Q,K,G){let $=1,X=0;for(let ne=K;ne<G;++ne)$=($+(Q[ne]&255))%65521,X=(X+$)%65521;return X<<16|$}function O(Q){if(!F.isNodeJS)return ee(Q);try{let K;parseInt(process.versions.node)>=8?K=Q:K=Buffer.from(Q);const G=require$$5.deflateSync(K,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(K){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return ee(Q)}function ee(Q){let K=Q.length;const G=65535,$=Math.ceil(K/G),X=new Uint8Array(2+K+$*5+4);let ne=0;X[ne++]=120,X[ne++]=156;let le=0;for(;K>G;)X[ne++]=0,X[ne++]=255,X[ne++]=255,X[ne++]=0,X[ne++]=0,X.set(Q.subarray(le,le+G),ne),ne+=G,le+=G,K-=G;X[ne++]=1,X[ne++]=K&255,X[ne++]=K>>8&255,X[ne++]=~K&65535&255,X[ne++]=(~K&65535)>>8&255,X.set(Q.subarray(le),ne),ne+=Q.length-le;const _e=m(Q,0,Q.length);return X[ne++]=_e>>24&255,X[ne++]=_e>>16&255,X[ne++]=_e>>8&255,X[ne++]=_e&255,X}function ie(Q,K,G,$){const X=Q.width,ne=Q.height;let le,_e,B;const d=Q.data;switch(K){case s.ImageKind.GRAYSCALE_1BPP:_e=0,le=1,B=X+7>>3;break;case s.ImageKind.RGB_24BPP:_e=2,le=8,B=X*3;break;case s.ImageKind.RGBA_32BPP:_e=6,le=8,B=X*4;break;default:throw new Error("invalid format")}const u=new Uint8Array((1+B)*ne);let R=0,j=0;for(let p=0;p<ne;++p)u[R++]=0,u.set(d.subarray(j,j+B),R),j+=B,R+=B;if(K===s.ImageKind.GRAYSCALE_1BPP&&$){R=0;for(let p=0;p<ne;p++){R++;for(let _=0;_<B;_++)u[R++]^=255}}const U=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,X&255,ne>>24&255,ne>>16&255,ne>>8&255,ne&255,le,_e,0,0,0]),W=O(u),Y=r.length+a*3+U.length+W.length,V=new Uint8Array(Y);let o=0;return V.set(r,o),o+=r.length,E("IHDR",U,V,o),o+=a+U.length,E("IDATA",W,V,o),o+=a+W.length,E("IEND",new Uint8Array(0),V,o),x(V,"image/png",G)}return function(K,G,$){const X=K.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:K.kind;return ie(K,X,G,$)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=T.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=T.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,g){this.x=a,this.y=g}}let v=0,A=0,c=0;n.SVGGraphics=M=class{constructor(r,a,g=!1){(0,t.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new t.DOMSVGFactory,this.current=new h,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const k in s.OPS)this._operatorIdMapping[s.OPS[k]]=k}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const a=r.fnArray,g=r.argsArray;for(let k=0,E=a.length;k<E;k++)if(a[k]===s.OPS.dependency)for(const m of g[k]){const O=m.startsWith("g_")?this.commonObjs:this.objs,ee=new Promise(ie=>{O.get(m,ie)});this.current.dependencies.push(ee)}return Promise.all(this.current.dependencies)}transform(r,a,g,k,E,m){const O=[r,a,g,k,E,m];this.transformMatrix=s.Util.transform(this.transformMatrix,O),this.tgrp=null}getSVG(r,a){this.viewport=a;const g=this._initialize(a);return this.loadDependencies(r).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),g))}convertOpList(r){const a=this._operatorIdMapping,g=r.argsArray,k=r.fnArray,E=[];for(let m=0,O=k.length;m<O;m++){const ee=k[m];E.push({fnId:ee,fn:a[ee],args:g[m]})}return e(E)}executeOpTree(r){for(const a of r){const g=a.fn,k=a.fnId,E=a.args;switch(k|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(E);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case s.OPS.setFont:this.setFont(E);break;case s.OPS.showText:this.showText(E[0]);break;case s.OPS.showSpacedText:this.showText(E[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(E[0],E[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case s.OPS.setHScale:this.setHScale(E[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case s.OPS.setTextRise:this.setTextRise(E[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case s.OPS.setLineWidth:this.setLineWidth(E[0]);break;case s.OPS.setLineJoin:this.setLineJoin(E[0]);break;case s.OPS.setLineCap:this.setLineCap(E[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case s.OPS.setFillColorN:this.setFillColorN(E);break;case s.OPS.shadingFill:this.shadingFill(E[0]);break;case s.OPS.setDash:this.setDash(E[0],E[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case s.OPS.setFlatness:this.setFlatness(E[0]);break;case s.OPS.setGState:this.setGState(E[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case s.OPS.constructPath:this.constructPath(E[0],E[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,s.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,a,g,k,E,m){const O=this.current;O.textMatrix=O.lineMatrix=[r,a,g,k,E,m],O.textMatrixScale=Math.hypot(r,a),O.x=O.lineX=0,O.y=O.lineY=0,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${i(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",i(-O.y)),O.txtElement=this.svgFactory.createElement("svg:text"),O.txtElement.append(O.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=s.IDENTITY_MATRIX,r.lineMatrix=s.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,a){const g=this.current;g.x=g.lineX+=r,g.y=g.lineY+=a,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${i(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",i(-g.y))}showText(r){const a=this.current,g=a.font,k=a.fontSize;if(k===0)return;const E=a.fontSizeScale,m=a.charSpacing,O=a.wordSpacing,ee=a.fontDirection,ie=a.textHScale*ee,Q=g.vertical,K=Q?1:-1,G=g.defaultVMetrics,$=k*a.fontMatrix[0];let X=0;for(const _e of r){if(_e===null){X+=ee*O;continue}else if(typeof _e=="number"){X+=K*_e*k/1e3;continue}const B=(_e.isSpace?O:0)+m,d=_e.fontChar;let u,R,j=_e.width;if(Q){let W;const Y=_e.vmetric||G;W=_e.vmetric?Y[1]:j*.5,W=-W*$;const V=Y[2]*$;j=Y?-Y[0]:j,u=W/E,R=(X+V)/E}else u=X/E,R=0;(_e.isInFont||g.missingFile)&&(a.xcoords.push(a.x+u),Q&&a.ycoords.push(-a.y+R),a.tspan.textContent+=d);let U;Q?U=j*$-B*ee:U=j*$+B*ee,X+=U}a.tspan.setAttributeNS(null,"x",a.xcoords.map(i).join(" ")),Q?a.tspan.setAttributeNS(null,"y",a.ycoords.map(i).join(" ")):a.tspan.setAttributeNS(null,"y",i(-a.y)),Q?a.y-=X:a.x+=X*ie,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${i(a.fontSize)}px`),a.fontStyle!==T.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==T.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const ne=a.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(ne===s.TextRenderingMode.FILL||ne===s.TextRenderingMode.FILL_STROKE?(a.fillColor!==T.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),ne===s.TextRenderingMode.STROKE||ne===s.TextRenderingMode.FILL_STROKE){const _e=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,_e)}let le=a.textMatrix;a.textRise!==0&&(le=le.slice(),le[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${l(le)} scale(${i(ie)}, -1)`),a.txtElement.setAttributeNS(b,"xml:space","preserve"),a.txtElement.append(a.tspan),a.txtgrp.append(a.txtElement),this._ensureTransformGroup().append(a.txtElement)}setLeadingMoveText(r,a){this.setLeading(-a),this.moveText(r,a)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const a=x(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${a}); }
`}setFont(r){const a=this.current,g=this.commonObjs.get(r[0]);let k=r[1];a.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),a.fontMatrix=g.fontMatrix||s.FONT_IDENTITY_MATRIX;let E="normal";g.black?E="900":g.bold&&(E="bold");const m=g.italic?"italic":"normal";k<0?(k=-k,a.fontDirection=-1):a.fontDirection=1,a.fontSize=k,a.fontFamily=g.loadedName,a.fontWeight=E,a.fontStyle=m,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",i(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;const r=this.current;r.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=r.txtElement)!=null&&a.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=w[r]}setLineJoin(r){this.current.lineJoin=L[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,a,g){this.current.strokeColor=s.Util.makeHexColor(r,a,g)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,a,g){this.current.fillColor=s.Util.makeHexColor(r,a,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const a=this.viewport.width,g=this.viewport.height,k=s.Util.inverseTransform(this.transformMatrix),E=s.Util.applyTransform([0,0],k),m=s.Util.applyTransform([0,g],k),O=s.Util.applyTransform([a,0],k),ee=s.Util.applyTransform([a,g],k),ie=Math.min(E[0],m[0],O[0],ee[0]),Q=Math.min(E[1],m[1],O[1],ee[1]),K=Math.max(E[0],m[0],O[0],ee[0]),G=Math.max(E[1],m[1],O[1],ee[1]),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",ie),$.setAttributeNS(null,"y",Q),$.setAttributeNS(null,"width",K-ie),$.setAttributeNS(null,"height",G-Q),$.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const a=r[1],g=r[2],k=r[3]||s.IDENTITY_MATRIX,[E,m,O,ee]=r[4],ie=r[5],Q=r[6],K=r[7],G=`shading${c++}`,[$,X,ne,le]=s.Util.normalizeRect([...s.Util.applyTransform([E,m],k),...s.Util.applyTransform([O,ee],k)]),[_e,B]=s.Util.singularValueDecompose2dScale(k),d=ie*_e,u=Q*B,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",G),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",d),R.setAttributeNS(null,"height",u),R.setAttributeNS(null,"x",`${$}`),R.setAttributeNS(null,"y",`${X}`);const j=this.svg,U=this.transformMatrix,W=this.current.fillColor,Y=this.current.strokeColor,V=this.svgFactory.create(ne-$,le-X);if(this.svg=V,this.transformMatrix=k,K===2){const o=s.Util.makeHexColor(...a);this.current.fillColor=o,this.current.strokeColor=o}return this.executeOpTree(this.convertOpList(g)),this.svg=j,this.transformMatrix=U,this.current.fillColor=W,this.current.strokeColor=Y,R.append(V.childNodes[0]),this.defs.append(R),`url(#${G})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const a=`shading${c++}`,g=r[3];let k;switch(r[1]){case"axial":const E=r[4],m=r[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",E[0]),k.setAttributeNS(null,"y1",E[1]),k.setAttributeNS(null,"x2",m[0]),k.setAttributeNS(null,"y2",m[1]);break;case"radial":const O=r[4],ee=r[5],ie=r[6],Q=r[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",a),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",ee[0]),k.setAttributeNS(null,"cy",ee[1]),k.setAttributeNS(null,"r",Q),k.setAttributeNS(null,"fx",O[0]),k.setAttributeNS(null,"fy",O[1]),k.setAttributeNS(null,"fr",ie);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const E of g){const m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",E[0]),m.setAttributeNS(null,"stop-color",E[1]),k.append(m)}return this.defs.append(k),`url(#${a})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,a){this.current.dashArray=r,this.current.dashPhase=a}constructPath(r,a){const g=this.current;let k=g.x,E=g.y,m=[],O=0;for(const ee of r)switch(ee|0){case s.OPS.rectangle:k=a[O++],E=a[O++];const ie=a[O++],Q=a[O++],K=k+ie,G=E+Q;m.push("M",i(k),i(E),"L",i(K),i(E),"L",i(K),i(G),"L",i(k),i(G),"Z");break;case s.OPS.moveTo:k=a[O++],E=a[O++],m.push("M",i(k),i(E));break;case s.OPS.lineTo:k=a[O++],E=a[O++],m.push("L",i(k),i(E));break;case s.OPS.curveTo:k=a[O+4],E=a[O+5],m.push("C",i(a[O]),i(a[O+1]),i(a[O+2]),i(a[O+3]),i(k),i(E)),O+=6;break;case s.OPS.curveTo2:m.push("C",i(k),i(E),i(a[O]),i(a[O+1]),i(a[O+2]),i(a[O+3])),k=a[O+2],E=a[O+3],O+=4;break;case s.OPS.curveTo3:k=a[O+2],E=a[O+3],m.push("C",i(a[O]),i(a[O+1]),i(k),i(E),i(k),i(E)),O+=4;break;case s.OPS.closePath:m.push("Z");break}m=m.join(" "),g.path&&r.length>0&&r[0]!==s.OPS.rectangle&&r[0]!==s.OPS.moveTo?m=g.path.getAttributeNS(null,"d")+m:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",m),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(k,E)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const a=`clippath${v++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",a),g.setAttributeNS(null,"transform",l(this.transformMatrix));const k=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(k),this.defs.append(g),r.activeClipUrl){r.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;g.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const a=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",a)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[a,g]of r)switch(a){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,s.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,a=1){const g=this.current;let k=g.dashArray;a!==1&&k.length>0&&(k=k.map(function(E){return a*E})),r.setAttributeNS(null,"stroke",g.strokeColor),r.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",i(g.miterLimit)),r.setAttributeNS(null,"stroke-linecap",g.lineCap),r.setAttributeNS(null,"stroke-linejoin",g.lineJoin),r.setAttributeNS(null,"stroke-width",i(a*g.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",k.map(i).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",i(a*g.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(r)}paintImageXObject(r){const a=r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r);if(!a){(0,s.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(r,a){const g=r.width,k=r.height,E=P(r,this.forceDataSchema,!!a),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",i(g)),m.setAttributeNS(null,"height",i(k)),this.current.element=m,this.clip("nonzero");const O=this.svgFactory.createElement("svg:image");O.setAttributeNS(f,"xlink:href",E),O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y",i(-k)),O.setAttributeNS(null,"width",i(g)+"px"),O.setAttributeNS(null,"height",i(k)+"px"),O.setAttributeNS(null,"transform",`scale(${i(1/g)} ${i(-1/k)})`),a?a.append(O):this._ensureTransformGroup().append(O)}paintImageMaskXObject(r){const a=this.current,g=r.width,k=r.height,E=a.fillColor;a.maskId=`mask${A++}`;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",a.maskId);const O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",i(g)),O.setAttributeNS(null,"height",i(k)),O.setAttributeNS(null,"fill",E),O.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(m),this._ensureTransformGroup().append(O),this.paintInlineImageXObject(r,m)}paintFormXObjectBegin(r,a){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),a){const g=a[2]-a[0],k=a[3]-a[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",a[0]),E.setAttributeNS(null,"y",a[1]),E.setAttributeNS(null,"width",i(g)),E.setAttributeNS(null,"height",i(k)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const a=this.svgFactory.create(r.width,r.height),g=this.svgFactory.createElement("svg:defs");a.append(g),this.defs=g;const k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",l(r.transform)),a.append(k),this.svg=k,a}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var t=y(1),s=y(33);const F=require$$5,M=require$$5,T=require$$5,b=require$$5,f=/^file:\/\/\/[a-zA-Z]:\//;function w(A){const c=b.parse(A);return c.protocol==="file:"||c.host?c:/^[a-z]:[/\\]/i.test(A)?b.parse(`file:///${A}`):(c.host||(c.protocol="file:"),c)}class L{constructor(c){this.source=c,this.url=w(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new e(this),this._fullRequestReader}getRangeReader(c,r){if(r<=this._progressiveDataLength)return null;const a=this.isFsUrl?new v(this,c,r):new i(this,c,r);return this._rangeRequestReaders.push(a),a}cancelAllRequests(c){this._fullRequestReader&&this._fullRequestReader.cancel(c);for(const r of this._rangeRequestReaders.slice(0))r.cancel(c)}}n.PDFNodeStream=L;class x{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=c.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();const r=c.source;this._isStreamingSupported=!r.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=c.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(A,c){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:c}}class e extends x{constructor(c){super(c);const r=a=>{if(a.statusCode===404){const m=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(a);const g=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:k,suggestedLength:E}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=E||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=M.request(h(this._url,c.httpHeaders),r):this._request=T.request(h(this._url,c.httpHeaders),r),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class i extends P{constructor(c,r,a){super(c),this._httpHeaders={};for(const k in c.httpHeaders){const E=c.httpHeaders[k];typeof E>"u"||(this._httpHeaders[k]=E)}this._httpHeaders.Range=`bytes=${r}-${a-1}`;const g=k=>{if(k.statusCode===404){const E=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E;return}this._setReadableStream(k)};this._request=null,this._url.protocol==="http:"?this._request=M.request(h(this._url,this._httpHeaders),g):this._request=T.request(h(this._url,this._httpHeaders),g),this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class l extends x{constructor(c){super(c);let r=decodeURIComponent(this._url.path);f.test(this._url.href)&&(r=r.replace(/^\//,"")),F.lstat(r,(a,g)=>{if(a){a.code==="ENOENT"&&(a=new t.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=g.size,this._setReadableStream(F.createReadStream(r)),this._headersCapability.resolve()})}}class v extends P{constructor(c,r,a){super(c);let g=decodeURIComponent(this._url.path);f.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(F.createReadStream(g,{start:r,end:a-1}))}}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=b,n.extractFilenameFromHeader=T,n.validateRangeRequestCapabilities=M,n.validateResponseStatus=f;var t=y(1),s=y(34),F=y(8);function M({getResponseHeader:w,isHttp:L,rangeChunkSize:x,disableRange:P}){const h={allowRangeRequests:!1,suggestedLength:void 0},e=parseInt(w("Content-Length"),10);return!Number.isInteger(e)||(h.suggestedLength=e,e<=2*x)||P||!L||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function T(w){const L=w("Content-Disposition");if(L){let x=(0,s.getFilenameFromContentDispositionHeader)(L);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,F.isPdfFile)(x))return x}return null}function b(w,L){return w===404||w===0&&L.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+L+'".'):new t.UnexpectedResponseException(`Unexpected server response (${w}) while retrieving PDF "${L}".`,w)}function f(w){return w===200||w===206}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=s;var t=y(1);function s(F){let M=!0,T=b("filename\\*","i").exec(F);if(T){T=T[1];let e=x(T);return e=unescape(e),e=P(e),e=h(e),w(e)}if(T=L(F),T){const e=h(T);return w(e)}if(T=b("filename","i").exec(F),T){T=T[1];let e=x(T);return e=h(e),w(e)}function b(e,i){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function f(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const l=new TextDecoder(e,{fatal:!0}),v=(0,t.stringToBytes)(i);i=l.decode(v),M=!1}catch{}}return i}function w(e){return M&&/[\x80-\xff]/.test(e)&&(e=f("utf-8",e),M&&(e=f("iso-8859-1",e))),e}function L(e){const i=[];let l;const v=b("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=v.exec(e))!==null;){let[,c,r,a]=l;if(c=parseInt(c,10),c in i){if(c===0)break;continue}i[c]=[r,a]}const A=[];for(let c=0;c<i.length&&c in i;++c){let[r,a]=i[c];a=x(a),r&&(a=unescape(a),c===0&&(a=P(a))),A.push(a)}return A.join("")}function x(e){if(e.startsWith('"')){const i=e.slice(1).split('\\"');for(let l=0;l<i.length;++l){const v=i[l].indexOf('"');v!==-1&&(i[l]=i[l].slice(0,v),i.length=l+1),i[l]=i[l].replace(/\\(.)/g,"$1")}e=i.join('"')}return e}function P(e){const i=e.indexOf("'");if(i===-1)return e;const l=e.slice(0,i),A=e.slice(i+1).replace(/^[^']*'/,"");return f(l,A)}function h(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,l,v,A){if(v==="q"||v==="Q")return A=A.replace(/_/g," "),A=A.replace(/=([0-9a-fA-F]{2})/g,function(c,r){return String.fromCharCode(parseInt(r,16))}),f(l,A);try{A=atob(A)}catch{}return f(l,A)})}return""}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var t=y(1),s=y(33);const F=200,M=206;function T(x){const P=x.response;return typeof P!="string"?P:(0,t.stringToBytes)(P).buffer}class b{constructor(P,h={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.getXhr=h.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,h,e){const i={begin:P,end:h};for(const l in e)i[l]=e[l];return this.request(i)}requestFull(P){return this.request(P)}request(P){const h=this.getXhr(),e=this.currXhrId++,i=this.pendingRequests[e]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const v=this.httpHeaders[l];typeof v>"u"||h.setRequestHeader(l,v)}return this.isHttp&&"begin"in P&&"end"in P?(h.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),i.expectedStatus=M):i.expectedStatus=F,h.responseType="arraybuffer",P.onError&&(h.onerror=function(l){P.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,e),h.onprogress=this.onProgress.bind(this,e),i.onHeadersReceived=P.onHeadersReceived,i.onDone=P.onDone,i.onError=P.onError,i.onProgress=P.onProgress,h.send(null),e}onProgress(P,h){var i;const e=this.pendingRequests[P];e&&((i=e.onProgress)==null||i.call(e,h))}onStateChange(P,h){var c,r,a;const e=this.pendingRequests[P];if(!e)return;const i=e.xhr;if(i.readyState>=2&&e.onHeadersReceived&&(e.onHeadersReceived(),delete e.onHeadersReceived),i.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],i.status===0&&this.isHttp){(c=e.onError)==null||c.call(e,i.status);return}const l=i.status||F;if(!(l===F&&e.expectedStatus===M)&&l!==e.expectedStatus){(r=e.onError)==null||r.call(e,i.status);return}const A=T(i);if(l===M){const g=i.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);e.onDone({begin:parseInt(k[1],10),chunk:A})}else A?e.onDone({begin:0,chunk:A}):(a=e.onError)==null||a.call(e,i.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const h=this.pendingRequests[P].xhr;delete this.pendingRequests[P],h.abort()}}class f{constructor(P){this._source=P,this._manager=new b(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const h=this._rangeRequestReaders.indexOf(P);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new w(this._manager,this._source),this._fullRequestReader}getRangeReader(P,h){const e=new L(this._manager,P,h);return e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(e),e}cancelAllRequests(P){var h;(h=this._fullRequestReader)==null||h.cancel(P);for(const e of this._rangeRequestReaders.slice(0))e.cancel(P)}}n.PDFNetworkStream=f;class w{constructor(P,h){this._manager=P;const e={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=P.requestFull(e),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,h=this._manager.getRequestXhr(P),e=v=>h.getResponseHeader(v),{allowRangeRequests:i,suggestedLength:l}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(e),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,s.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var h;(h=this.onProgress)==null||h.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,t.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(P,h,e){this._manager=P;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(h,e,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const h=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,s.createResponseStatusError)(P,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var h;this.isStreamingSupported||(h=this.onProgress)==null||h.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,t.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(S,n,y)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var t=y(1),s=y(33);function F(w,L,x){return{method:"GET",headers:w,signal:x.signal,mode:"cors",credentials:L?"include":"same-origin",redirect:"follow"}}function M(w){const L=new Headers;for(const x in w){const P=w[x];typeof P>"u"||L.append(x,P)}return L}class T{constructor(L){this.source=L,this.isHttp=/^https?:/i.test(L.url),this.httpHeaders=this.isHttp&&L.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var L;return((L=this._fullRequestReader)==null?void 0:L._loaded)??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(L,x){if(x<=this._progressiveDataLength)return null;const P=new f(this,L,x);return this._rangeRequestReaders.push(P),P}cancelAllRequests(L){this._fullRequestReader&&this._fullRequestReader.cancel(L);for(const x of this._rangeRequestReaders.slice(0))x.cancel(L)}}n.PDFFetchStream=T;class b{constructor(L){this._stream=L,this._reader=null,this._loaded=0,this._filename=null;const x=L.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=M(this._stream.httpHeaders);const P=x.url;fetch(P,F(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,s.validateResponseStatus)(h.status))throw(0,s.createResponseStatusError)(h.status,P);this._reader=h.body.getReader(),this._headersCapability.resolve();const e=v=>h.headers.get(v),{allowRangeRequests:i,suggestedLength:l}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=l||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:L,done:x}=await this._reader.read();return x?{value:L,done:x}:(this._loaded+=L.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(L).buffer,done:!1})}cancel(L){this._reader&&this._reader.cancel(L),this._abortController.abort()}}class f{constructor(L,x,P){this._stream=L,this._reader=null,this._loaded=0;const h=L.source;this._withCredentials=h.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${P-1}`);const e=h.url;fetch(e,F(this._headers,this._withCredentials,this._abortController)).then(i=>{if(!(0,s.validateResponseStatus)(i.status))throw(0,s.createResponseStatusError)(i.status,e);this._readCapability.resolve(),this._reader=i.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:L,done:x}=await this._reader.read();return x?{value:L,done:x}:(this._loaded+=L.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(L).buffer,done:!1})}cancel(L){this._reader&&this._reader.cancel(L),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(S){var n=__webpack_module_cache__[S];if(n!==void 0)return n.exports;var y=__webpack_module_cache__[S]={exports:{}};return __webpack_modules__[S](y,y.exports,__w_pdfjs_require__),y.exports}var __webpack_exports__={};return(()=>{var S=__webpack_exports__;Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(S,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(S,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(S,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(S,"AnnotationLayer",{enumerable:!0,get:function(){return M.AnnotationLayer}}),Object.defineProperty(S,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(S,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(S,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(S,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(S,"LoopbackPort",{enumerable:!0,get:function(){return y.LoopbackPort}}),Object.defineProperty(S,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(S,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(S,"PDFDataRangeTransport",{enumerable:!0,get:function(){return y.PDFDataRangeTransport}}),Object.defineProperty(S,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(S,"PDFWorker",{enumerable:!0,get:function(){return y.PDFWorker}}),Object.defineProperty(S,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(S,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(S,"PixelsPerInch",{enumerable:!0,get:function(){return t.PixelsPerInch}}),Object.defineProperty(S,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(S,"SVGGraphics",{enumerable:!0,get:function(){return w.SVGGraphics}}),Object.defineProperty(S,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return n.UNSUPPORTED_FEATURES}}),Object.defineProperty(S,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(S,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(S,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(S,"XfaLayer",{enumerable:!0,get:function(){return L.XfaLayer}}),Object.defineProperty(S,"build",{enumerable:!0,get:function(){return y.build}}),Object.defineProperty(S,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(S,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(S,"getDocument",{enumerable:!0,get:function(){return y.getDocument}}),Object.defineProperty(S,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(S,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return t.getPdfFilenameFromUrl}}),Object.defineProperty(S,"getXfaPageViewport",{enumerable:!0,get:function(){return t.getXfaPageViewport}}),Object.defineProperty(S,"isPdfFile",{enumerable:!0,get:function(){return t.isPdfFile}}),Object.defineProperty(S,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(S,"renderTextLayer",{enumerable:!0,get:function(){return f.renderTextLayer}}),Object.defineProperty(S,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(S,"version",{enumerable:!0,get:function(){return y.version}});var n=__w_pdfjs_require__(1),y=__w_pdfjs_require__(4),t=__w_pdfjs_require__(8),s=__w_pdfjs_require__(22),F=__w_pdfjs_require__(7),M=__w_pdfjs_require__(27),T=__w_pdfjs_require__(15),b=__w_pdfjs_require__(3),f=__w_pdfjs_require__(30),w=__w_pdfjs_require__(31),L=__w_pdfjs_require__(29);if(b.isNodeJS){const{PDFNodeStream:x}=__w_pdfjs_require__(32);(0,y.setPDFNetworkStreamFactory)(P=>new x(P))}else{const{PDFNetworkStream:x}=__w_pdfjs_require__(35),{PDFFetchStream:P}=__w_pdfjs_require__(36);(0,y.setPDFNetworkStreamFactory)(h=>(0,t.isValidFetchUrl)(h.url)?new P(h):new x(h))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;function _objectWithoutProperties(S,n){if(S==null)return{};var y=_objectWithoutPropertiesLoose(S,n),t,s;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(S);for(s=0;s<F.length;s++)t=F[s],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(S,t)&&(y[t]=S[t])}return y}function _typeof(S){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(S)}function _classCallCheck(S,n){if(!(S instanceof n))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(S,n){if(_typeof(S)!=="object"||S===null)return S;var y=S[Symbol.toPrimitive];if(y!==void 0){var t=y.call(S,n||"default");if(_typeof(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(S)}function _toPropertyKey(S){var n=_toPrimitive(S,"string");return _typeof(n)==="symbol"?n:String(n)}function _defineProperties(S,n){for(var y=0;y<n.length;y++){var t=n[y];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(S,_toPropertyKey(t.key),t)}}function _createClass(S,n,y){return n&&_defineProperties(S.prototype,n),y&&_defineProperties(S,y),Object.defineProperty(S,"prototype",{writable:!1}),S}function _inherits(S,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(n&&n.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),n&&_setPrototypeOf(S,n)}function _possibleConstructorReturn(S,n){if(n&&(_typeof(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(S)}function _getPrototypeOf(S){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},_getPrototypeOf(S)}function _defineProperty(S,n,y){return n=_toPropertyKey(n),n in S?Object.defineProperty(S,n,{value:y,enumerable:!0,configurable:!0,writable:!0}):S[n]=y,S}var __spreadArray=globalThis&&globalThis.__spreadArray||function(S,n,y){if(y||arguments.length===2)for(var t=0,s=n.length,F;t<s;t++)(F||!(t in n))&&(F||(F=Array.prototype.slice.call(n,0,t)),F[t]=n[t]);return S.concat(F||Array.prototype.slice.call(n))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(S,n){var y={};return allEvents.forEach(function(t){var s=S[t];s&&(n?y[t]=function(F){return s(F,n(t))}:y[t]=s)}),y}function makeCancellablePromise(S){var n=!1,y=new Promise(function(t,s){S.then(function(F){return!n&&t(F)}).catch(function(F){return!n&&s(F)})});return{promise:y,cancel:function(){n=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(S,n){if(!S){if(isProduction$1)throw new Error(prefix);var y=typeof n=="function"?n():n,t=y?"".concat(prefix,": ").concat(y):prefix;throw new Error(t)}}var isProduction=!0;function warning(S,n){if(!isProduction){if(S)return;var y="Warning: "+n;typeof console<"u"&&console.warn(y);try{throw Error(y)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message(S){var n=S.children,y=S.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(y)},n)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function S(){_classCallCheck(this,S),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(S,[{key:"setDocument",value:function(y){this.pdfDocument=y}},{key:"setViewer",value:function(y){this.pdfViewer=y}},{key:"setExternalLinkRel",value:function(y){this.externalLinkRel=y}},{key:"setExternalLinkTarget",value:function(y){this.externalLinkTarget=y}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(y){this.pdfViewer.currentPageNumber=y}},{key:"rotation",get:function(){return 0},set:function(y){}},{key:"goToDestination",value:function(y){var t=this;new Promise(function(s){typeof y=="string"?t.pdfDocument.getDestination(y).then(s):Array.isArray(y)?s(y):y.then(s)}).then(function(s){invariant(Array.isArray(s),'"'.concat(s,'" is not a valid destination array.'));var F=s[0];new Promise(function(M){F instanceof Object?t.pdfDocument.getPageIndex(F).then(function(T){M(T)}).catch(function(){invariant(!1,'"'.concat(F,'" is not a valid page reference.'))}):typeof F=="number"?M(F):invariant(!1,'"'.concat(F,'" is not a valid destination reference.'))}).then(function(M){var T=M+1;invariant(T>=1&&T<=t.pagesCount,'"'.concat(T,'" is not a valid page number.')),t.pdfViewer.scrollPageIntoView({dest:y,pageIndex:M,pageNumber:T})})})}},{key:"navigateTo",value:function(y){this.goToDestination(y)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(y,t,s){y.href=t,y.rel=this.externalLinkRel||DEFAULT_LINK_REL,y.target=s?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),S}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(S){if(Array.isArray(S))return S}function _iterableToArrayLimit(S,n){var y=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(y!=null){var t,s,F,M,T=[],b=!0,f=!1;try{if(F=(y=y.call(S)).next,n===0){if(Object(y)!==y)return;b=!1}else for(;!(b=(t=F.call(y)).done)&&(T.push(t.value),T.length!==n);b=!0);}catch(w){f=!0,s=w}finally{try{if(!b&&y.return!=null&&(M=y.return(),Object(M)!==M))return}finally{if(f)throw s}}return T}}function _arrayLikeToArray(S,n){(n==null||n>S.length)&&(n=S.length);for(var y=0,t=new Array(n);y<n;y++)t[y]=S[y];return t}function _unsupportedIterableToArray(S,n){if(S){if(typeof S=="string")return _arrayLikeToArray(S,n);var y=Object.prototype.toString.call(S).slice(8,-1);if(y==="Object"&&S.constructor&&(y=S.constructor.name),y==="Map"||y==="Set")return Array.from(S);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return _arrayLikeToArray(S,n)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(S,n){return _arrayWithHoles(S)||_iterableToArrayLimit(S,n)||_unsupportedIterableToArray(S,n)||_nonIterableRest()}var isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(S){return typeof S<"u"}function isProvided(S){return isDefined(S)&&S!==null}function isString(S){return typeof S=="string"}function isArrayBuffer(S){return S instanceof ArrayBuffer}function isBlob(S){return invariant(isBrowser,"isBlob can only be used in a browser environment"),S instanceof Blob}function isFile$1(S){return invariant(isBrowser,"isFile can only be used in a browser environment"),S instanceof File}function isDataURI(S){return isString(S)&&/^data:/.test(S)}function dataURItoByteString(S){invariant(isDataURI(S),"Invalid data URI.");var n=S.split(","),y=_slicedToArray(n,2),t=y[0],s=y[1],F=t.split(";");return F.indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(S){S&&S.cancel&&S.cancel()}function makePageCallback(S,n){return Object.defineProperty(S,"width",{get:function(){return this.view[2]*n},configurable:!0}),Object.defineProperty(S,"height",{get:function(){return this.view[3]*n},configurable:!0}),Object.defineProperty(S,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(S,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),S}function isCancelException(S){return S.name==="RenderingCancelledException"}function loadFromFile(S){return new Promise(function(n,y){var t=new FileReader;return t.onload=function(){return n(new Uint8Array(t.result))},t.onerror=function(s){switch(s.target.error.code){case s.target.error.NOT_FOUND_ERR:return y(new Error("Error while reading a file: File not found."));case s.target.error.NOT_READABLE_ERR:return y(new Error("Error while reading a file: File not readable."));case s.target.error.SECURITY_ERR:return y(new Error("Error while reading a file: Security error."));case s.target.error.ABORT_ERR:return y(new Error("Error while reading a file: Aborted."));default:return y(new Error("Error while reading a file."))}},t.readAsArrayBuffer(S),null})}function _arrayWithoutHoles(S){if(Array.isArray(S))return _arrayLikeToArray(S)}function _iterableToArray(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(S){return _arrayWithoutHoles(S)||_iterableToArray(S)||_unsupportedIterableToArray(S)||_nonIterableSpread()}var eventProps=function(){var S={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(n){S[n]=PropTypes.func}),S}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File<"u"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function S(n,y,t){var s=n[y],F=n.pageNumber,M=n.pdf;if(!isDefined(M))return null;if(isDefined(s)){if(typeof s!="number")return new Error("`".concat(y,"` of type `").concat(_typeof(s),"` supplied to `").concat(t,"`, expected `number`."));if(s<0)return new Error("Expected `".concat(y,"` to be greater or equal to 0."));var T=M.numPages;if(s+1>T)return new Error("Expected `".concat(y,"` to be less or equal to ").concat(T-1,"."))}else if(!isDefined(F))return new Error("`".concat(y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(t,"`."));return null},isPageNumber=function S(n,y,t){var s=n[y],F=n.pageIndex,M=n.pdf;if(!isDefined(M))return null;if(isDefined(s)){if(typeof s!="number")return new Error("`".concat(y,"` of type `").concat(_typeof(s),"` supplied to `").concat(t,"`, expected `number`."));if(s<1)return new Error("Expected `".concat(y,"` to be greater or equal to 1."));var T=M.numPages;if(s>T)return new Error("Expected `".concat(y,"` to be less or equal to ").concat(T,"."))}else if(!isDefined(F))return new Error("`".concat(y,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(t,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(S,n){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(S);n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(S,s).enumerable})),y.push.apply(y,t)}return y}function _objectSpread$3(S){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$3(Object(y),!0).forEach(function(t){_defineProperty(S,t,y[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):ownKeys$3(Object(y)).forEach(function(t){Object.defineProperty(S,t,Object.getOwnPropertyDescriptor(y,t))})}return S}function _createSuper$5(S){var n=_isNativeReflectConstruct$5();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(S){_inherits(y,S);var n=_createSuper$5(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"state",{pdf:null}),_defineProperty(_assertThisInitialized(t),"viewer",{scrollPageIntoView:function(b){var f=b.dest,w=b.pageIndex,L=b.pageNumber,x=t.props.onItemClick;if(x){x({dest:f,pageIndex:w,pageNumber:L});return}var P=t.pages[w];if(P){P.scrollIntoView();return}warning(!1,"An internal link leading to page ".concat(L," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_defineProperty(_assertThisInitialized(t),"linkService",new LinkService),_defineProperty(_assertThisInitialized(t),"loadDocument",function(){cancelRunningTask(t.runningTask),t.loadingTask&&t.loadingTask.destroy();var T=makeCancellablePromise(t.findDocumentSource());t.runningTask=T,T.promise.then(function(b){if(t.onSourceSuccess(),!!b){t.setState(function(h){return h.pdf?{pdf:null}:null});var f=t.props,w=f.options,L=f.onLoadProgress,x=f.onPassword,P=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},b),w));P.onPassword=x,L&&(P.onProgress=L),t.loadingTask=P,P.promise.then(function(h){t.setState(function(e){return e.pdf&&e.pdf.fingerprint===h.fingerprint?null:{pdf:h}},t.onLoadSuccess)}).catch(function(h){t.onLoadError(h)})}}).catch(function(b){t.onSourceError(b)})}),_defineProperty(_assertThisInitialized(t),"setupLinkService",function(){var T=t.props,b=T.externalLinkRel,f=T.externalLinkTarget;t.linkService.setViewer(t.viewer),t.linkService.setExternalLinkRel(b),t.linkService.setExternalLinkTarget(f)}),_defineProperty(_assertThisInitialized(t),"onSourceSuccess",function(){var T=t.props.onSourceSuccess;T&&T()}),_defineProperty(_assertThisInitialized(t),"onSourceError",function(T){warning(T);var b=t.props.onSourceError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var T=t.props.onLoadSuccess,b=t.state.pdf;T&&T(b),t.pages=new Array(b.numPages),t.linkService.setDocument(b)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(T){t.setState({pdf:!1}),warning(T);var b=t.props.onLoadError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"findDocumentSource",function(){return new Promise(function(T){var b=t.props.file;if(b||T(null),typeof b=="string"){if(isDataURI(b)){var f=dataURItoByteString(b);T({data:f})}displayCORSWarning(),T({url:b})}if(b instanceof PDFDataRangeTransport&&T({range:b}),isArrayBuffer(b)&&T({data:b}),isBrowser&&(isBlob(b)||isFile$1(b))){loadFromFile(b).then(function(P){T({data:P})});return}if(invariant(_typeof(b)==="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(b.url||b.data||b.range,"Invalid parameter object: need either .data, .range or .url"),typeof b.url=="string"){if(isDataURI(b.url)){var w=b.url,L=_objectWithoutProperties(b,_excluded),x=dataURItoByteString(w);T(_objectSpread$3({data:x},L))}displayCORSWarning()}T(b)})}),_defineProperty(_assertThisInitialized(t),"registerPage",function(T,b){t.pages[T]=b}),_defineProperty(_assertThisInitialized(t),"unregisterPage",function(T){delete t.pages[T]}),t}return _createClass(y,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(s){var F=this.props.file;F!==s.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var s=this.linkService,F=this.registerPage,M=this.unregisterPage,T=this.props,b=T.imageResourcesPath,f=T.renderMode,w=T.rotate,L=this.state.pdf;return{imageResourcesPath:b,linkService:s,pdf:L,registerPage:F,renderMode:f,rotate:w,unregisterPage:M}}},{key:"eventProps",get:function(){var s=this;return makeEventProps(this.props,function(){return s.state.pdf})}},{key:"renderChildren",value:function(){var s=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},s)}},{key:"renderContent",value:function(){var s=this.props.file,F=this.state.pdf;if(!s){var M=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof M=="function"?M():M)}if(F===null){var T=this.props.loading;return React.createElement(Message,{type:"loading"},typeof T=="function"?T():T)}if(F===!1){var b=this.props.error;return React.createElement(Message,{type:"error"},typeof b=="function"?b():b)}return this.renderChildren()}},{key:"render",value:function(){var s=this.props,F=s.className,M=s.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Document",F),ref:M},this.eventProps),this.renderContent())}}]),y}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function S(n,y){switch(y){case PasswordResponses.NEED_PASSWORD:{var t=prompt("Enter the password to open this PDF file.");n(t);break}case PasswordResponses.INCORRECT_PASSWORD:{var s=prompt("Invalid password. Please try again.");n(s);break}}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$2(S,n){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(S);n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(S,s).enumerable})),y.push.apply(y,t)}return y}function _objectSpread$2(S){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2(Object(y),!0).forEach(function(t){_defineProperty(S,t,y[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):ownKeys$2(Object(y)).forEach(function(t){Object.defineProperty(S,t,Object.getOwnPropertyDescriptor(y,t))})}return S}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);function mergeRefs(){for(var S=[],n=0;n<arguments.length;n++)S[n]=arguments[n];var y=S.filter(Boolean);if(y.length<=1){var t=y[0];return t||null}return function(F){y.forEach(function(M){typeof M=="function"?M(F):M&&(M.current=F)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(S){var n=_isNativeReflectConstruct$4();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(S){_inherits(y,S);var n=_createSuper$4(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){t.renderer=null;var T=t.props,b=T.onRenderSuccess,f=T.page,w=T.scale;b&&b(makePageCallback(f,w))}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(T){if(!isCancelException(T)){warning(T);var b=t.props.onRenderError;b&&b(T)}}),_defineProperty(_assertThisInitialized(t),"drawPageOnCanvas",function(){var T=t.canvasElement.current;if(!T)return null;var b=_assertThisInitialized(t),f=b.renderViewport,w=b.viewport,L=t.props,x=L.canvasBackground,P=L.page,h=L.renderForms;T.width=f.width,T.height=f.height,T.style.width="".concat(Math.floor(w.width),"px"),T.style.height="".concat(Math.floor(w.height),"px");var e={annotationMode:h?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return T.getContext("2d",{alpha:!1})},viewport:f};x&&(e.background=x),t.cancelRenderingTask();var i=P.render(e);return t.renderer=i,i.promise.then(t.onRenderSuccess).catch(t.onRenderError)}),t}return _createClass(y,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(s){var F=this.props,M=F.canvasBackground,T=F.devicePixelRatio,b=F.page,f=F.renderForms;(M!==s.canvasBackground||T!==s.devicePixelRatio||f!==s.renderForms)&&(b.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var s=this.canvasElement.current;s&&(s.width=0,s.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var s=this.props.devicePixelRatio;return s||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var s=this.devicePixelRatio,F=this.props,M=F.page,T=F.rotate,b=F.scale;return M.getViewport({scale:b*s,rotation:T})}},{key:"viewport",get:function(){var s=this.props,F=s.page,M=s.rotate,T=s.scale;return F.getViewport({scale:T,rotation:M})}},{key:"render",value:function(){var s=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(s,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),y}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,devicePixelRatio:PropTypes.number,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};function PageCanvas(S){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageCanvasInternal,_extends({},n,S))})}function _createSuper$3(S){var n=_isNativeReflectConstruct$3();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(S){_inherits(y,S);var n=_createSuper$3(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"state",{svg:null}),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){t.renderer=null;var T=t.props,b=T.onRenderSuccess,f=T.page,w=T.scale;b&&b(makePageCallback(f,w))}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(T){if(!isCancelException(T)){warning(T);var b=t.props.onRenderError;b&&b(T)}}),_defineProperty(_assertThisInitialized(t),"renderSVG",function(){var T=t.props.page;return t.renderer=T.getOperatorList(),t.renderer.then(function(b){var f=new pdfExports.SVGGraphics(T.commonObjs,T.objs);t.renderer=f.getSVG(b,t.viewport).then(function(w){t.setState({svg:w},t.onRenderSuccess)}).catch(t.onRenderError)}).catch(t.onRenderError)}),_defineProperty(_assertThisInitialized(t),"drawPageOnContainer",function(T){var b=t.state.svg;if(!(!T||!b)){T.firstElementChild||T.appendChild(b);var f=t.viewport,w=f.width,L=f.height;b.setAttribute("width",w),b.setAttribute("height",L)}}),t}return _createClass(y,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var s=this.props,F=s.page,M=s.rotate,T=s.scale;return F.getViewport({scale:T,rotation:M})}},{key:"render",value:function(){var s=this,F=this.viewport,M=F.width,T=F.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(f){return s.drawPageOnContainer(f)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:M,height:T,userSelect:"none"}})}}]),y}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};function PageSVG(S){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageSVGInternal,_extends({},n,S))})}function ownKeys$1(S,n){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(S);n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(S,s).enumerable})),y.push.apply(y,t)}return y}function _objectSpread$1(S){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(y),!0).forEach(function(t){_defineProperty(S,t,y[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):ownKeys$1(Object(y)).forEach(function(t){Object.defineProperty(S,t,Object.getOwnPropertyDescriptor(y,t))})}return S}function _createSuper$2(S){var n=_isNativeReflectConstruct$2();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(S){_inherits(y,S);var n=_createSuper$2(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"state",{textContent:null}),_defineProperty(_assertThisInitialized(t),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(t),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(t),"loadTextContent",function(){var T=t.props.page,b=makeCancellablePromise(T.getTextContent());t.runningTask=b,b.promise.then(function(f){t.setState({textContent:f},t.onLoadSuccess)}).catch(function(f){t.onLoadError(f)})}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var T=t.props.onGetTextSuccess,b=t.state.textContent;T&&T(b)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(T){t.setState({textItems:!1}),warning(T);var b=t.props.onGetTextError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){var T=t.props.onRenderTextLayerSuccess;T&&T()}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(T){warning(T);var b=t.props.onRenderTextLayerError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"onMouseDown",function(){var T=t.endElement.current;T&&T.classList.add("active")}),_defineProperty(_assertThisInitialized(t),"onMouseUp",function(){var T=t.endElement.current;T&&T.classList.remove("active")}),t}return _createClass(y,[{key:"componentDidMount",value:function(){var s=this.props.page;invariant(s,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),this.loadTextContent()}},{key:"componentDidUpdate",value:function(s){var F=this.props.page;s.page&&F!==s.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var s=this.props,F=s.page,M=s.rotate,T=s.scale;return F.getViewport({scale:T,rotation:M})}},{key:"unrotatedViewport",get:function(){var s=this.props,F=s.page,M=s.scale;return F.getViewport({scale:M})}},{key:"rotate",get:function(){var s=this.props,F=s.page,M=s.rotate;return M-F.rotate}},{key:"renderTextLayer",value:function(){var s=this,F=this.state.textContent;if(!F)return null;var M=this.layerElement.current,T=this.viewport,b=this.props,f=b.customTextRenderer,w=b.pageIndex,L=b.pageNumber;cancelRunningTask(this.runningTask),M.innerHTML="";var x={container:M,textContent:F,viewport:T},P=pdfExports.renderTextLayer(x);this.runningTask=P,P.promise.then(function(){var h=document.createElement("div");if(h.className="endOfContent",M.append(h),s.endElement.current=h,f){var e=0;F.items.forEach(function(i,l){var v=s.layerElement.current.children[e],A=f(_objectSpread$1({pageIndex:w,pageNumber:L,itemIndex:l},i));v.innerHTML=A,e+=i.str&&i.hasEOL?2:1})}s.onRenderSuccess()}).catch(function(h){s.onRenderError(h)})}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),y}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:PropTypes.func,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,page:isPage.isRequired,pageIndex:PropTypes.number.isRequired,pageNumber:PropTypes.number.isRequired,rotate:isRotate,scale:PropTypes.number};function TextLayer(S){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(TextLayerInternal,_extends({},n,S))})}function _createSuper$1(S){var n=_isNativeReflectConstruct$1();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(S){_inherits(y,S);var n=_createSuper$1(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"state",{annotations:null}),_defineProperty(_assertThisInitialized(t),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(t),"loadAnnotations",function(){var T=t.props.page,b=makeCancellablePromise(T.getAnnotations());t.runningTask=b,b.promise.then(function(f){t.setState({annotations:f},t.onLoadSuccess)}).catch(function(f){t.onLoadError(f)})}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var T=t.props.onGetAnnotationsSuccess,b=t.state.annotations;T&&T(b)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(T){t.setState({annotations:!1}),warning(T);var b=t.props.onGetAnnotationsError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){var T=t.props.onRenderAnnotationLayerSuccess;T&&T()}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(T){warning(T);var b=t.props.onRenderAnnotationLayerError;b&&b(T)}),t}return _createClass(y,[{key:"componentDidMount",value:function(){var s=this.props.page;invariant(s,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(s){var F=this.props,M=F.page,T=F.renderForms;(s.page&&M!==s.page||T!==s.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var s=this.props,F=s.page,M=s.rotate,T=s.scale;return F.getViewport({scale:T,rotation:M})}},{key:"renderAnnotationLayer",value:function(){var s=this.state.annotations;if(s){var F=this.props,M=F.imageResourcesPath,T=F.linkService,b=F.page,f=F.renderForms,w=this.viewport.clone({dontFlip:!0}),L={annotations:s,div:this.layerElement.current,imageResourcesPath:M,linkService:T,page:b,renderForms:f,viewport:w};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(L),this.onRenderSuccess()}catch(x){this.onRenderError(x)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),y}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer$1=function S(n){return React.createElement(DocumentContext.Consumer,null,function(y){return React.createElement(PageContext.Consumer,null,function(t){return React.createElement(AnnotationLayerInternal,_extends({},y,t,n))})})};function ownKeys(S,n){var y=Object.keys(S);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(S);n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(S,s).enumerable})),y.push.apply(y,t)}return y}function _objectSpread(S){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(y),!0).forEach(function(t){_defineProperty(S,t,y[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(y)):ownKeys(Object(y)).forEach(function(t){Object.defineProperty(S,t,Object.getOwnPropertyDescriptor(y,t))})}return S}function _createSuper(S){var n=_isNativeReflectConstruct();return function(){var t=_getPrototypeOf(S),s;if(n){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(t,arguments,F)}else s=t.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(S){_inherits(y,S);var n=_createSuper(y);function y(){var t;_classCallCheck(this,y);for(var s=arguments.length,F=new Array(s),M=0;M<s;M++)F[M]=arguments[M];return t=n.call.apply(n,[this].concat(F)),_defineProperty(_assertThisInitialized(t),"state",{page:null}),_defineProperty(_assertThisInitialized(t),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var T=t.props,b=T.onLoadSuccess,f=T.registerPage,w=t.state.page;b&&b(makePageCallback(w,t.scale)),f&&f(t.pageIndex,t.pageElement.current)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(T){t.setState({page:!1}),warning(T);var b=t.props.onLoadError;b&&b(T)}),_defineProperty(_assertThisInitialized(t),"loadPage",function(){var T=t.props.pdf,b=t.getPageNumber();if(b){t.setState(function(w){return w.page?{page:null}:null});var f=makeCancellablePromise(T.getPage(b));t.runningTask=f,f.promise.then(function(w){t.setState({page:w},t.onLoadSuccess)}).catch(function(w){t.onLoadError(w)})}}),t}return _createClass(y,[{key:"componentDidMount",value:function(){var s=this.props.pdf;invariant(s,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(s){var F=this.props.pdf;if(s.pdf&&F!==s.pdf||this.getPageNumber()!==this.getPageNumber(s)){var M=this.props.unregisterPage;M&&M(this.getPageIndex(s)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var s=this.props.unregisterPage;s&&s(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var s=this.pageIndex,F=this.pageNumber,M=this.state.page;if(!M)return{};var T=this.props,b=T.canvasBackground,f=T.customTextRenderer,w=T.devicePixelRatio,L=T.onGetAnnotationsError,x=T.onGetAnnotationsSuccess,P=T.onGetTextError,h=T.onGetTextSuccess,e=T.onRenderAnnotationLayerError,i=T.onRenderAnnotationLayerSuccess,l=T.onRenderError,v=T.onRenderSuccess,A=T.onRenderTextLayerError,c=T.onRenderTextLayerSuccess,r=T.renderForms,a=T.renderInteractiveForms;return{canvasBackground:b,customTextRenderer:f,devicePixelRatio:w,onGetAnnotationsError:L,onGetAnnotationsSuccess:x,onGetTextError:P,onGetTextSuccess:h,onRenderAnnotationLayerError:e,onRenderAnnotationLayerSuccess:i,onRenderError:l,onRenderSuccess:v,onRenderTextLayerError:A,onRenderTextLayerSuccess:c,page:M,pageIndex:s,pageNumber:F,renderForms:r??a,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(s.pageNumber)?s.pageNumber-1:isProvided(s.pageIndex)?s.pageIndex:null}},{key:"getPageNumber",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(s.pageNumber)?s.pageNumber:isProvided(s.pageIndex)?s.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var s=this.props.rotate;if(isProvided(s))return s;var F=this.state.page;return F?F.rotate:null}},{key:"scale",get:function(){var s=this.state.page;if(!s)return null;var F=this.props,M=F.scale,T=F.width,b=F.height,f=this.rotate,w=1,L=M===null?defaultScale:M;if(T||b){var x=s.getViewport({scale:1,rotation:f});w=T?T/x.width:b/x.height}return L*w}},{key:"eventProps",get:function(){var s=this;return makeEventProps(this.props,function(){var F=s.state.page;return F&&makePageCallback(F,s.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var s=this.props,F=s.canvasRef,M=s.renderMode;switch(M){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:F})}}},{key:"renderTextLayer",value:function(){var s=this.props.renderTextLayer;return s?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var s=this.props.renderAnnotationLayer;return s?React.createElement(AnnotationLayer$1,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var s=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),s)}},{key:"renderContent",value:function(){var s=this.pageNumber,F=this.props.pdf,M=this.state.page;if(!s){var T=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof T=="function"?T():T)}if(F===null||M===null){var b=this.props.loading;return React.createElement(Message,{type:"loading"},typeof b=="function"?b():b)}if(F===!1||M===!1){var f=this.props.error;return React.createElement(Message,{type:"error"},typeof f=="function"?f():f)}return this.renderChildren()}},{key:"render",value:function(){var s=this.pageNumber,F=this.props,M=F.className,T=F.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Page",M),"data-page-number":s,ref:mergeRefs(T,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),y}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});function Page(S,n){return React.createElement(DocumentContext.Consumer,null,function(y){return React.createElement(PageInternal,_extends({ref:n},y,S))})}const Page$1=React.forwardRef(Page);displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";const AnnotationLayer="",personalResume="/portfolio/assets/maxim-dudai-cv-73c1ea2e.pdf";function FaFileDownload(S){return GenIcon({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}}]})(S)}pdfExports.GlobalWorkerOptions.workerSrc=new URL("/portfolio/assets/pdf.worker.min-99732130.js",self.location).toString();const Resume=()=>{const[S,n]=reactExports.useState(window.innerWidth),y=()=>{const s=document.createElement("a");s.href=personalResume,s.download="maxim-dudai-cv.pdf",s.dispatchEvent(new MouseEvent("click"))};reactExports.useState(()=>{window.addEventListener("resize",()=>{n(window.innerWidth)})});const t=S<550?300:S<450?200:500;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"portfolioResume w-full h-screen lg:h-full flex flex-col lg:flex-row-reverse justify-evenly items-center overflow-hidden max-h-screen",children:[jsxRuntimeExports.jsx("div",{className:"portfolioDownloadButton w-full md:w-1/2 lg:w-1/4 flex justify-center",children:jsxRuntimeExports.jsxs("button",{onClick:()=>{y(),window.open(personalResume,"_blank")},className:"flex justify-center p-2 rounded-md text-gray-200 items-center gap-x-2 w-full bg-black/50",children:[jsxRuntimeExports.jsx("p",{className:"tracking-widest",children:"Download"}),jsxRuntimeExports.jsxs("p",{className:"flex items-center gap-x-2",children:[jsxRuntimeExports.jsx(FaFileDownload,{}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-[12px]",children:".pdf"})]})]})}),jsxRuntimeExports.jsx("div",{className:"portfolioFormatPDF mt-5 lg:mt-0 h-full p-2 rounded border-2 border-black/10 dark:border-none dark:p-0",children:jsxRuntimeExports.jsx(Document,{file:personalResume,children:jsxRuntimeExports.jsx(Page$1,{renderTextLayer:!1,width:t,pageNumber:1})})})]})})};export{Resume as default};
